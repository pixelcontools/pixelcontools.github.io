(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))u(f);new MutationObserver(f=>{for(const m of f)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&u(g)}).observe(document,{childList:!0,subtree:!0});function a(f){const m={};return f.integrity&&(m.integrity=f.integrity),f.referrerPolicy&&(m.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?m.credentials="include":f.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function u(f){if(f.ep)return;f.ep=!0;const m=a(f);fetch(f.href,m)}})();function Tl(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var xl={exports:{}},go={},yl={exports:{}},Ce={};var uu;function Tf(){if(uu)return Ce;uu=1;var i=Symbol.for("react.element"),c=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.iterator;function E(S){return S===null||typeof S!="object"?null:(S=x&&S[x]||S["@@iterator"],typeof S=="function"?S:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,D={};function F(S,z,P){this.props=S,this.context=z,this.refs=D,this.updater=P||C}F.prototype.isReactComponent={},F.prototype.setState=function(S,z){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,z,"setState")},F.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function j(){}j.prototype=F.prototype;function Y(S,z,P){this.props=S,this.context=z,this.refs=D,this.updater=P||C}var H=Y.prototype=new j;H.constructor=Y,N(H,F.prototype),H.isPureReactComponent=!0;var W=Array.isArray,M=Object.prototype.hasOwnProperty,$={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function Z(S,z,P){var te,ce={},se=null,de=null;if(z!=null)for(te in z.ref!==void 0&&(de=z.ref),z.key!==void 0&&(se=""+z.key),z)M.call(z,te)&&!X.hasOwnProperty(te)&&(ce[te]=z[te]);var le=arguments.length-2;if(le===1)ce.children=P;else if(1<le){for(var ye=Array(le),we=0;we<le;we++)ye[we]=arguments[we+2];ce.children=ye}if(S&&S.defaultProps)for(te in le=S.defaultProps,le)ce[te]===void 0&&(ce[te]=le[te]);return{$$typeof:i,type:S,key:se,ref:de,props:ce,_owner:$.current}}function A(S,z){return{$$typeof:i,type:S.type,key:z,ref:S.ref,props:S.props,_owner:S._owner}}function B(S){return typeof S=="object"&&S!==null&&S.$$typeof===i}function q(S){var z={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(P){return z[P]})}var ue=/\/+/g;function ee(S,z){return typeof S=="object"&&S!==null&&S.key!=null?q(""+S.key):z.toString(36)}function J(S,z,P,te,ce){var se=typeof S;(se==="undefined"||se==="boolean")&&(S=null);var de=!1;if(S===null)de=!0;else switch(se){case"string":case"number":de=!0;break;case"object":switch(S.$$typeof){case i:case c:de=!0}}if(de)return de=S,ce=ce(de),S=te===""?"."+ee(de,0):te,W(ce)?(P="",S!=null&&(P=S.replace(ue,"$&/")+"/"),J(ce,z,P,"",function(we){return we})):ce!=null&&(B(ce)&&(ce=A(ce,P+(!ce.key||de&&de.key===ce.key?"":(""+ce.key).replace(ue,"$&/")+"/")+S)),z.push(ce)),1;if(de=0,te=te===""?".":te+":",W(S))for(var le=0;le<S.length;le++){se=S[le];var ye=te+ee(se,le);de+=J(se,z,P,ye,ce)}else if(ye=E(S),typeof ye=="function")for(S=ye.call(S),le=0;!(se=S.next()).done;)se=se.value,ye=te+ee(se,le++),de+=J(se,z,P,ye,ce);else if(se==="object")throw z=String(S),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return de}function U(S,z,P){if(S==null)return S;var te=[],ce=0;return J(S,te,"","",function(se){return z.call(P,se,ce++)}),te}function me(S){if(S._status===-1){var z=S._result;z=z(),z.then(function(P){(S._status===0||S._status===-1)&&(S._status=1,S._result=P)},function(P){(S._status===0||S._status===-1)&&(S._status=2,S._result=P)}),S._status===-1&&(S._status=0,S._result=z)}if(S._status===1)return S._result.default;throw S._result}var V={current:null},K={transition:null},Q={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:K,ReactCurrentOwner:$};function T(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:U,forEach:function(S,z,P){U(S,function(){z.apply(this,arguments)},P)},count:function(S){var z=0;return U(S,function(){z++}),z},toArray:function(S){return U(S,function(z){return z})||[]},only:function(S){if(!B(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},Ce.Component=F,Ce.Fragment=a,Ce.Profiler=f,Ce.PureComponent=Y,Ce.StrictMode=u,Ce.Suspense=h,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Ce.act=T,Ce.cloneElement=function(S,z,P){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var te=N({},S.props),ce=S.key,se=S.ref,de=S._owner;if(z!=null){if(z.ref!==void 0&&(se=z.ref,de=$.current),z.key!==void 0&&(ce=""+z.key),S.type&&S.type.defaultProps)var le=S.type.defaultProps;for(ye in z)M.call(z,ye)&&!X.hasOwnProperty(ye)&&(te[ye]=z[ye]===void 0&&le!==void 0?le[ye]:z[ye])}var ye=arguments.length-2;if(ye===1)te.children=P;else if(1<ye){le=Array(ye);for(var we=0;we<ye;we++)le[we]=arguments[we+2];te.children=le}return{$$typeof:i,type:S.type,key:ce,ref:se,props:te,_owner:de}},Ce.createContext=function(S){return S={$$typeof:g,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:m,_context:S},S.Consumer=S},Ce.createElement=Z,Ce.createFactory=function(S){var z=Z.bind(null,S);return z.type=S,z},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(S){return{$$typeof:w,render:S}},Ce.isValidElement=B,Ce.lazy=function(S){return{$$typeof:y,_payload:{_status:-1,_result:S},_init:me}},Ce.memo=function(S,z){return{$$typeof:p,type:S,compare:z===void 0?null:z}},Ce.startTransition=function(S){var z=K.transition;K.transition={};try{S()}finally{K.transition=z}},Ce.unstable_act=T,Ce.useCallback=function(S,z){return V.current.useCallback(S,z)},Ce.useContext=function(S){return V.current.useContext(S)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(S){return V.current.useDeferredValue(S)},Ce.useEffect=function(S,z){return V.current.useEffect(S,z)},Ce.useId=function(){return V.current.useId()},Ce.useImperativeHandle=function(S,z,P){return V.current.useImperativeHandle(S,z,P)},Ce.useInsertionEffect=function(S,z){return V.current.useInsertionEffect(S,z)},Ce.useLayoutEffect=function(S,z){return V.current.useLayoutEffect(S,z)},Ce.useMemo=function(S,z){return V.current.useMemo(S,z)},Ce.useReducer=function(S,z,P){return V.current.useReducer(S,z,P)},Ce.useRef=function(S){return V.current.useRef(S)},Ce.useState=function(S){return V.current.useState(S)},Ce.useSyncExternalStore=function(S,z,P){return V.current.useSyncExternalStore(S,z,P)},Ce.useTransition=function(){return V.current.useTransition()},Ce.version="18.3.1",Ce}var du;function mo(){return du||(du=1,yl.exports=Tf()),yl.exports}var fu;function _f(){if(fu)return go;fu=1;var i=mo(),c=Symbol.for("react.element"),a=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,f=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function g(w,h,p){var y,x={},E=null,C=null;p!==void 0&&(E=""+p),h.key!==void 0&&(E=""+h.key),h.ref!==void 0&&(C=h.ref);for(y in h)u.call(h,y)&&!m.hasOwnProperty(y)&&(x[y]=h[y]);if(w&&w.defaultProps)for(y in h=w.defaultProps,h)x[y]===void 0&&(x[y]=h[y]);return{$$typeof:c,type:w,key:E,ref:C,props:x,_owner:f.current}}return go.Fragment=a,go.jsx=g,go.jsxs=g,go}var pu;function Af(){return pu||(pu=1,xl.exports=_f()),xl.exports}var o=Af(),v=mo();const Au=Tl(v);var ks={},vl={exports:{}},xt={},wl={exports:{}},bl={};var hu;function Of(){return hu||(hu=1,(function(i){function c(K,Q){var T=K.length;K.push(Q);e:for(;0<T;){var S=T-1>>>1,z=K[S];if(0<f(z,Q))K[S]=Q,K[T]=z,T=S;else break e}}function a(K){return K.length===0?null:K[0]}function u(K){if(K.length===0)return null;var Q=K[0],T=K.pop();if(T!==Q){K[0]=T;e:for(var S=0,z=K.length,P=z>>>1;S<P;){var te=2*(S+1)-1,ce=K[te],se=te+1,de=K[se];if(0>f(ce,T))se<z&&0>f(de,ce)?(K[S]=de,K[se]=T,S=se):(K[S]=ce,K[te]=T,S=te);else if(se<z&&0>f(de,T))K[S]=de,K[se]=T,S=se;else break e}}return Q}function f(K,Q){var T=K.sortIndex-Q.sortIndex;return T!==0?T:K.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;i.unstable_now=function(){return m.now()}}else{var g=Date,w=g.now();i.unstable_now=function(){return g.now()-w}}var h=[],p=[],y=1,x=null,E=3,C=!1,N=!1,D=!1,F=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(K){for(var Q=a(p);Q!==null;){if(Q.callback===null)u(p);else if(Q.startTime<=K)u(p),Q.sortIndex=Q.expirationTime,c(h,Q);else break;Q=a(p)}}function W(K){if(D=!1,H(K),!N)if(a(h)!==null)N=!0,me(M);else{var Q=a(p);Q!==null&&V(W,Q.startTime-K)}}function M(K,Q){N=!1,D&&(D=!1,j(Z),Z=-1),C=!0;var T=E;try{for(H(Q),x=a(h);x!==null&&(!(x.expirationTime>Q)||K&&!q());){var S=x.callback;if(typeof S=="function"){x.callback=null,E=x.priorityLevel;var z=S(x.expirationTime<=Q);Q=i.unstable_now(),typeof z=="function"?x.callback=z:x===a(h)&&u(h),H(Q)}else u(h);x=a(h)}if(x!==null)var P=!0;else{var te=a(p);te!==null&&V(W,te.startTime-Q),P=!1}return P}finally{x=null,E=T,C=!1}}var $=!1,X=null,Z=-1,A=5,B=-1;function q(){return!(i.unstable_now()-B<A)}function ue(){if(X!==null){var K=i.unstable_now();B=K;var Q=!0;try{Q=X(!0,K)}finally{Q?ee():($=!1,X=null)}}else $=!1}var ee;if(typeof Y=="function")ee=function(){Y(ue)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,U=J.port2;J.port1.onmessage=ue,ee=function(){U.postMessage(null)}}else ee=function(){F(ue,0)};function me(K){X=K,$||($=!0,ee())}function V(K,Q){Z=F(function(){K(i.unstable_now())},Q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_continueExecution=function(){N||C||(N=!0,me(M))},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return E},i.unstable_getFirstCallbackNode=function(){return a(h)},i.unstable_next=function(K){switch(E){case 1:case 2:case 3:var Q=3;break;default:Q=E}var T=E;E=Q;try{return K()}finally{E=T}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(K,Q){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var T=E;E=K;try{return Q()}finally{E=T}},i.unstable_scheduleCallback=function(K,Q,T){var S=i.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?S+T:S):T=S,K){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=T+z,K={id:y++,callback:Q,priorityLevel:K,startTime:T,expirationTime:z,sortIndex:-1},T>S?(K.sortIndex=T,c(p,K),a(h)===null&&K===a(p)&&(D?(j(Z),Z=-1):D=!0,V(W,T-S))):(K.sortIndex=z,c(h,K),N||C||(N=!0,me(M))),K},i.unstable_shouldYield=q,i.unstable_wrapCallback=function(K){var Q=E;return function(){var T=E;E=Q;try{return K.apply(this,arguments)}finally{E=T}}}})(bl)),bl}var gu;function Bf(){return gu||(gu=1,wl.exports=Of()),wl.exports}var mu;function $f(){if(mu)return xt;mu=1;var i=mo(),c=Bf();function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,f={};function m(e,t){g(e,t),g(e+"Capture",t)}function g(e,t){for(f[e]=t,e=0;e<t.length;e++)u.add(t[e])}var w=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},x={};function E(e){return h.call(x,e)?!0:h.call(y,e)?!1:p.test(e)?x[e]=!0:(y[e]=!0,!1)}function C(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function N(e,t,n,r){if(t===null||typeof t>"u"||C(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function D(e,t,n,r,s,l,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=d}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){F[e]=new D(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];F[t]=new D(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){F[e]=new D(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){F[e]=new D(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){F[e]=new D(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){F[e]=new D(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){F[e]=new D(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){F[e]=new D(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){F[e]=new D(e,5,!1,e.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(j,Y);F[t]=new D(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(j,Y);F[t]=new D(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(j,Y);F[t]=new D(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){F[e]=new D(e,1,!1,e.toLowerCase(),null,!1,!1)}),F.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){F[e]=new D(e,1,!1,e.toLowerCase(),null,!0,!0)});function H(e,t,n,r){var s=F.hasOwnProperty(t)?F[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(N(t,n,s,r)&&(n=null),r||s===null?E(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var W=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),$=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),q=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),K=Symbol.iterator;function Q(e){return e===null||typeof e!="object"?null:(e=K&&e[K]||e["@@iterator"],typeof e=="function"?e:null)}var T=Object.assign,S;function z(e){if(S===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);S=t&&t[1]||""}return`
`+S+e}var P=!1;function te(e,t){if(!e||P)return"";P=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(O){var r=O}Reflect.construct(e,[],t)}else{try{t.call()}catch(O){r=O}e.call(t.prototype)}else{try{throw Error()}catch(O){r=O}e()}}catch(O){if(O&&r&&typeof O.stack=="string"){for(var s=O.stack.split(`
`),l=r.stack.split(`
`),d=s.length-1,b=l.length-1;1<=d&&0<=b&&s[d]!==l[b];)b--;for(;1<=d&&0<=b;d--,b--)if(s[d]!==l[b]){if(d!==1||b!==1)do if(d--,b--,0>b||s[d]!==l[b]){var k=`
`+s[d].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=d&&0<=b);break}}}finally{P=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function ce(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=te(e.type,!1),e;case 11:return e=te(e.type.render,!1),e;case 1:return e=te(e.type,!0),e;default:return""}}function se(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case X:return"Fragment";case $:return"Portal";case A:return"Profiler";case Z:return"StrictMode";case ee:return"Suspense";case J:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case q:return(e.displayName||"Context")+".Consumer";case B:return(e._context.displayName||"Context")+".Provider";case ue:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case U:return t=e.displayName||null,t!==null?t:se(e.type)||"Memo";case me:t=e._payload,e=e._init;try{return se(e(t))}catch{}}return null}function de(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(t);case 8:return t===Z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function le(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function we(e){var t=ye(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(d){r=""+d,l.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(d){r=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Me(e){e._valueTracker||(e._valueTracker=we(e))}function _e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ye(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ge(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ke(e,t){var n=t.checked;return T({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Xe(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=le(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yt(e,t){t=t.checked,t!=null&&H(e,"checked",t,!1)}function He(e,t){yt(e,t);var n=le(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ie(e,t.type,le(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function G(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ie(e,t,n){(t!=="number"||Ge(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ee=Array.isArray;function We(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+le(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Pn(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(a(91));return T({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gt(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(a(92));if(Ee(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:le(n)}}function Lr(e,t){var n=le(t.value),r=le(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Mr(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xo(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zn(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xo(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kn,an=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Kn=Kn||document.createElement("div"),Kn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ln(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ms=["Webkit","ms","Moz","O"];Object.keys(Zt).forEach(function(e){Ms.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zt[t]=Zt[e]})});function Kt(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Zt.hasOwnProperty(e)&&Zt[e]?(""+t).trim():t+"px"}function Fr(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Kt(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var ln=T({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qn(e,t){if(t){if(ln[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(a(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(a(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(t.style!=null&&typeof t.style!="object")throw Error(a(62))}}function $t(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jn=null;function Ir(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qn=null,ct=null,St=null;function yo(e){if(e=qr(e)){if(typeof qn!="function")throw Error(a(280));var t=e.stateNode;t&&(t=$o(t),qn(e.stateNode,e.type,t))}}function er(e){ct?St?St.push(e):St=[e]:ct=e}function tr(){if(ct){var e=ct,t=St;if(St=ct=null,yo(e),t)for(e=0;e<t.length;e++)yo(t[e])}}function ot(e,t){return e(t)}function vo(){}var Mt=!1;function nr(e,t,n){if(Mt)return e(t,n);Mt=!0;try{return ot(e,t,n)}finally{Mt=!1,(ct!==null||St!==null)&&(vo(),tr())}}function Mn(e,t){var n=e.stateNode;if(n===null)return null;var r=$o(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(a(231,t,typeof n));return n}var Fn=!1;if(w)try{var In={};Object.defineProperty(In,"passive",{get:function(){Fn=!0}}),window.addEventListener("test",In,In),window.removeEventListener("test",In,In)}catch{Fn=!1}function Fs(e,t,n,r,s,l,d,b,k){var O=Array.prototype.slice.call(arguments,3);try{t.apply(n,O)}catch(oe){this.onError(oe)}}var zn=!1,cn=null,rr=!1,zr=null,Is={onError:function(e){zn=!0,cn=e}};function zs(e,t,n,r,s,l,d,b,k){zn=!1,cn=null,Fs.apply(Is,arguments)}function Rs(e,t,n,r,s,l,d,b,k){if(zs.apply(this,arguments),zn){if(zn){var O=cn;zn=!1,cn=null}else throw Error(a(198));rr||(rr=!0,zr=O)}}function Nt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function wo(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function bo(e){if(Nt(e)!==e)throw Error(a(188))}function Ts(e){var t=e.alternate;if(!t){if(t=Nt(e),t===null)throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return bo(s),e;if(l===r)return bo(s),t;l=l.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=l;else{for(var d=!1,b=s.child;b;){if(b===n){d=!0,n=s,r=l;break}if(b===r){d=!0,r=s,n=l;break}b=b.sibling}if(!d){for(b=l.child;b;){if(b===n){d=!0,n=l,r=s;break}if(b===r){d=!0,r=l,n=s;break}b=b.sibling}if(!d)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(n.tag!==3)throw Error(a(188));return n.stateNode.current===n?e:t}function ne(e){return e=Ts(e),e!==null?ve(e):null}function ve(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ve(e);if(t!==null)return t;e=e.sibling}return null}var Se=c.unstable_scheduleCallback,Pe=c.unstable_cancelCallback,Oe=c.unstable_shouldYield,Be=c.unstable_requestPaint,ke=c.unstable_now,Ut=c.unstable_getCurrentPriorityLevel,Ft=c.unstable_ImmediatePriority,_s=c.unstable_UserBlockingPriority,Rn=c.unstable_NormalPriority,Zu=c.unstable_LowPriority,Bl=c.unstable_IdlePriority,jo=null,Ht=null;function Ku(e){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(jo,e,void 0,(e.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:qu,Qu=Math.log,Ju=Math.LN2;function qu(e){return e>>>=0,e===0?32:31-(Qu(e)/Ju|0)|0}var So=64,No=4194304;function Rr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Co(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,d=n&268435455;if(d!==0){var b=d&~s;b!==0?r=Rr(b):(l&=d,l!==0&&(r=Rr(l)))}else d=n&~s,d!==0?r=Rr(d):l!==0&&(r=Rr(l));if(r===0)return 0;if(t!==0&&t!==r&&(t&s)===0&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-It(t),s=1<<n,r|=e[n],t&=~s;return r}function ed(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function td(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var d=31-It(l),b=1<<d,k=s[d];k===-1?((b&n)===0||(b&r)!==0)&&(s[d]=ed(b,t)):k<=t&&(e.expiredLanes|=b),l&=~b}}function As(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $l(){var e=So;return So<<=1,(So&4194240)===0&&(So=64),e}function Os(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Tr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-It(t),e[t]=n}function nd(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-It(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function Bs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-It(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Fe=0;function Ul(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Hl,$s,Wl,Yl,Xl,Us=!1,ko=[],un=null,dn=null,fn=null,_r=new Map,Ar=new Map,pn=[],rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vl(e,t){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":_r.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(t.pointerId)}}function Or(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=qr(t),t!==null&&$s(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function od(e,t,n,r,s){switch(t){case"focusin":return un=Or(un,e,t,n,r,s),!0;case"dragenter":return dn=Or(dn,e,t,n,r,s),!0;case"mouseover":return fn=Or(fn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return _r.set(l,Or(_r.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,Ar.set(l,Or(Ar.get(l)||null,e,t,n,r,s)),!0}return!1}function Gl(e){var t=Tn(e.target);if(t!==null){var n=Nt(t);if(n!==null){if(t=n.tag,t===13){if(t=wo(n),t!==null){e.blockedOn=t,Xl(e.priority,function(){Wl(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Eo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ws(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Jn=r,n.target.dispatchEvent(r),Jn=null}else return t=qr(n),t!==null&&$s(t),e.blockedOn=n,!1;t.shift()}return!0}function Zl(e,t,n){Eo(e)&&n.delete(t)}function sd(){Us=!1,un!==null&&Eo(un)&&(un=null),dn!==null&&Eo(dn)&&(dn=null),fn!==null&&Eo(fn)&&(fn=null),_r.forEach(Zl),Ar.forEach(Zl)}function Br(e,t){e.blockedOn===t&&(e.blockedOn=null,Us||(Us=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,sd)))}function $r(e){function t(s){return Br(s,e)}if(0<ko.length){Br(ko[0],e);for(var n=1;n<ko.length;n++){var r=ko[n];r.blockedOn===e&&(r.blockedOn=null)}}for(un!==null&&Br(un,e),dn!==null&&Br(dn,e),fn!==null&&Br(fn,e),_r.forEach(t),Ar.forEach(t),n=0;n<pn.length;n++)r=pn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<pn.length&&(n=pn[0],n.blockedOn===null);)Gl(n),n.blockedOn===null&&pn.shift()}var or=W.ReactCurrentBatchConfig,Do=!0;function ad(e,t,n,r){var s=Fe,l=or.transition;or.transition=null;try{Fe=1,Hs(e,t,n,r)}finally{Fe=s,or.transition=l}}function ld(e,t,n,r){var s=Fe,l=or.transition;or.transition=null;try{Fe=4,Hs(e,t,n,r)}finally{Fe=s,or.transition=l}}function Hs(e,t,n,r){if(Do){var s=Ws(e,t,n,r);if(s===null)la(e,t,r,Po,n),Vl(e,r);else if(od(s,e,t,n,r))r.stopPropagation();else if(Vl(e,r),t&4&&-1<rd.indexOf(e)){for(;s!==null;){var l=qr(s);if(l!==null&&Hl(l),l=Ws(e,t,n,r),l===null&&la(e,t,r,Po,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else la(e,t,r,null,n)}}var Po=null;function Ws(e,t,n,r){if(Po=null,e=Ir(r),e=Tn(e),e!==null)if(t=Nt(e),t===null)e=null;else if(n=t.tag,n===13){if(e=wo(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Po=e,null}function Kl(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ut()){case Ft:return 1;case _s:return 4;case Rn:case Zu:return 16;case Bl:return 536870912;default:return 16}default:return 16}}var hn=null,Ys=null,Lo=null;function Ql(){if(Lo)return Lo;var e,t=Ys,n=t.length,r,s="value"in hn?hn.value:hn.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var d=n-e;for(r=1;r<=d&&t[n-r]===s[l-r];r++);return Lo=s.slice(e,1<r?1-r:void 0)}function Mo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fo(){return!0}function Jl(){return!1}function vt(e){function t(n,r,s,l,d){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=d,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(n=e[b],this[b]=n?n(l):l[b]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Fo:Jl,this.isPropagationStopped=Jl,this}return T(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),t}var sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=vt(sr),Ur=T({},sr,{view:0,detail:0}),id=vt(Ur),Vs,Gs,Hr,Io=T({},Ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ks,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hr&&(Hr&&e.type==="mousemove"?(Vs=e.screenX-Hr.screenX,Gs=e.screenY-Hr.screenY):Gs=Vs=0,Hr=e),Vs)},movementY:function(e){return"movementY"in e?e.movementY:Gs}}),ql=vt(Io),cd=T({},Io,{dataTransfer:0}),ud=vt(cd),dd=T({},Ur,{relatedTarget:0}),Zs=vt(dd),fd=T({},sr,{animationName:0,elapsedTime:0,pseudoElement:0}),pd=vt(fd),hd=T({},sr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gd=vt(hd),md=T({},sr,{data:0}),ei=vt(md),xd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wd(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vd[e])?!!t[e]:!1}function Ks(){return wd}var bd=T({},Ur,{key:function(e){if(e.key){var t=xd[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Mo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ks,charCode:function(e){return e.type==="keypress"?Mo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jd=vt(bd),Sd=T({},Io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ti=vt(Sd),Nd=T({},Ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ks}),Cd=vt(Nd),kd=T({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ed=vt(kd),Dd=T({},Io,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pd=vt(Dd),Ld=[9,13,27,32],Qs=w&&"CompositionEvent"in window,Wr=null;w&&"documentMode"in document&&(Wr=document.documentMode);var Md=w&&"TextEvent"in window&&!Wr,ni=w&&(!Qs||Wr&&8<Wr&&11>=Wr),ri=" ",oi=!1;function si(e,t){switch(e){case"keyup":return Ld.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ai(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ar=!1;function Fd(e,t){switch(e){case"compositionend":return ai(t);case"keypress":return t.which!==32?null:(oi=!0,ri);case"textInput":return e=t.data,e===ri&&oi?null:e;default:return null}}function Id(e,t){if(ar)return e==="compositionend"||!Qs&&si(e,t)?(e=Ql(),Lo=Ys=hn=null,ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ni&&t.locale!=="ko"?null:t.data;default:return null}}var zd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function li(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zd[e.type]:t==="textarea"}function ii(e,t,n,r){er(r),t=Ao(t,"onChange"),0<t.length&&(n=new Xs("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yr=null,Xr=null;function Rd(e){ki(e,0)}function zo(e){var t=dr(e);if(_e(t))return e}function Td(e,t){if(e==="change")return t}var ci=!1;if(w){var Js;if(w){var qs="oninput"in document;if(!qs){var ui=document.createElement("div");ui.setAttribute("oninput","return;"),qs=typeof ui.oninput=="function"}Js=qs}else Js=!1;ci=Js&&(!document.documentMode||9<document.documentMode)}function di(){Yr&&(Yr.detachEvent("onpropertychange",fi),Xr=Yr=null)}function fi(e){if(e.propertyName==="value"&&zo(Xr)){var t=[];ii(t,Xr,e,Ir(e)),nr(Rd,t)}}function _d(e,t,n){e==="focusin"?(di(),Yr=t,Xr=n,Yr.attachEvent("onpropertychange",fi)):e==="focusout"&&di()}function Ad(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zo(Xr)}function Od(e,t){if(e==="click")return zo(t)}function Bd(e,t){if(e==="input"||e==="change")return zo(t)}function $d(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zt=typeof Object.is=="function"?Object.is:$d;function Vr(e,t){if(zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!h.call(t,s)||!zt(e[s],t[s]))return!1}return!0}function pi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hi(e,t){var n=pi(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pi(n)}}function gi(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?gi(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function mi(){for(var e=window,t=Ge();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ge(e.document)}return t}function ea(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ud(e){var t=mi(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&gi(n.ownerDocument.documentElement,n)){if(r!==null&&ea(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=hi(n,l);var d=hi(n,r);s&&d&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hd=w&&"documentMode"in document&&11>=document.documentMode,lr=null,ta=null,Gr=null,na=!1;function xi(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;na||lr==null||lr!==Ge(r)||(r=lr,"selectionStart"in r&&ea(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gr&&Vr(Gr,r)||(Gr=r,r=Ao(ta,"onSelect"),0<r.length&&(t=new Xs("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=lr)))}function Ro(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ir={animationend:Ro("Animation","AnimationEnd"),animationiteration:Ro("Animation","AnimationIteration"),animationstart:Ro("Animation","AnimationStart"),transitionend:Ro("Transition","TransitionEnd")},ra={},yi={};w&&(yi=document.createElement("div").style,"AnimationEvent"in window||(delete ir.animationend.animation,delete ir.animationiteration.animation,delete ir.animationstart.animation),"TransitionEvent"in window||delete ir.transitionend.transition);function To(e){if(ra[e])return ra[e];if(!ir[e])return e;var t=ir[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in yi)return ra[e]=t[n];return e}var vi=To("animationend"),wi=To("animationiteration"),bi=To("animationstart"),ji=To("transitionend"),Si=new Map,Ni="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gn(e,t){Si.set(e,t),m(t,[e])}for(var oa=0;oa<Ni.length;oa++){var sa=Ni[oa],Wd=sa.toLowerCase(),Yd=sa[0].toUpperCase()+sa.slice(1);gn(Wd,"on"+Yd)}gn(vi,"onAnimationEnd"),gn(wi,"onAnimationIteration"),gn(bi,"onAnimationStart"),gn("dblclick","onDoubleClick"),gn("focusin","onFocus"),gn("focusout","onBlur"),gn(ji,"onTransitionEnd"),g("onMouseEnter",["mouseout","mouseover"]),g("onMouseLeave",["mouseout","mouseover"]),g("onPointerEnter",["pointerout","pointerover"]),g("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xd=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zr));function Ci(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Rs(r,t,void 0,e),e.currentTarget=null}function ki(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var d=r.length-1;0<=d;d--){var b=r[d],k=b.instance,O=b.currentTarget;if(b=b.listener,k!==l&&s.isPropagationStopped())break e;Ci(s,b,O),l=k}else for(d=0;d<r.length;d++){if(b=r[d],k=b.instance,O=b.currentTarget,b=b.listener,k!==l&&s.isPropagationStopped())break e;Ci(s,b,O),l=k}}}if(rr)throw e=zr,rr=!1,zr=null,e}function Re(e,t){var n=t[pa];n===void 0&&(n=t[pa]=new Set);var r=e+"__bubble";n.has(r)||(Ei(t,e,2,!1),n.add(r))}function aa(e,t,n){var r=0;t&&(r|=4),Ei(n,e,r,t)}var _o="_reactListening"+Math.random().toString(36).slice(2);function Kr(e){if(!e[_o]){e[_o]=!0,u.forEach(function(n){n!=="selectionchange"&&(Xd.has(n)||aa(n,!1,e),aa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_o]||(t[_o]=!0,aa("selectionchange",!1,t))}}function Ei(e,t,n,r){switch(Kl(t)){case 1:var s=ad;break;case 4:s=ld;break;default:s=Hs}n=s.bind(null,t,n,e),s=void 0,!Fn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function la(e,t,n,r,s){var l=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var b=r.stateNode.containerInfo;if(b===s||b.nodeType===8&&b.parentNode===s)break;if(d===4)for(d=r.return;d!==null;){var k=d.tag;if((k===3||k===4)&&(k=d.stateNode.containerInfo,k===s||k.nodeType===8&&k.parentNode===s))return;d=d.return}for(;b!==null;){if(d=Tn(b),d===null)return;if(k=d.tag,k===5||k===6){r=l=d;continue e}b=b.parentNode}}r=r.return}nr(function(){var O=l,oe=Ir(n),ae=[];e:{var re=Si.get(e);if(re!==void 0){var fe=Xs,he=e;switch(e){case"keypress":if(Mo(n)===0)break e;case"keydown":case"keyup":fe=jd;break;case"focusin":he="focus",fe=Zs;break;case"focusout":he="blur",fe=Zs;break;case"beforeblur":case"afterblur":fe=Zs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=ql;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=ud;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Cd;break;case vi:case wi:case bi:fe=pd;break;case ji:fe=Ed;break;case"scroll":fe=id;break;case"wheel":fe=Pd;break;case"copy":case"cut":case"paste":fe=gd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=ti}var ge=(t&4)!==0,Ve=!ge&&e==="scroll",I=ge?re!==null?re+"Capture":null:re;ge=[];for(var L=O,R;L!==null;){R=L;var ie=R.stateNode;if(R.tag===5&&ie!==null&&(R=ie,I!==null&&(ie=Mn(L,I),ie!=null&&ge.push(Qr(L,ie,R)))),Ve)break;L=L.return}0<ge.length&&(re=new fe(re,he,null,n,oe),ae.push({event:re,listeners:ge}))}}if((t&7)===0){e:{if(re=e==="mouseover"||e==="pointerover",fe=e==="mouseout"||e==="pointerout",re&&n!==Jn&&(he=n.relatedTarget||n.fromElement)&&(Tn(he)||he[Qt]))break e;if((fe||re)&&(re=oe.window===oe?oe:(re=oe.ownerDocument)?re.defaultView||re.parentWindow:window,fe?(he=n.relatedTarget||n.toElement,fe=O,he=he?Tn(he):null,he!==null&&(Ve=Nt(he),he!==Ve||he.tag!==5&&he.tag!==6)&&(he=null)):(fe=null,he=O),fe!==he)){if(ge=ql,ie="onMouseLeave",I="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(ge=ti,ie="onPointerLeave",I="onPointerEnter",L="pointer"),Ve=fe==null?re:dr(fe),R=he==null?re:dr(he),re=new ge(ie,L+"leave",fe,n,oe),re.target=Ve,re.relatedTarget=R,ie=null,Tn(oe)===O&&(ge=new ge(I,L+"enter",he,n,oe),ge.target=R,ge.relatedTarget=Ve,ie=ge),Ve=ie,fe&&he)t:{for(ge=fe,I=he,L=0,R=ge;R;R=cr(R))L++;for(R=0,ie=I;ie;ie=cr(ie))R++;for(;0<L-R;)ge=cr(ge),L--;for(;0<R-L;)I=cr(I),R--;for(;L--;){if(ge===I||I!==null&&ge===I.alternate)break t;ge=cr(ge),I=cr(I)}ge=null}else ge=null;fe!==null&&Di(ae,re,fe,ge,!1),he!==null&&Ve!==null&&Di(ae,Ve,he,ge,!0)}}e:{if(re=O?dr(O):window,fe=re.nodeName&&re.nodeName.toLowerCase(),fe==="select"||fe==="input"&&re.type==="file")var xe=Td;else if(li(re))if(ci)xe=Bd;else{xe=Ad;var be=_d}else(fe=re.nodeName)&&fe.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(xe=Od);if(xe&&(xe=xe(e,O))){ii(ae,xe,n,oe);break e}be&&be(e,re,O),e==="focusout"&&(be=re._wrapperState)&&be.controlled&&re.type==="number"&&Ie(re,"number",re.value)}switch(be=O?dr(O):window,e){case"focusin":(li(be)||be.contentEditable==="true")&&(lr=be,ta=O,Gr=null);break;case"focusout":Gr=ta=lr=null;break;case"mousedown":na=!0;break;case"contextmenu":case"mouseup":case"dragend":na=!1,xi(ae,n,oe);break;case"selectionchange":if(Hd)break;case"keydown":case"keyup":xi(ae,n,oe)}var je;if(Qs)e:{switch(e){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else ar?si(e,n)&&(Ne="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ne="onCompositionStart");Ne&&(ni&&n.locale!=="ko"&&(ar||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&ar&&(je=Ql()):(hn=oe,Ys="value"in hn?hn.value:hn.textContent,ar=!0)),be=Ao(O,Ne),0<be.length&&(Ne=new ei(Ne,e,null,n,oe),ae.push({event:Ne,listeners:be}),je?Ne.data=je:(je=ai(n),je!==null&&(Ne.data=je)))),(je=Md?Fd(e,n):Id(e,n))&&(O=Ao(O,"onBeforeInput"),0<O.length&&(oe=new ei("onBeforeInput","beforeinput",null,n,oe),ae.push({event:oe,listeners:O}),oe.data=je))}ki(ae,t)})}function Qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ao(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Mn(e,n),l!=null&&r.unshift(Qr(e,l,s)),l=Mn(e,t),l!=null&&r.push(Qr(e,l,s))),e=e.return}return r}function cr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Di(e,t,n,r,s){for(var l=t._reactName,d=[];n!==null&&n!==r;){var b=n,k=b.alternate,O=b.stateNode;if(k!==null&&k===r)break;b.tag===5&&O!==null&&(b=O,s?(k=Mn(n,l),k!=null&&d.unshift(Qr(n,k,b))):s||(k=Mn(n,l),k!=null&&d.push(Qr(n,k,b)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var Vd=/\r\n?/g,Gd=/\u0000|\uFFFD/g;function Pi(e){return(typeof e=="string"?e:""+e).replace(Vd,`
`).replace(Gd,"")}function Oo(e,t,n){if(t=Pi(t),Pi(e)!==t&&n)throw Error(a(425))}function Bo(){}var ia=null,ca=null;function ua(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var da=typeof setTimeout=="function"?setTimeout:void 0,Zd=typeof clearTimeout=="function"?clearTimeout:void 0,Li=typeof Promise=="function"?Promise:void 0,Kd=typeof queueMicrotask=="function"?queueMicrotask:typeof Li<"u"?function(e){return Li.resolve(null).then(e).catch(Qd)}:da;function Qd(e){setTimeout(function(){throw e})}function fa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),$r(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);$r(t)}function mn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Mi(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),Wt="__reactFiber$"+ur,Jr="__reactProps$"+ur,Qt="__reactContainer$"+ur,pa="__reactEvents$"+ur,Jd="__reactListeners$"+ur,qd="__reactHandles$"+ur;function Tn(e){var t=e[Wt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qt]||n[Wt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Mi(e);e!==null;){if(n=e[Wt])return n;e=Mi(e)}return t}e=n,n=e.parentNode}return null}function qr(e){return e=e[Wt]||e[Qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(a(33))}function $o(e){return e[Jr]||null}var ha=[],fr=-1;function xn(e){return{current:e}}function Te(e){0>fr||(e.current=ha[fr],ha[fr]=null,fr--)}function ze(e,t){fr++,ha[fr]=e.current,e.current=t}var yn={},st=xn(yn),ft=xn(!1),_n=yn;function pr(e,t){var n=e.type.contextTypes;if(!n)return yn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function pt(e){return e=e.childContextTypes,e!=null}function Uo(){Te(ft),Te(st)}function Fi(e,t,n){if(st.current!==yn)throw Error(a(168));ze(st,t),ze(ft,n)}function Ii(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(a(108,de(e)||"Unknown",s));return T({},n,r)}function Ho(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yn,_n=st.current,ze(st,e),ze(ft,ft.current),!0}function zi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ii(e,t,_n),r.__reactInternalMemoizedMergedChildContext=e,Te(ft),Te(st),ze(st,e)):Te(ft),ze(ft,n)}var Jt=null,Wo=!1,ga=!1;function Ri(e){Jt===null?Jt=[e]:Jt.push(e)}function ef(e){Wo=!0,Ri(e)}function vn(){if(!ga&&Jt!==null){ga=!0;var e=0,t=Fe;try{var n=Jt;for(Fe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Jt=null,Wo=!1}catch(s){throw Jt!==null&&(Jt=Jt.slice(e+1)),Se(Ft,vn),s}finally{Fe=t,ga=!1}}return null}var hr=[],gr=0,Yo=null,Xo=0,Ct=[],kt=0,An=null,qt=1,en="";function On(e,t){hr[gr++]=Xo,hr[gr++]=Yo,Yo=e,Xo=t}function Ti(e,t,n){Ct[kt++]=qt,Ct[kt++]=en,Ct[kt++]=An,An=e;var r=qt;e=en;var s=32-It(r)-1;r&=~(1<<s),n+=1;var l=32-It(t)+s;if(30<l){var d=s-s%5;l=(r&(1<<d)-1).toString(32),r>>=d,s-=d,qt=1<<32-It(t)+s|n<<s|r,en=l+e}else qt=1<<l|n<<s|r,en=e}function ma(e){e.return!==null&&(On(e,1),Ti(e,1,0))}function xa(e){for(;e===Yo;)Yo=hr[--gr],hr[gr]=null,Xo=hr[--gr],hr[gr]=null;for(;e===An;)An=Ct[--kt],Ct[kt]=null,en=Ct[--kt],Ct[kt]=null,qt=Ct[--kt],Ct[kt]=null}var wt=null,bt=null,Ae=!1,Rt=null;function _i(e,t){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ai(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wt=e,bt=mn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wt=e,bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=An!==null?{id:qt,overflow:en}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wt=e,bt=null,!0):!1;default:return!1}}function ya(e){return(e.mode&1)!==0&&(e.flags&128)===0}function va(e){if(Ae){var t=bt;if(t){var n=t;if(!Ai(e,t)){if(ya(e))throw Error(a(418));t=mn(n.nextSibling);var r=wt;t&&Ai(e,t)?_i(r,n):(e.flags=e.flags&-4097|2,Ae=!1,wt=e)}}else{if(ya(e))throw Error(a(418));e.flags=e.flags&-4097|2,Ae=!1,wt=e}}}function Oi(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wt=e}function Vo(e){if(e!==wt)return!1;if(!Ae)return Oi(e),Ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ua(e.type,e.memoizedProps)),t&&(t=bt)){if(ya(e))throw Bi(),Error(a(418));for(;t;)_i(e,t),t=mn(t.nextSibling)}if(Oi(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){bt=mn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}bt=null}}else bt=wt?mn(e.stateNode.nextSibling):null;return!0}function Bi(){for(var e=bt;e;)e=mn(e.nextSibling)}function mr(){bt=wt=null,Ae=!1}function wa(e){Rt===null?Rt=[e]:Rt.push(e)}var tf=W.ReactCurrentBatchConfig;function eo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(d){var b=s.refs;d===null?delete b[l]:b[l]=d},t._stringRef=l,t)}if(typeof e!="string")throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Go(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $i(e){var t=e._init;return t(e._payload)}function Ui(e){function t(I,L){if(e){var R=I.deletions;R===null?(I.deletions=[L],I.flags|=16):R.push(L)}}function n(I,L){if(!e)return null;for(;L!==null;)t(I,L),L=L.sibling;return null}function r(I,L){for(I=new Map;L!==null;)L.key!==null?I.set(L.key,L):I.set(L.index,L),L=L.sibling;return I}function s(I,L){return I=En(I,L),I.index=0,I.sibling=null,I}function l(I,L,R){return I.index=R,e?(R=I.alternate,R!==null?(R=R.index,R<L?(I.flags|=2,L):R):(I.flags|=2,L)):(I.flags|=1048576,L)}function d(I){return e&&I.alternate===null&&(I.flags|=2),I}function b(I,L,R,ie){return L===null||L.tag!==6?(L=dl(R,I.mode,ie),L.return=I,L):(L=s(L,R),L.return=I,L)}function k(I,L,R,ie){var xe=R.type;return xe===X?oe(I,L,R.props.children,ie,R.key):L!==null&&(L.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===me&&$i(xe)===L.type)?(ie=s(L,R.props),ie.ref=eo(I,L,R),ie.return=I,ie):(ie=ys(R.type,R.key,R.props,null,I.mode,ie),ie.ref=eo(I,L,R),ie.return=I,ie)}function O(I,L,R,ie){return L===null||L.tag!==4||L.stateNode.containerInfo!==R.containerInfo||L.stateNode.implementation!==R.implementation?(L=fl(R,I.mode,ie),L.return=I,L):(L=s(L,R.children||[]),L.return=I,L)}function oe(I,L,R,ie,xe){return L===null||L.tag!==7?(L=Vn(R,I.mode,ie,xe),L.return=I,L):(L=s(L,R),L.return=I,L)}function ae(I,L,R){if(typeof L=="string"&&L!==""||typeof L=="number")return L=dl(""+L,I.mode,R),L.return=I,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case M:return R=ys(L.type,L.key,L.props,null,I.mode,R),R.ref=eo(I,null,L),R.return=I,R;case $:return L=fl(L,I.mode,R),L.return=I,L;case me:var ie=L._init;return ae(I,ie(L._payload),R)}if(Ee(L)||Q(L))return L=Vn(L,I.mode,R,null),L.return=I,L;Go(I,L)}return null}function re(I,L,R,ie){var xe=L!==null?L.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return xe!==null?null:b(I,L,""+R,ie);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case M:return R.key===xe?k(I,L,R,ie):null;case $:return R.key===xe?O(I,L,R,ie):null;case me:return xe=R._init,re(I,L,xe(R._payload),ie)}if(Ee(R)||Q(R))return xe!==null?null:oe(I,L,R,ie,null);Go(I,R)}return null}function fe(I,L,R,ie,xe){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return I=I.get(R)||null,b(L,I,""+ie,xe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case M:return I=I.get(ie.key===null?R:ie.key)||null,k(L,I,ie,xe);case $:return I=I.get(ie.key===null?R:ie.key)||null,O(L,I,ie,xe);case me:var be=ie._init;return fe(I,L,R,be(ie._payload),xe)}if(Ee(ie)||Q(ie))return I=I.get(R)||null,oe(L,I,ie,xe,null);Go(L,ie)}return null}function he(I,L,R,ie){for(var xe=null,be=null,je=L,Ne=L=0,tt=null;je!==null&&Ne<R.length;Ne++){je.index>Ne?(tt=je,je=null):tt=je.sibling;var Le=re(I,je,R[Ne],ie);if(Le===null){je===null&&(je=tt);break}e&&je&&Le.alternate===null&&t(I,je),L=l(Le,L,Ne),be===null?xe=Le:be.sibling=Le,be=Le,je=tt}if(Ne===R.length)return n(I,je),Ae&&On(I,Ne),xe;if(je===null){for(;Ne<R.length;Ne++)je=ae(I,R[Ne],ie),je!==null&&(L=l(je,L,Ne),be===null?xe=je:be.sibling=je,be=je);return Ae&&On(I,Ne),xe}for(je=r(I,je);Ne<R.length;Ne++)tt=fe(je,I,Ne,R[Ne],ie),tt!==null&&(e&&tt.alternate!==null&&je.delete(tt.key===null?Ne:tt.key),L=l(tt,L,Ne),be===null?xe=tt:be.sibling=tt,be=tt);return e&&je.forEach(function(Dn){return t(I,Dn)}),Ae&&On(I,Ne),xe}function ge(I,L,R,ie){var xe=Q(R);if(typeof xe!="function")throw Error(a(150));if(R=xe.call(R),R==null)throw Error(a(151));for(var be=xe=null,je=L,Ne=L=0,tt=null,Le=R.next();je!==null&&!Le.done;Ne++,Le=R.next()){je.index>Ne?(tt=je,je=null):tt=je.sibling;var Dn=re(I,je,Le.value,ie);if(Dn===null){je===null&&(je=tt);break}e&&je&&Dn.alternate===null&&t(I,je),L=l(Dn,L,Ne),be===null?xe=Dn:be.sibling=Dn,be=Dn,je=tt}if(Le.done)return n(I,je),Ae&&On(I,Ne),xe;if(je===null){for(;!Le.done;Ne++,Le=R.next())Le=ae(I,Le.value,ie),Le!==null&&(L=l(Le,L,Ne),be===null?xe=Le:be.sibling=Le,be=Le);return Ae&&On(I,Ne),xe}for(je=r(I,je);!Le.done;Ne++,Le=R.next())Le=fe(je,I,Ne,Le.value,ie),Le!==null&&(e&&Le.alternate!==null&&je.delete(Le.key===null?Ne:Le.key),L=l(Le,L,Ne),be===null?xe=Le:be.sibling=Le,be=Le);return e&&je.forEach(function(Rf){return t(I,Rf)}),Ae&&On(I,Ne),xe}function Ve(I,L,R,ie){if(typeof R=="object"&&R!==null&&R.type===X&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case M:e:{for(var xe=R.key,be=L;be!==null;){if(be.key===xe){if(xe=R.type,xe===X){if(be.tag===7){n(I,be.sibling),L=s(be,R.props.children),L.return=I,I=L;break e}}else if(be.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===me&&$i(xe)===be.type){n(I,be.sibling),L=s(be,R.props),L.ref=eo(I,be,R),L.return=I,I=L;break e}n(I,be);break}else t(I,be);be=be.sibling}R.type===X?(L=Vn(R.props.children,I.mode,ie,R.key),L.return=I,I=L):(ie=ys(R.type,R.key,R.props,null,I.mode,ie),ie.ref=eo(I,L,R),ie.return=I,I=ie)}return d(I);case $:e:{for(be=R.key;L!==null;){if(L.key===be)if(L.tag===4&&L.stateNode.containerInfo===R.containerInfo&&L.stateNode.implementation===R.implementation){n(I,L.sibling),L=s(L,R.children||[]),L.return=I,I=L;break e}else{n(I,L);break}else t(I,L);L=L.sibling}L=fl(R,I.mode,ie),L.return=I,I=L}return d(I);case me:return be=R._init,Ve(I,L,be(R._payload),ie)}if(Ee(R))return he(I,L,R,ie);if(Q(R))return ge(I,L,R,ie);Go(I,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,L!==null&&L.tag===6?(n(I,L.sibling),L=s(L,R),L.return=I,I=L):(n(I,L),L=dl(R,I.mode,ie),L.return=I,I=L),d(I)):n(I,L)}return Ve}var xr=Ui(!0),Hi=Ui(!1),Zo=xn(null),Ko=null,yr=null,ba=null;function ja(){ba=yr=Ko=null}function Sa(e){var t=Zo.current;Te(Zo),e._currentValue=t}function Na(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function vr(e,t){Ko=e,ba=yr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ht=!0),e.firstContext=null)}function Et(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},yr===null){if(Ko===null)throw Error(a(308));yr=e,Ko.dependencies={lanes:0,firstContext:e}}else yr=yr.next=e;return t}var Bn=null;function Ca(e){Bn===null?Bn=[e]:Bn.push(e)}function Wi(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Ca(t)):(n.next=s.next,s.next=n),t.interleaved=n,tn(e,r)}function tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var wn=!1;function ka(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(De&2)!==0){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,tn(e,n)}return s=r.interleaved,s===null?(t.next=t,Ca(r)):(t.next=s.next,s.next=t),r.interleaved=t,tn(e,n)}function Qo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bs(e,n)}}function Xi(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=d:l=l.next=d,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Jo(e,t,n,r){var s=e.updateQueue;wn=!1;var l=s.firstBaseUpdate,d=s.lastBaseUpdate,b=s.shared.pending;if(b!==null){s.shared.pending=null;var k=b,O=k.next;k.next=null,d===null?l=O:d.next=O,d=k;var oe=e.alternate;oe!==null&&(oe=oe.updateQueue,b=oe.lastBaseUpdate,b!==d&&(b===null?oe.firstBaseUpdate=O:b.next=O,oe.lastBaseUpdate=k))}if(l!==null){var ae=s.baseState;d=0,oe=O=k=null,b=l;do{var re=b.lane,fe=b.eventTime;if((r&re)===re){oe!==null&&(oe=oe.next={eventTime:fe,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var he=e,ge=b;switch(re=t,fe=n,ge.tag){case 1:if(he=ge.payload,typeof he=="function"){ae=he.call(fe,ae,re);break e}ae=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=ge.payload,re=typeof he=="function"?he.call(fe,ae,re):he,re==null)break e;ae=T({},ae,re);break e;case 2:wn=!0}}b.callback!==null&&b.lane!==0&&(e.flags|=64,re=s.effects,re===null?s.effects=[b]:re.push(b))}else fe={eventTime:fe,lane:re,tag:b.tag,payload:b.payload,callback:b.callback,next:null},oe===null?(O=oe=fe,k=ae):oe=oe.next=fe,d|=re;if(b=b.next,b===null){if(b=s.shared.pending,b===null)break;re=b,b=re.next,re.next=null,s.lastBaseUpdate=re,s.shared.pending=null}}while(!0);if(oe===null&&(k=ae),s.baseState=k,s.firstBaseUpdate=O,s.lastBaseUpdate=oe,t=s.shared.interleaved,t!==null){s=t;do d|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);Hn|=d,e.lanes=d,e.memoizedState=ae}}function Vi(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(a(191,s));s.call(r)}}}var to={},Yt=xn(to),no=xn(to),ro=xn(to);function $n(e){if(e===to)throw Error(a(174));return e}function Ea(e,t){switch(ze(ro,t),ze(no,e),ze(Yt,to),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zn(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zn(t,e)}Te(Yt),ze(Yt,t)}function wr(){Te(Yt),Te(no),Te(ro)}function Gi(e){$n(ro.current);var t=$n(Yt.current),n=Zn(t,e.type);t!==n&&(ze(no,e),ze(Yt,n))}function Da(e){no.current===e&&(Te(Yt),Te(no))}var $e=xn(0);function qo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pa=[];function La(){for(var e=0;e<Pa.length;e++)Pa[e]._workInProgressVersionPrimary=null;Pa.length=0}var es=W.ReactCurrentDispatcher,Ma=W.ReactCurrentBatchConfig,Un=0,Ue=null,Qe=null,qe=null,ts=!1,oo=!1,so=0,nf=0;function at(){throw Error(a(321))}function Fa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zt(e[n],t[n]))return!1;return!0}function Ia(e,t,n,r,s,l){if(Un=l,Ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,es.current=e===null||e.memoizedState===null?af:lf,e=n(r,s),oo){l=0;do{if(oo=!1,so=0,25<=l)throw Error(a(301));l+=1,qe=Qe=null,t.updateQueue=null,es.current=cf,e=n(r,s)}while(oo)}if(es.current=os,t=Qe!==null&&Qe.next!==null,Un=0,qe=Qe=Ue=null,ts=!1,t)throw Error(a(300));return e}function za(){var e=so!==0;return so=0,e}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Ue.memoizedState=qe=e:qe=qe.next=e,qe}function Dt(){if(Qe===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=qe===null?Ue.memoizedState:qe.next;if(t!==null)qe=t,Qe=e;else{if(e===null)throw Error(a(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},qe===null?Ue.memoizedState=qe=e:qe=qe.next=e}return qe}function ao(e,t){return typeof t=="function"?t(e):t}function Ra(e){var t=Dt(),n=t.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=e;var r=Qe,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var d=s.next;s.next=l.next,l.next=d}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var b=d=null,k=null,O=l;do{var oe=O.lane;if((Un&oe)===oe)k!==null&&(k=k.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),r=O.hasEagerState?O.eagerState:e(r,O.action);else{var ae={lane:oe,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};k===null?(b=k=ae,d=r):k=k.next=ae,Ue.lanes|=oe,Hn|=oe}O=O.next}while(O!==null&&O!==l);k===null?d=r:k.next=b,zt(r,t.memoizedState)||(ht=!0),t.memoizedState=r,t.baseState=d,t.baseQueue=k,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Ue.lanes|=l,Hn|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ta(e){var t=Dt(),n=t.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var d=s=s.next;do l=e(l,d.action),d=d.next;while(d!==s);zt(l,t.memoizedState)||(ht=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Zi(){}function Ki(e,t){var n=Ue,r=Dt(),s=t(),l=!zt(r.memoizedState,s);if(l&&(r.memoizedState=s,ht=!0),r=r.queue,_a(qi.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,lo(9,Ji.bind(null,n,r,s,t),void 0,null),et===null)throw Error(a(349));(Un&30)!==0||Qi(n,t,s)}return s}function Qi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ji(e,t,n,r){t.value=n,t.getSnapshot=r,ec(t)&&tc(e)}function qi(e,t,n){return n(function(){ec(t)&&tc(e)})}function ec(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zt(e,n)}catch{return!0}}function tc(e){var t=tn(e,1);t!==null&&Ot(t,e,1,-1)}function nc(e){var t=Xt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:e},t.queue=e,e=e.dispatch=sf.bind(null,Ue,e),[t.memoizedState,e]}function lo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function rc(){return Dt().memoizedState}function ns(e,t,n,r){var s=Xt();Ue.flags|=e,s.memoizedState=lo(1|t,n,void 0,r===void 0?null:r)}function rs(e,t,n,r){var s=Dt();r=r===void 0?null:r;var l=void 0;if(Qe!==null){var d=Qe.memoizedState;if(l=d.destroy,r!==null&&Fa(r,d.deps)){s.memoizedState=lo(t,n,l,r);return}}Ue.flags|=e,s.memoizedState=lo(1|t,n,l,r)}function oc(e,t){return ns(8390656,8,e,t)}function _a(e,t){return rs(2048,8,e,t)}function sc(e,t){return rs(4,2,e,t)}function ac(e,t){return rs(4,4,e,t)}function lc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ic(e,t,n){return n=n!=null?n.concat([e]):null,rs(4,4,lc.bind(null,t,e),n)}function Aa(){}function cc(e,t){var n=Dt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Fa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function uc(e,t){var n=Dt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Fa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dc(e,t,n){return(Un&21)===0?(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=n):(zt(n,t)||(n=$l(),Ue.lanes|=n,Hn|=n,e.baseState=!0),t)}function rf(e,t){var n=Fe;Fe=n!==0&&4>n?n:4,e(!0);var r=Ma.transition;Ma.transition={};try{e(!1),t()}finally{Fe=n,Ma.transition=r}}function fc(){return Dt().memoizedState}function of(e,t,n){var r=Cn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pc(e))hc(t,n);else if(n=Wi(e,t,n,r),n!==null){var s=dt();Ot(n,e,r,s),gc(n,t,r)}}function sf(e,t,n){var r=Cn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pc(e))hc(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var d=t.lastRenderedState,b=l(d,n);if(s.hasEagerState=!0,s.eagerState=b,zt(b,d)){var k=t.interleaved;k===null?(s.next=s,Ca(t)):(s.next=k.next,k.next=s),t.interleaved=s;return}}catch{}n=Wi(e,t,s,r),n!==null&&(s=dt(),Ot(n,e,r,s),gc(n,t,r))}}function pc(e){var t=e.alternate;return e===Ue||t!==null&&t===Ue}function hc(e,t){oo=ts=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gc(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bs(e,n)}}var os={readContext:Et,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},af={readContext:Et,useCallback:function(e,t){return Xt().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:oc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ns(4194308,4,lc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ns(4194308,4,e,t)},useInsertionEffect:function(e,t){return ns(4,2,e,t)},useMemo:function(e,t){var n=Xt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=of.bind(null,Ue,e),[r.memoizedState,e]},useRef:function(e){var t=Xt();return e={current:e},t.memoizedState=e},useState:nc,useDebugValue:Aa,useDeferredValue:function(e){return Xt().memoizedState=e},useTransition:function(){var e=nc(!1),t=e[0];return e=rf.bind(null,e[1]),Xt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ue,s=Xt();if(Ae){if(n===void 0)throw Error(a(407));n=n()}else{if(n=t(),et===null)throw Error(a(349));(Un&30)!==0||Qi(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,oc(qi.bind(null,r,l,e),[e]),r.flags|=2048,lo(9,Ji.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Xt(),t=et.identifierPrefix;if(Ae){var n=en,r=qt;n=(r&~(1<<32-It(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=so++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=nf++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lf={readContext:Et,useCallback:cc,useContext:Et,useEffect:_a,useImperativeHandle:ic,useInsertionEffect:sc,useLayoutEffect:ac,useMemo:uc,useReducer:Ra,useRef:rc,useState:function(){return Ra(ao)},useDebugValue:Aa,useDeferredValue:function(e){var t=Dt();return dc(t,Qe.memoizedState,e)},useTransition:function(){var e=Ra(ao)[0],t=Dt().memoizedState;return[e,t]},useMutableSource:Zi,useSyncExternalStore:Ki,useId:fc,unstable_isNewReconciler:!1},cf={readContext:Et,useCallback:cc,useContext:Et,useEffect:_a,useImperativeHandle:ic,useInsertionEffect:sc,useLayoutEffect:ac,useMemo:uc,useReducer:Ta,useRef:rc,useState:function(){return Ta(ao)},useDebugValue:Aa,useDeferredValue:function(e){var t=Dt();return Qe===null?t.memoizedState=e:dc(t,Qe.memoizedState,e)},useTransition:function(){var e=Ta(ao)[0],t=Dt().memoizedState;return[e,t]},useMutableSource:Zi,useSyncExternalStore:Ki,useId:fc,unstable_isNewReconciler:!1};function Tt(e,t){if(e&&e.defaultProps){t=T({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Oa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:T({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ss={isMounted:function(e){return(e=e._reactInternals)?Nt(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dt(),s=Cn(e),l=nn(r,s);l.payload=t,n!=null&&(l.callback=n),t=bn(e,l,s),t!==null&&(Ot(t,e,s,r),Qo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dt(),s=Cn(e),l=nn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=bn(e,l,s),t!==null&&(Ot(t,e,s,r),Qo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dt(),r=Cn(e),s=nn(n,r);s.tag=2,t!=null&&(s.callback=t),t=bn(e,s,r),t!==null&&(Ot(t,e,r,n),Qo(t,e,r))}};function mc(e,t,n,r,s,l,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,d):t.prototype&&t.prototype.isPureReactComponent?!Vr(n,r)||!Vr(s,l):!0}function xc(e,t,n){var r=!1,s=yn,l=t.contextType;return typeof l=="object"&&l!==null?l=Et(l):(s=pt(t)?_n:st.current,r=t.contextTypes,l=(r=r!=null)?pr(e,s):yn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ss,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function yc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ss.enqueueReplaceState(t,t.state,null)}function Ba(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ka(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Et(l):(l=pt(t)?_n:st.current,s.context=pr(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Oa(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ss.enqueueReplaceState(s,s.state,null),Jo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function br(e,t){try{var n="",r=t;do n+=ce(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function $a(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ua(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var uf=typeof WeakMap=="function"?WeakMap:Map;function vc(e,t,n){n=nn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){fs||(fs=!0,rl=r),Ua(e,t)},n}function wc(e,t,n){n=nn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ua(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Ua(e,t),typeof r!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),n}function bc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new uf;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Nf.bind(null,e,t,n),t.then(e,e))}function jc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sc(e,t,n,r,s){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=nn(-1,1),t.tag=2,bn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var df=W.ReactCurrentOwner,ht=!1;function ut(e,t,n,r){t.child=e===null?Hi(t,null,n,r):xr(t,e.child,n,r)}function Nc(e,t,n,r,s){n=n.render;var l=t.ref;return vr(t,s),r=Ia(e,t,n,r,l,s),n=za(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,rn(e,t,s)):(Ae&&n&&ma(t),t.flags|=1,ut(e,t,r,s),t.child)}function Cc(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!ul(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,kc(e,t,l,r,s)):(e=ys(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,(e.lanes&s)===0){var d=l.memoizedProps;if(n=n.compare,n=n!==null?n:Vr,n(d,r)&&e.ref===t.ref)return rn(e,t,s)}return t.flags|=1,e=En(l,r),e.ref=t.ref,e.return=t,t.child=e}function kc(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(Vr(l,r)&&e.ref===t.ref)if(ht=!1,t.pendingProps=r=l,(e.lanes&s)!==0)(e.flags&131072)!==0&&(ht=!0);else return t.lanes=e.lanes,rn(e,t,s)}return Ha(e,t,n,r,s)}function Ec(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Sr,jt),jt|=n;else{if((n&1073741824)===0)return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(Sr,jt),jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,ze(Sr,jt),jt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,ze(Sr,jt),jt|=r;return ut(e,t,s,n),t.child}function Dc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ha(e,t,n,r,s){var l=pt(n)?_n:st.current;return l=pr(t,l),vr(t,s),n=Ia(e,t,n,r,l,s),r=za(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,rn(e,t,s)):(Ae&&r&&ma(t),t.flags|=1,ut(e,t,n,s),t.child)}function Pc(e,t,n,r,s){if(pt(n)){var l=!0;Ho(t)}else l=!1;if(vr(t,s),t.stateNode===null)ls(e,t),xc(t,n,r),Ba(t,n,r,s),r=!0;else if(e===null){var d=t.stateNode,b=t.memoizedProps;d.props=b;var k=d.context,O=n.contextType;typeof O=="object"&&O!==null?O=Et(O):(O=pt(n)?_n:st.current,O=pr(t,O));var oe=n.getDerivedStateFromProps,ae=typeof oe=="function"||typeof d.getSnapshotBeforeUpdate=="function";ae||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b!==r||k!==O)&&yc(t,d,r,O),wn=!1;var re=t.memoizedState;d.state=re,Jo(t,r,d,s),k=t.memoizedState,b!==r||re!==k||ft.current||wn?(typeof oe=="function"&&(Oa(t,n,oe,r),k=t.memoizedState),(b=wn||mc(t,n,b,r,re,k,O))?(ae||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=k),d.props=r,d.state=k,d.context=O,r=b):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{d=t.stateNode,Yi(e,t),b=t.memoizedProps,O=t.type===t.elementType?b:Tt(t.type,b),d.props=O,ae=t.pendingProps,re=d.context,k=n.contextType,typeof k=="object"&&k!==null?k=Et(k):(k=pt(n)?_n:st.current,k=pr(t,k));var fe=n.getDerivedStateFromProps;(oe=typeof fe=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b!==ae||re!==k)&&yc(t,d,r,k),wn=!1,re=t.memoizedState,d.state=re,Jo(t,r,d,s);var he=t.memoizedState;b!==ae||re!==he||ft.current||wn?(typeof fe=="function"&&(Oa(t,n,fe,r),he=t.memoizedState),(O=wn||mc(t,n,O,r,re,he,k)||!1)?(oe||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,he,k),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,he,k)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||b===e.memoizedProps&&re===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&re===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=he),d.props=r,d.state=he,d.context=k,r=O):(typeof d.componentDidUpdate!="function"||b===e.memoizedProps&&re===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&re===e.memoizedState||(t.flags|=1024),r=!1)}return Wa(e,t,n,r,l,s)}function Wa(e,t,n,r,s,l){Dc(e,t);var d=(t.flags&128)!==0;if(!r&&!d)return s&&zi(t,n,!1),rn(e,t,l);r=t.stateNode,df.current=t;var b=d&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&d?(t.child=xr(t,e.child,null,l),t.child=xr(t,null,b,l)):ut(e,t,b,l),t.memoizedState=r.state,s&&zi(t,n,!0),t.child}function Lc(e){var t=e.stateNode;t.pendingContext?Fi(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fi(e,t.context,!1),Ea(e,t.containerInfo)}function Mc(e,t,n,r,s){return mr(),wa(s),t.flags|=256,ut(e,t,n,r),t.child}var Ya={dehydrated:null,treeContext:null,retryLane:0};function Xa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fc(e,t,n){var r=t.pendingProps,s=$e.current,l=!1,d=(t.flags&128)!==0,b;if((b=d)||(b=e!==null&&e.memoizedState===null?!1:(s&2)!==0),b?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ze($e,s&1),e===null)return va(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(d=r.children,e=r.fallback,l?(r=t.mode,l=t.child,d={mode:"hidden",children:d},(r&1)===0&&l!==null?(l.childLanes=0,l.pendingProps=d):l=vs(d,r,0,null),e=Vn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Xa(n),t.memoizedState=Ya,e):Va(t,d));if(s=e.memoizedState,s!==null&&(b=s.dehydrated,b!==null))return ff(e,t,d,r,b,s,n);if(l){l=r.fallback,d=t.mode,s=e.child,b=s.sibling;var k={mode:"hidden",children:r.children};return(d&1)===0&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=k,t.deletions=null):(r=En(s,k),r.subtreeFlags=s.subtreeFlags&14680064),b!==null?l=En(b,l):(l=Vn(l,d,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,d=e.child.memoizedState,d=d===null?Xa(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},l.memoizedState=d,l.childLanes=e.childLanes&~n,t.memoizedState=Ya,r}return l=e.child,e=l.sibling,r=En(l,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Va(e,t){return t=vs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function as(e,t,n,r){return r!==null&&wa(r),xr(t,e.child,null,n),e=Va(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ff(e,t,n,r,s,l,d){if(n)return t.flags&256?(t.flags&=-257,r=$a(Error(a(422))),as(e,t,d,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=vs({mode:"visible",children:r.children},s,0,null),l=Vn(l,s,d,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,(t.mode&1)!==0&&xr(t,e.child,null,d),t.child.memoizedState=Xa(d),t.memoizedState=Ya,l);if((t.mode&1)===0)return as(e,t,d,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var b=r.dgst;return r=b,l=Error(a(419)),r=$a(l,r,void 0),as(e,t,d,r)}if(b=(d&e.childLanes)!==0,ht||b){if(r=et,r!==null){switch(d&-d){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(r.suspendedLanes|d))!==0?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,tn(e,s),Ot(r,e,s,-1))}return cl(),r=$a(Error(a(421))),as(e,t,d,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Cf.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,bt=mn(s.nextSibling),wt=t,Ae=!0,Rt=null,e!==null&&(Ct[kt++]=qt,Ct[kt++]=en,Ct[kt++]=An,qt=e.id,en=e.overflow,An=t),t=Va(t,r.children),t.flags|=4096,t)}function Ic(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Na(e.return,t,n)}function Ga(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function zc(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(ut(e,t,r.children,n),r=$e.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ic(e,n,t);else if(e.tag===19)Ic(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ze($e,r),(t.mode&1)===0)t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&qo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ga(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&qo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ga(t,!0,n,null,l);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ls(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Hn|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,n=En(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=En(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function pf(e,t,n){switch(t.tag){case 3:Lc(t),mr();break;case 5:Gi(t);break;case 1:pt(t.type)&&Ho(t);break;case 4:Ea(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ze(Zo,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ze($e,$e.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Fc(e,t,n):(ze($e,$e.current&1),e=rn(e,t,n),e!==null?e.sibling:null);ze($e,$e.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return zc(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze($e,$e.current),r)break;return null;case 22:case 23:return t.lanes=0,Ec(e,t,n)}return rn(e,t,n)}var Rc,Za,Tc,_c;Rc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Za=function(){},Tc=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,$n(Yt.current);var l=null;switch(n){case"input":s=Ke(e,s),r=Ke(e,r),l=[];break;case"select":s=T({},s,{value:void 0}),r=T({},r,{value:void 0}),l=[];break;case"textarea":s=Pn(e,s),r=Pn(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Bo)}Qn(n,r);var d;n=null;for(O in s)if(!r.hasOwnProperty(O)&&s.hasOwnProperty(O)&&s[O]!=null)if(O==="style"){var b=s[O];for(d in b)b.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(f.hasOwnProperty(O)?l||(l=[]):(l=l||[]).push(O,null));for(O in r){var k=r[O];if(b=s?.[O],r.hasOwnProperty(O)&&k!==b&&(k!=null||b!=null))if(O==="style")if(b){for(d in b)!b.hasOwnProperty(d)||k&&k.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in k)k.hasOwnProperty(d)&&b[d]!==k[d]&&(n||(n={}),n[d]=k[d])}else n||(l||(l=[]),l.push(O,n)),n=k;else O==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,b=b?b.__html:void 0,k!=null&&b!==k&&(l=l||[]).push(O,k)):O==="children"?typeof k!="string"&&typeof k!="number"||(l=l||[]).push(O,""+k):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(f.hasOwnProperty(O)?(k!=null&&O==="onScroll"&&Re("scroll",e),l||b===k||(l=[])):(l=l||[]).push(O,k))}n&&(l=l||[]).push("style",n);var O=l;(t.updateQueue=O)&&(t.flags|=4)}},_c=function(e,t,n,r){n!==r&&(t.flags|=4)};function io(e,t){if(!Ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function hf(e,t,n){var r=t.pendingProps;switch(xa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(t),null;case 1:return pt(t.type)&&Uo(),lt(t),null;case 3:return r=t.stateNode,wr(),Te(ft),Te(st),La(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Rt!==null&&(al(Rt),Rt=null))),Za(e,t),lt(t),null;case 5:Da(t);var s=$n(ro.current);if(n=t.type,e!==null&&t.stateNode!=null)Tc(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(a(166));return lt(t),null}if(e=$n(Yt.current),Vo(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Wt]=t,r[Jr]=l,e=(t.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Zr.length;s++)Re(Zr[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Xe(r,l),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Re("invalid",r);break;case"textarea":Gt(r,l),Re("invalid",r)}Qn(n,l),s=null;for(var d in l)if(l.hasOwnProperty(d)){var b=l[d];d==="children"?typeof b=="string"?r.textContent!==b&&(l.suppressHydrationWarning!==!0&&Oo(r.textContent,b,e),s=["children",b]):typeof b=="number"&&r.textContent!==""+b&&(l.suppressHydrationWarning!==!0&&Oo(r.textContent,b,e),s=["children",""+b]):f.hasOwnProperty(d)&&b!=null&&d==="onScroll"&&Re("scroll",r)}switch(n){case"input":Me(r),G(r,l,!0);break;case"textarea":Me(r),Mr(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Bo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{d=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xo(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=d.createElement(n,{is:r.is}):(e=d.createElement(n),n==="select"&&(d=e,r.multiple?d.multiple=!0:r.size&&(d.size=r.size))):e=d.createElementNS(e,n),e[Wt]=t,e[Jr]=r,Rc(e,t,!1,!1),t.stateNode=e;e:{switch(d=$t(n,r),n){case"dialog":Re("cancel",e),Re("close",e),s=r;break;case"iframe":case"object":case"embed":Re("load",e),s=r;break;case"video":case"audio":for(s=0;s<Zr.length;s++)Re(Zr[s],e);s=r;break;case"source":Re("error",e),s=r;break;case"img":case"image":case"link":Re("error",e),Re("load",e),s=r;break;case"details":Re("toggle",e),s=r;break;case"input":Xe(e,r),s=Ke(e,r),Re("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=T({},r,{value:void 0}),Re("invalid",e);break;case"textarea":Gt(e,r),s=Pn(e,r),Re("invalid",e);break;default:s=r}Qn(n,s),b=s;for(l in b)if(b.hasOwnProperty(l)){var k=b[l];l==="style"?Fr(e,k):l==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&an(e,k)):l==="children"?typeof k=="string"?(n!=="textarea"||k!=="")&&Ln(e,k):typeof k=="number"&&Ln(e,""+k):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(f.hasOwnProperty(l)?k!=null&&l==="onScroll"&&Re("scroll",e):k!=null&&H(e,l,k,d))}switch(n){case"input":Me(e),G(e,r,!1);break;case"textarea":Me(e),Mr(e);break;case"option":r.value!=null&&e.setAttribute("value",""+le(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?We(e,!!r.multiple,l,!1):r.defaultValue!=null&&We(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Bo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lt(t),null;case 6:if(e&&t.stateNode!=null)_c(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(a(166));if(n=$n(ro.current),$n(Yt.current),Vo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Wt]=t,(l=r.nodeValue!==n)&&(e=wt,e!==null))switch(e.tag){case 3:Oo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Oo(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wt]=t,t.stateNode=r}return lt(t),null;case 13:if(Te($e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ae&&bt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Bi(),mr(),t.flags|=98560,l=!1;else if(l=Vo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(a(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));l[Wt]=t}else mr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;lt(t),l=!1}else Rt!==null&&(al(Rt),Rt=null),l=!0;if(!l)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||($e.current&1)!==0?Je===0&&(Je=3):cl())),t.updateQueue!==null&&(t.flags|=4),lt(t),null);case 4:return wr(),Za(e,t),e===null&&Kr(t.stateNode.containerInfo),lt(t),null;case 10:return Sa(t.type._context),lt(t),null;case 17:return pt(t.type)&&Uo(),lt(t),null;case 19:if(Te($e),l=t.memoizedState,l===null)return lt(t),null;if(r=(t.flags&128)!==0,d=l.rendering,d===null)if(r)io(l,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=qo(e),d!==null){for(t.flags|=128,io(l,!1),r=d.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,d=l.alternate,d===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,e=d.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ze($e,$e.current&1|2),t.child}e=e.sibling}l.tail!==null&&ke()>Nr&&(t.flags|=128,r=!0,io(l,!1),t.lanes=4194304)}else{if(!r)if(e=qo(d),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),io(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ae)return lt(t),null}else 2*ke()-l.renderingStartTime>Nr&&n!==1073741824&&(t.flags|=128,r=!0,io(l,!1),t.lanes=4194304);l.isBackwards?(d.sibling=t.child,t.child=d):(n=l.last,n!==null?n.sibling=d:t.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ke(),t.sibling=null,n=$e.current,ze($e,r?n&1|2:n&1),t):(lt(t),null);case 22:case 23:return il(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(jt&1073741824)!==0&&(lt(t),t.subtreeFlags&6&&(t.flags|=8192)):lt(t),null;case 24:return null;case 25:return null}throw Error(a(156,t.tag))}function gf(e,t){switch(xa(t),t.tag){case 1:return pt(t.type)&&Uo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wr(),Te(ft),Te(st),La(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Da(t),null;case 13:if(Te($e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));mr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Te($e),null;case 4:return wr(),null;case 10:return Sa(t.type._context),null;case 22:case 23:return il(),null;case 24:return null;default:return null}}var is=!1,it=!1,mf=typeof WeakSet=="function"?WeakSet:Set,pe=null;function jr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(e,t,r)}else n.current=null}function Ka(e,t,n){try{n()}catch(r){Ye(e,t,r)}}var Ac=!1;function xf(e,t){if(ia=Do,e=mi(),ea(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var d=0,b=-1,k=-1,O=0,oe=0,ae=e,re=null;t:for(;;){for(var fe;ae!==n||s!==0&&ae.nodeType!==3||(b=d+s),ae!==l||r!==0&&ae.nodeType!==3||(k=d+r),ae.nodeType===3&&(d+=ae.nodeValue.length),(fe=ae.firstChild)!==null;)re=ae,ae=fe;for(;;){if(ae===e)break t;if(re===n&&++O===s&&(b=d),re===l&&++oe===r&&(k=d),(fe=ae.nextSibling)!==null)break;ae=re,re=ae.parentNode}ae=fe}n=b===-1||k===-1?null:{start:b,end:k}}else n=null}n=n||{start:0,end:0}}else n=null;for(ca={focusedElem:e,selectionRange:n},Do=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){t=pe;try{var he=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var ge=he.memoizedProps,Ve=he.memoizedState,I=t.stateNode,L=I.getSnapshotBeforeUpdate(t.elementType===t.type?ge:Tt(t.type,ge),Ve);I.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(ie){Ye(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}return he=Ac,Ac=!1,he}function co(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Ka(t,n,l)}s=s.next}while(s!==r)}}function cs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Qa(e){var t=e.ref;if(t!==null){var n=e.stateNode;e.tag,e=n,typeof t=="function"?t(e):t.current=e}}function Oc(e){var t=e.alternate;t!==null&&(e.alternate=null,Oc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wt],delete t[Jr],delete t[pa],delete t[Jd],delete t[qd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bc(e){return e.tag===5||e.tag===3||e.tag===4}function $c(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ja(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bo));else if(r!==4&&(e=e.child,e!==null))for(Ja(e,t,n),e=e.sibling;e!==null;)Ja(e,t,n),e=e.sibling}function qa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(qa(e,t,n),e=e.sibling;e!==null;)qa(e,t,n),e=e.sibling}var nt=null,_t=!1;function jn(e,t,n){for(n=n.child;n!==null;)Uc(e,t,n),n=n.sibling}function Uc(e,t,n){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(jo,n)}catch{}switch(n.tag){case 5:it||jr(n,t);case 6:var r=nt,s=_t;nt=null,jn(e,t,n),nt=r,_t=s,nt!==null&&(_t?(e=nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(_t?(e=nt,n=n.stateNode,e.nodeType===8?fa(e.parentNode,n):e.nodeType===1&&fa(e,n),$r(e)):fa(nt,n.stateNode));break;case 4:r=nt,s=_t,nt=n.stateNode.containerInfo,_t=!0,jn(e,t,n),nt=r,_t=s;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,d=l.destroy;l=l.tag,d!==void 0&&((l&2)!==0||(l&4)!==0)&&Ka(n,t,d),s=s.next}while(s!==r)}jn(e,t,n);break;case 1:if(!it&&(jr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(b){Ye(n,t,b)}jn(e,t,n);break;case 21:jn(e,t,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,jn(e,t,n),it=r):jn(e,t,n);break;default:jn(e,t,n)}}function Hc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new mf),t.forEach(function(r){var s=kf.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function At(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,d=t,b=d;e:for(;b!==null;){switch(b.tag){case 5:nt=b.stateNode,_t=!1;break e;case 3:nt=b.stateNode.containerInfo,_t=!0;break e;case 4:nt=b.stateNode.containerInfo,_t=!0;break e}b=b.return}if(nt===null)throw Error(a(160));Uc(l,d,s),nt=null,_t=!1;var k=s.alternate;k!==null&&(k.return=null),s.return=null}catch(O){Ye(s,t,O)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wc(t,e),t=t.sibling}function Wc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),Vt(e),r&4){try{co(3,e,e.return),cs(3,e)}catch(ge){Ye(e,e.return,ge)}try{co(5,e,e.return)}catch(ge){Ye(e,e.return,ge)}}break;case 1:At(t,e),Vt(e),r&512&&n!==null&&jr(n,n.return);break;case 5:if(At(t,e),Vt(e),r&512&&n!==null&&jr(n,n.return),e.flags&32){var s=e.stateNode;try{Ln(s,"")}catch(ge){Ye(e,e.return,ge)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,d=n!==null?n.memoizedProps:l,b=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{b==="input"&&l.type==="radio"&&l.name!=null&&yt(s,l),$t(b,d);var O=$t(b,l);for(d=0;d<k.length;d+=2){var oe=k[d],ae=k[d+1];oe==="style"?Fr(s,ae):oe==="dangerouslySetInnerHTML"?an(s,ae):oe==="children"?Ln(s,ae):H(s,oe,ae,O)}switch(b){case"input":He(s,l);break;case"textarea":Lr(s,l);break;case"select":var re=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var fe=l.value;fe!=null?We(s,!!l.multiple,fe,!1):re!==!!l.multiple&&(l.defaultValue!=null?We(s,!!l.multiple,l.defaultValue,!0):We(s,!!l.multiple,l.multiple?[]:"",!1))}s[Jr]=l}catch(ge){Ye(e,e.return,ge)}}break;case 6:if(At(t,e),Vt(e),r&4){if(e.stateNode===null)throw Error(a(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(ge){Ye(e,e.return,ge)}}break;case 3:if(At(t,e),Vt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$r(t.containerInfo)}catch(ge){Ye(e,e.return,ge)}break;case 4:At(t,e),Vt(e);break;case 13:At(t,e),Vt(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(nl=ke())),r&4&&Hc(e);break;case 22:if(oe=n!==null&&n.memoizedState!==null,e.mode&1?(it=(O=it)||oe,At(t,e),it=O):At(t,e),Vt(e),r&8192){if(O=e.memoizedState!==null,(e.stateNode.isHidden=O)&&!oe&&(e.mode&1)!==0)for(pe=e,oe=e.child;oe!==null;){for(ae=pe=oe;pe!==null;){switch(re=pe,fe=re.child,re.tag){case 0:case 11:case 14:case 15:co(4,re,re.return);break;case 1:jr(re,re.return);var he=re.stateNode;if(typeof he.componentWillUnmount=="function"){r=re,n=re.return;try{t=r,he.props=t.memoizedProps,he.state=t.memoizedState,he.componentWillUnmount()}catch(ge){Ye(r,n,ge)}}break;case 5:jr(re,re.return);break;case 22:if(re.memoizedState!==null){Vc(ae);continue}}fe!==null?(fe.return=re,pe=fe):Vc(ae)}oe=oe.sibling}e:for(oe=null,ae=e;;){if(ae.tag===5){if(oe===null){oe=ae;try{s=ae.stateNode,O?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(b=ae.stateNode,k=ae.memoizedProps.style,d=k!=null&&k.hasOwnProperty("display")?k.display:null,b.style.display=Kt("display",d))}catch(ge){Ye(e,e.return,ge)}}}else if(ae.tag===6){if(oe===null)try{ae.stateNode.nodeValue=O?"":ae.memoizedProps}catch(ge){Ye(e,e.return,ge)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===e)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===e)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===e)break e;oe===ae&&(oe=null),ae=ae.return}oe===ae&&(oe=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:At(t,e),Vt(e),r&4&&Hc(e);break;case 21:break;default:At(t,e),Vt(e)}}function Vt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Bc(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ln(s,""),r.flags&=-33);var l=$c(e);qa(e,l,s);break;case 3:case 4:var d=r.stateNode.containerInfo,b=$c(e);Ja(e,b,d);break;default:throw Error(a(161))}}catch(k){Ye(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yf(e,t,n){pe=e,Yc(e)}function Yc(e,t,n){for(var r=(e.mode&1)!==0;pe!==null;){var s=pe,l=s.child;if(s.tag===22&&r){var d=s.memoizedState!==null||is;if(!d){var b=s.alternate,k=b!==null&&b.memoizedState!==null||it;b=is;var O=it;if(is=d,(it=k)&&!O)for(pe=s;pe!==null;)d=pe,k=d.child,d.tag===22&&d.memoizedState!==null?Gc(s):k!==null?(k.return=d,pe=k):Gc(s);for(;l!==null;)pe=l,Yc(l),l=l.sibling;pe=s,is=b,it=O}Xc(e)}else(s.subtreeFlags&8772)!==0&&l!==null?(l.return=s,pe=l):Xc(e)}}function Xc(e){for(;pe!==null;){var t=pe;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:it||cs(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!it)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Tt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Vi(t,l,r);break;case 3:var d=t.updateQueue;if(d!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Vi(t,d,n)}break;case 5:var b=t.stateNode;if(n===null&&t.flags&4){n=b;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&n.focus();break;case"img":k.src&&(n.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var O=t.alternate;if(O!==null){var oe=O.memoizedState;if(oe!==null){var ae=oe.dehydrated;ae!==null&&$r(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}it||t.flags&512&&Qa(t)}catch(re){Ye(t,t.return,re)}}if(t===e){pe=null;break}if(n=t.sibling,n!==null){n.return=t.return,pe=n;break}pe=t.return}}function Vc(e){for(;pe!==null;){var t=pe;if(t===e){pe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,pe=n;break}pe=t.return}}function Gc(e){for(;pe!==null;){var t=pe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{cs(4,t)}catch(k){Ye(t,n,k)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(k){Ye(t,s,k)}}var l=t.return;try{Qa(t)}catch(k){Ye(t,l,k)}break;case 5:var d=t.return;try{Qa(t)}catch(k){Ye(t,d,k)}}}catch(k){Ye(t,t.return,k)}if(t===e){pe=null;break}var b=t.sibling;if(b!==null){b.return=t.return,pe=b;break}pe=t.return}}var vf=Math.ceil,us=W.ReactCurrentDispatcher,el=W.ReactCurrentOwner,Pt=W.ReactCurrentBatchConfig,De=0,et=null,Ze=null,rt=0,jt=0,Sr=xn(0),Je=0,uo=null,Hn=0,ds=0,tl=0,fo=null,gt=null,nl=0,Nr=1/0,on=null,fs=!1,rl=null,Sn=null,ps=!1,Nn=null,hs=0,po=0,ol=null,gs=-1,ms=0;function dt(){return(De&6)!==0?ke():gs!==-1?gs:gs=ke()}function Cn(e){return(e.mode&1)===0?1:(De&2)!==0&&rt!==0?rt&-rt:tf.transition!==null?(ms===0&&(ms=$l()),ms):(e=Fe,e!==0||(e=window.event,e=e===void 0?16:Kl(e.type)),e)}function Ot(e,t,n,r){if(50<po)throw po=0,ol=null,Error(a(185));Tr(e,n,r),((De&2)===0||e!==et)&&(e===et&&((De&2)===0&&(ds|=n),Je===4&&kn(e,rt)),mt(e,r),n===1&&De===0&&(t.mode&1)===0&&(Nr=ke()+500,Wo&&vn()))}function mt(e,t){var n=e.callbackNode;td(e,t);var r=Co(e,e===et?rt:0);if(r===0)n!==null&&Pe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Pe(n),t===1)e.tag===0?ef(Kc.bind(null,e)):Ri(Kc.bind(null,e)),Kd(function(){(De&6)===0&&vn()}),n=null;else{switch(Ul(r)){case 1:n=Ft;break;case 4:n=_s;break;case 16:n=Rn;break;case 536870912:n=Bl;break;default:n=Rn}n=ou(n,Zc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Zc(e,t){if(gs=-1,ms=0,(De&6)!==0)throw Error(a(327));var n=e.callbackNode;if(Cr()&&e.callbackNode!==n)return null;var r=Co(e,e===et?rt:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=xs(e,r);else{t=r;var s=De;De|=2;var l=Jc();(et!==e||rt!==t)&&(on=null,Nr=ke()+500,Yn(e,t));do try{jf();break}catch(b){Qc(e,b)}while(!0);ja(),us.current=l,De=s,Ze!==null?t=0:(et=null,rt=0,t=Je)}if(t!==0){if(t===2&&(s=As(e),s!==0&&(r=s,t=sl(e,s))),t===1)throw n=uo,Yn(e,0),kn(e,r),mt(e,ke()),n;if(t===6)kn(e,r);else{if(s=e.current.alternate,(r&30)===0&&!wf(s)&&(t=xs(e,r),t===2&&(l=As(e),l!==0&&(r=l,t=sl(e,l))),t===1))throw n=uo,Yn(e,0),kn(e,r),mt(e,ke()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:Xn(e,gt,on);break;case 3:if(kn(e,r),(r&130023424)===r&&(t=nl+500-ke(),10<t)){if(Co(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){dt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=da(Xn.bind(null,e,gt,on),t);break}Xn(e,gt,on);break;case 4:if(kn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var d=31-It(r);l=1<<d,d=t[d],d>s&&(s=d),r&=~l}if(r=s,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vf(r/1960))-r,10<r){e.timeoutHandle=da(Xn.bind(null,e,gt,on),r);break}Xn(e,gt,on);break;case 5:Xn(e,gt,on);break;default:throw Error(a(329))}}}return mt(e,ke()),e.callbackNode===n?Zc.bind(null,e):null}function sl(e,t){var n=fo;return e.current.memoizedState.isDehydrated&&(Yn(e,t).flags|=256),e=xs(e,t),e!==2&&(t=gt,gt=n,t!==null&&al(t)),e}function al(e){gt===null?gt=e:gt.push.apply(gt,e)}function wf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!zt(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kn(e,t){for(t&=~tl,t&=~ds,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-It(t),r=1<<n;e[n]=-1,t&=~r}}function Kc(e){if((De&6)!==0)throw Error(a(327));Cr();var t=Co(e,0);if((t&1)===0)return mt(e,ke()),null;var n=xs(e,t);if(e.tag!==0&&n===2){var r=As(e);r!==0&&(t=r,n=sl(e,r))}if(n===1)throw n=uo,Yn(e,0),kn(e,t),mt(e,ke()),n;if(n===6)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xn(e,gt,on),mt(e,ke()),null}function ll(e,t){var n=De;De|=1;try{return e(t)}finally{De=n,De===0&&(Nr=ke()+500,Wo&&vn())}}function Wn(e){Nn!==null&&Nn.tag===0&&(De&6)===0&&Cr();var t=De;De|=1;var n=Pt.transition,r=Fe;try{if(Pt.transition=null,Fe=1,e)return e()}finally{Fe=r,Pt.transition=n,De=t,(De&6)===0&&vn()}}function il(){jt=Sr.current,Te(Sr)}function Yn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Zd(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(xa(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Uo();break;case 3:wr(),Te(ft),Te(st),La();break;case 5:Da(r);break;case 4:wr();break;case 13:Te($e);break;case 19:Te($e);break;case 10:Sa(r.type._context);break;case 22:case 23:il()}n=n.return}if(et=e,Ze=e=En(e.current,null),rt=jt=t,Je=0,uo=null,tl=ds=Hn=0,gt=fo=null,Bn!==null){for(t=0;t<Bn.length;t++)if(n=Bn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var d=l.next;l.next=s,r.next=d}n.pending=r}Bn=null}return e}function Qc(e,t){do{var n=Ze;try{if(ja(),es.current=os,ts){for(var r=Ue.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ts=!1}if(Un=0,qe=Qe=Ue=null,oo=!1,so=0,el.current=null,n===null||n.return===null){Je=1,uo=t,Ze=null;break}e:{var l=e,d=n.return,b=n,k=t;if(t=rt,b.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var O=k,oe=b,ae=oe.tag;if((oe.mode&1)===0&&(ae===0||ae===11||ae===15)){var re=oe.alternate;re?(oe.updateQueue=re.updateQueue,oe.memoizedState=re.memoizedState,oe.lanes=re.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var fe=jc(d);if(fe!==null){fe.flags&=-257,Sc(fe,d,b,l,t),fe.mode&1&&bc(l,O,t),t=fe,k=O;var he=t.updateQueue;if(he===null){var ge=new Set;ge.add(k),t.updateQueue=ge}else he.add(k);break e}else{if((t&1)===0){bc(l,O,t),cl();break e}k=Error(a(426))}}else if(Ae&&b.mode&1){var Ve=jc(d);if(Ve!==null){(Ve.flags&65536)===0&&(Ve.flags|=256),Sc(Ve,d,b,l,t),wa(br(k,b));break e}}l=k=br(k,b),Je!==4&&(Je=2),fo===null?fo=[l]:fo.push(l),l=d;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var I=vc(l,k,t);Xi(l,I);break e;case 1:b=k;var L=l.type,R=l.stateNode;if((l.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Sn===null||!Sn.has(R)))){l.flags|=65536,t&=-t,l.lanes|=t;var ie=wc(l,b,t);Xi(l,ie);break e}}l=l.return}while(l!==null)}eu(n)}catch(xe){t=xe,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(!0)}function Jc(){var e=us.current;return us.current=os,e===null?os:e}function cl(){(Je===0||Je===3||Je===2)&&(Je=4),et===null||(Hn&268435455)===0&&(ds&268435455)===0||kn(et,rt)}function xs(e,t){var n=De;De|=2;var r=Jc();(et!==e||rt!==t)&&(on=null,Yn(e,t));do try{bf();break}catch(s){Qc(e,s)}while(!0);if(ja(),De=n,us.current=r,Ze!==null)throw Error(a(261));return et=null,rt=0,Je}function bf(){for(;Ze!==null;)qc(Ze)}function jf(){for(;Ze!==null&&!Oe();)qc(Ze)}function qc(e){var t=ru(e.alternate,e,jt);e.memoizedProps=e.pendingProps,t===null?eu(e):Ze=t,el.current=null}function eu(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=hf(n,t,jt),n!==null){Ze=n;return}}else{if(n=gf(n,t),n!==null){n.flags&=32767,Ze=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Ze=null;return}}if(t=t.sibling,t!==null){Ze=t;return}Ze=t=e}while(t!==null);Je===0&&(Je=5)}function Xn(e,t,n){var r=Fe,s=Pt.transition;try{Pt.transition=null,Fe=1,Sf(e,t,n,r)}finally{Pt.transition=s,Fe=r}return null}function Sf(e,t,n,r){do Cr();while(Nn!==null);if((De&6)!==0)throw Error(a(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(nd(e,l),e===et&&(Ze=et=null,rt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||ps||(ps=!0,ou(Rn,function(){return Cr(),null})),l=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||l){l=Pt.transition,Pt.transition=null;var d=Fe;Fe=1;var b=De;De|=4,el.current=null,xf(e,n),Wc(n,e),Ud(ca),Do=!!ia,ca=ia=null,e.current=n,yf(n),Be(),De=b,Fe=d,Pt.transition=l}else e.current=n;if(ps&&(ps=!1,Nn=e,hs=s),l=e.pendingLanes,l===0&&(Sn=null),Ku(n.stateNode),mt(e,ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(fs)throw fs=!1,e=rl,rl=null,e;return(hs&1)!==0&&e.tag!==0&&Cr(),l=e.pendingLanes,(l&1)!==0?e===ol?po++:(po=0,ol=e):po=0,vn(),null}function Cr(){if(Nn!==null){var e=Ul(hs),t=Pt.transition,n=Fe;try{if(Pt.transition=null,Fe=16>e?16:e,Nn===null)var r=!1;else{if(e=Nn,Nn=null,hs=0,(De&6)!==0)throw Error(a(331));var s=De;for(De|=4,pe=e.current;pe!==null;){var l=pe,d=l.child;if((pe.flags&16)!==0){var b=l.deletions;if(b!==null){for(var k=0;k<b.length;k++){var O=b[k];for(pe=O;pe!==null;){var oe=pe;switch(oe.tag){case 0:case 11:case 15:co(8,oe,l)}var ae=oe.child;if(ae!==null)ae.return=oe,pe=ae;else for(;pe!==null;){oe=pe;var re=oe.sibling,fe=oe.return;if(Oc(oe),oe===O){pe=null;break}if(re!==null){re.return=fe,pe=re;break}pe=fe}}}var he=l.alternate;if(he!==null){var ge=he.child;if(ge!==null){he.child=null;do{var Ve=ge.sibling;ge.sibling=null,ge=Ve}while(ge!==null)}}pe=l}}if((l.subtreeFlags&2064)!==0&&d!==null)d.return=l,pe=d;else e:for(;pe!==null;){if(l=pe,(l.flags&2048)!==0)switch(l.tag){case 0:case 11:case 15:co(9,l,l.return)}var I=l.sibling;if(I!==null){I.return=l.return,pe=I;break e}pe=l.return}}var L=e.current;for(pe=L;pe!==null;){d=pe;var R=d.child;if((d.subtreeFlags&2064)!==0&&R!==null)R.return=d,pe=R;else e:for(d=L;pe!==null;){if(b=pe,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:cs(9,b)}}catch(xe){Ye(b,b.return,xe)}if(b===d){pe=null;break e}var ie=b.sibling;if(ie!==null){ie.return=b.return,pe=ie;break e}pe=b.return}}if(De=s,vn(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(jo,e)}catch{}r=!0}return r}finally{Fe=n,Pt.transition=t}}return!1}function tu(e,t,n){t=br(n,t),t=vc(e,t,1),e=bn(e,t,1),t=dt(),e!==null&&(Tr(e,1,t),mt(e,t))}function Ye(e,t,n){if(e.tag===3)tu(e,e,n);else for(;t!==null;){if(t.tag===3){tu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sn===null||!Sn.has(r))){e=br(n,e),e=wc(t,e,1),t=bn(t,e,1),e=dt(),t!==null&&(Tr(t,1,e),mt(t,e));break}}t=t.return}}function Nf(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=dt(),e.pingedLanes|=e.suspendedLanes&n,et===e&&(rt&n)===n&&(Je===4||Je===3&&(rt&130023424)===rt&&500>ke()-nl?Yn(e,0):tl|=n),mt(e,t)}function nu(e,t){t===0&&((e.mode&1)===0?t=1:(t=No,No<<=1,(No&130023424)===0&&(No=4194304)));var n=dt();e=tn(e,t),e!==null&&(Tr(e,t,n),mt(e,n))}function Cf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),nu(e,n)}function kf(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}r!==null&&r.delete(t),nu(e,n)}var ru;ru=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ft.current)ht=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return ht=!1,pf(e,t,n);ht=(e.flags&131072)!==0}else ht=!1,Ae&&(t.flags&1048576)!==0&&Ti(t,Xo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ls(e,t),e=t.pendingProps;var s=pr(t,st.current);vr(t,n),s=Ia(null,t,r,e,s,n);var l=za();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(r)?(l=!0,Ho(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ka(t),s.updater=ss,t.stateNode=s,s._reactInternals=t,Ba(t,r,e,n),t=Wa(null,t,r,!0,l,n)):(t.tag=0,Ae&&l&&ma(t),ut(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ls(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Df(r),e=Tt(r,e),s){case 0:t=Ha(null,t,r,e,n);break e;case 1:t=Pc(null,t,r,e,n);break e;case 11:t=Nc(null,t,r,e,n);break e;case 14:t=Cc(null,t,r,Tt(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tt(r,s),Ha(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tt(r,s),Pc(e,t,r,s,n);case 3:e:{if(Lc(t),e===null)throw Error(a(387));r=t.pendingProps,l=t.memoizedState,s=l.element,Yi(e,t),Jo(t,r,null,n);var d=t.memoizedState;if(r=d.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=br(Error(a(423)),t),t=Mc(e,t,r,n,s);break e}else if(r!==s){s=br(Error(a(424)),t),t=Mc(e,t,r,n,s);break e}else for(bt=mn(t.stateNode.containerInfo.firstChild),wt=t,Ae=!0,Rt=null,n=Hi(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mr(),r===s){t=rn(e,t,n);break e}ut(e,t,r,n)}t=t.child}return t;case 5:return Gi(t),e===null&&va(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,d=s.children,ua(r,s)?d=null:l!==null&&ua(r,l)&&(t.flags|=32),Dc(e,t),ut(e,t,d,n),t.child;case 6:return e===null&&va(t),null;case 13:return Fc(e,t,n);case 4:return Ea(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=xr(t,null,r,n):ut(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tt(r,s),Nc(e,t,r,s,n);case 7:return ut(e,t,t.pendingProps,n),t.child;case 8:return ut(e,t,t.pendingProps.children,n),t.child;case 12:return ut(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,d=s.value,ze(Zo,r._currentValue),r._currentValue=d,l!==null)if(zt(l.value,d)){if(l.children===s.children&&!ft.current){t=rn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var b=l.dependencies;if(b!==null){d=l.child;for(var k=b.firstContext;k!==null;){if(k.context===r){if(l.tag===1){k=nn(-1,n&-n),k.tag=2;var O=l.updateQueue;if(O!==null){O=O.shared;var oe=O.pending;oe===null?k.next=k:(k.next=oe.next,oe.next=k),O.pending=k}}l.lanes|=n,k=l.alternate,k!==null&&(k.lanes|=n),Na(l.return,n,t),b.lanes|=n;break}k=k.next}}else if(l.tag===10)d=l.type===t.type?null:l.child;else if(l.tag===18){if(d=l.return,d===null)throw Error(a(341));d.lanes|=n,b=d.alternate,b!==null&&(b.lanes|=n),Na(d,n,t),d=l.sibling}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===t){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}ut(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,vr(t,n),s=Et(s),r=r(s),t.flags|=1,ut(e,t,r,n),t.child;case 14:return r=t.type,s=Tt(r,t.pendingProps),s=Tt(r.type,s),Cc(e,t,r,s,n);case 15:return kc(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tt(r,s),ls(e,t),t.tag=1,pt(r)?(e=!0,Ho(t)):e=!1,vr(t,n),xc(t,r,s),Ba(t,r,s,n),Wa(null,t,r,!0,e,n);case 19:return zc(e,t,n);case 22:return Ec(e,t,n)}throw Error(a(156,t.tag))};function ou(e,t){return Se(e,t)}function Ef(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,n,r){return new Ef(e,t,n,r)}function ul(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Df(e){if(typeof e=="function")return ul(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ue)return 11;if(e===U)return 14}return 2}function En(e,t){var n=e.alternate;return n===null?(n=Lt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ys(e,t,n,r,s,l){var d=2;if(r=e,typeof e=="function")ul(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case X:return Vn(n.children,s,l,t);case Z:d=8,s|=8;break;case A:return e=Lt(12,n,t,s|2),e.elementType=A,e.lanes=l,e;case ee:return e=Lt(13,n,t,s),e.elementType=ee,e.lanes=l,e;case J:return e=Lt(19,n,t,s),e.elementType=J,e.lanes=l,e;case V:return vs(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:d=10;break e;case q:d=9;break e;case ue:d=11;break e;case U:d=14;break e;case me:d=16,r=null;break e}throw Error(a(130,e==null?e:typeof e,""))}return t=Lt(d,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Vn(e,t,n,r){return e=Lt(7,e,r,t),e.lanes=n,e}function vs(e,t,n,r){return e=Lt(22,e,r,t),e.elementType=V,e.lanes=n,e.stateNode={isHidden:!1},e}function dl(e,t,n){return e=Lt(6,e,null,t),e.lanes=n,e}function fl(e,t,n){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pf(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Os(0),this.expirationTimes=Os(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Os(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function pl(e,t,n,r,s,l,d,b,k){return e=new Pf(e,t,n,b,k),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Lt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ka(l),e}function Lf(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function su(e){if(!e)return yn;e=e._reactInternals;e:{if(Nt(e)!==e||e.tag!==1)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(a(171))}if(e.tag===1){var n=e.type;if(pt(n))return Ii(e,n,t)}return t}function au(e,t,n,r,s,l,d,b,k){return e=pl(n,r,!0,e,s,l,d,b,k),e.context=su(null),n=e.current,r=dt(),s=Cn(n),l=nn(r,s),l.callback=t??null,bn(n,l,s),e.current.lanes=s,Tr(e,s,r),mt(e,r),e}function ws(e,t,n,r){var s=t.current,l=dt(),d=Cn(s);return n=su(n),t.context===null?t.context=n:t.pendingContext=n,t=nn(l,d),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=bn(s,t,d),e!==null&&(Ot(e,s,d,l),Qo(e,s,d)),d}function bs(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function lu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hl(e,t){lu(e,t),(e=e.alternate)&&lu(e,t)}function Mf(){return null}var iu=typeof reportError=="function"?reportError:function(e){console.error(e)};function gl(e){this._internalRoot=e}js.prototype.render=gl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));ws(e,t,null,null)},js.prototype.unmount=gl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wn(function(){ws(null,e,null,null)}),t[Qt]=null}};function js(e){this._internalRoot=e}js.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yl();e={blockedOn:null,target:e,priority:t};for(var n=0;n<pn.length&&t!==0&&t<pn[n].priority;n++);pn.splice(n,0,e),n===0&&Gl(e)}};function ml(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ss(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cu(){}function Ff(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var O=bs(d);l.call(O)}}var d=au(t,r,e,0,null,!1,!1,"",cu);return e._reactRootContainer=d,e[Qt]=d.current,Kr(e.nodeType===8?e.parentNode:e),Wn(),d}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var b=r;r=function(){var O=bs(k);b.call(O)}}var k=pl(e,0,!1,null,null,!1,!1,"",cu);return e._reactRootContainer=k,e[Qt]=k.current,Kr(e.nodeType===8?e.parentNode:e),Wn(function(){ws(t,k,n,r)}),k}function Ns(e,t,n,r,s){var l=n._reactRootContainer;if(l){var d=l;if(typeof s=="function"){var b=s;s=function(){var k=bs(d);b.call(k)}}ws(t,d,e,s)}else d=Ff(n,t,e,s,r);return bs(d)}Hl=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Rr(t.pendingLanes);n!==0&&(Bs(t,n|1),mt(t,ke()),(De&6)===0&&(Nr=ke()+500,vn()))}break;case 13:Wn(function(){var r=tn(e,1);if(r!==null){var s=dt();Ot(r,e,1,s)}}),hl(e,1)}},$s=function(e){if(e.tag===13){var t=tn(e,134217728);if(t!==null){var n=dt();Ot(t,e,134217728,n)}hl(e,134217728)}},Wl=function(e){if(e.tag===13){var t=Cn(e),n=tn(e,t);if(n!==null){var r=dt();Ot(n,e,t,r)}hl(e,t)}},Yl=function(){return Fe},Xl=function(e,t){var n=Fe;try{return Fe=e,t()}finally{Fe=n}},qn=function(e,t,n){switch(t){case"input":if(He(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=$o(r);if(!s)throw Error(a(90));_e(r),He(r,s)}}}break;case"textarea":Lr(e,n);break;case"select":t=n.value,t!=null&&We(e,!!n.multiple,t,!1)}},ot=ll,vo=Wn;var If={usingClientEntryPoint:!1,Events:[qr,dr,$o,er,tr,ll]},ho={findFiberByHostInstance:Tn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zf={bundleType:ho.bundleType,version:ho.version,rendererPackageName:ho.rendererPackageName,rendererConfig:ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ne(e),e===null?null:e.stateNode},findFiberByHostInstance:ho.findFiberByHostInstance||Mf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cs.isDisabled&&Cs.supportsFiber)try{jo=Cs.inject(zf),Ht=Cs}catch{}}return xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=If,xt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ml(t))throw Error(a(200));return Lf(e,t,null,n)},xt.createRoot=function(e,t){if(!ml(e))throw Error(a(299));var n=!1,r="",s=iu;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=pl(e,1,!1,null,null,n,!1,r,s),e[Qt]=t.current,Kr(e.nodeType===8?e.parentNode:e),new gl(t)},xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=ne(t),e=e===null?null:e.stateNode,e},xt.flushSync=function(e){return Wn(e)},xt.hydrate=function(e,t,n){if(!Ss(t))throw Error(a(200));return Ns(null,e,t,!0,n)},xt.hydrateRoot=function(e,t,n){if(!ml(e))throw Error(a(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",d=iu;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),t=au(t,null,e,1,n??null,s,!1,l,d),e[Qt]=t.current,Kr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new js(t)},xt.render=function(e,t,n){if(!Ss(t))throw Error(a(200));return Ns(null,e,t,!1,n)},xt.unmountComponentAtNode=function(e){if(!Ss(e))throw Error(a(40));return e._reactRootContainer?(Wn(function(){Ns(null,null,e,!1,function(){e._reactRootContainer=null,e[Qt]=null})}),!0):!1},xt.unstable_batchedUpdates=ll,xt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ss(n))throw Error(a(200));if(e==null||e._reactInternals===void 0)throw Error(a(38));return Ns(e,t,n,!1,r)},xt.version="18.3.1-next-f1338f8080-20240426",xt}var xu;function Uf(){if(xu)return vl.exports;xu=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(c){console.error(c)}}return i(),vl.exports=$f(),vl.exports}var yu;function Hf(){if(yu)return ks;yu=1;var i=Uf();return ks.createRoot=i.createRoot,ks.hydrateRoot=i.hydrateRoot,ks}var Wf=Hf();const Yf=Tl(Wf),Xf={},vu=i=>{let c;const a=new Set,u=(y,x)=>{const E=typeof y=="function"?y(c):y;if(!Object.is(E,c)){const C=c;c=x??(typeof E!="object"||E===null)?E:Object.assign({},c,E),a.forEach(N=>N(c,C))}},f=()=>c,h={setState:u,getState:f,getInitialState:()=>p,subscribe:y=>(a.add(y),()=>a.delete(y)),destroy:()=>{(Xf?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},p=c=i(u,f,h);return h},Vf=i=>i?vu(i):vu;var jl={exports:{}},Sl={},Nl={exports:{}},Cl={};var wu;function Gf(){if(wu)return Cl;wu=1;var i=mo();function c(x,E){return x===E&&(x!==0||1/x===1/E)||x!==x&&E!==E}var a=typeof Object.is=="function"?Object.is:c,u=i.useState,f=i.useEffect,m=i.useLayoutEffect,g=i.useDebugValue;function w(x,E){var C=E(),N=u({inst:{value:C,getSnapshot:E}}),D=N[0].inst,F=N[1];return m(function(){D.value=C,D.getSnapshot=E,h(D)&&F({inst:D})},[x,C,E]),f(function(){return h(D)&&F({inst:D}),x(function(){h(D)&&F({inst:D})})},[x]),g(C),C}function h(x){var E=x.getSnapshot;x=x.value;try{var C=E();return!a(x,C)}catch{return!0}}function p(x,E){return E()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:w;return Cl.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:y,Cl}var bu;function Zf(){return bu||(bu=1,Nl.exports=Gf()),Nl.exports}var ju;function Kf(){if(ju)return Sl;ju=1;var i=mo(),c=Zf();function a(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var u=typeof Object.is=="function"?Object.is:a,f=c.useSyncExternalStore,m=i.useRef,g=i.useEffect,w=i.useMemo,h=i.useDebugValue;return Sl.useSyncExternalStoreWithSelector=function(p,y,x,E,C){var N=m(null);if(N.current===null){var D={hasValue:!1,value:null};N.current=D}else D=N.current;N=w(function(){function j($){if(!Y){if(Y=!0,H=$,$=E($),C!==void 0&&D.hasValue){var X=D.value;if(C(X,$))return W=X}return W=$}if(X=W,u(H,$))return X;var Z=E($);return C!==void 0&&C(X,Z)?(H=$,X):(H=$,W=Z)}var Y=!1,H,W,M=x===void 0?null:x;return[function(){return j(y())},M===null?void 0:function(){return j(M())}]},[y,x,E,C]);var F=f(p,N[0],N[1]);return g(function(){D.hasValue=!0,D.value=F},[F]),h(F),F},Sl}var Su;function Qf(){return Su||(Su=1,jl.exports=Kf()),jl.exports}var Jf=Qf();const qf=Tl(Jf),Ou={},{useDebugValue:ep}=Au,{useSyncExternalStoreWithSelector:tp}=qf;let Nu=!1;const np=i=>i;function rp(i,c=np,a){(Ou?"production":void 0)!=="production"&&a&&!Nu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Nu=!0);const u=tp(i.subscribe,i.getState,i.getServerState||i.getInitialState,c,a);return ep(u),u}const op=i=>{(Ou?"production":void 0)!=="production"&&typeof i!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const c=typeof i=="function"?Vf(i):i,a=(u,f)=>rp(c,u,f);return Object.assign(a,c),a},sp=i=>op,kl={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Fl=new Map,Es=i=>{const c=Fl.get(i);return c?Object.fromEntries(Object.entries(c.stores).map(([a,u])=>[a,u.getState()])):{}},ap=(i,c,a)=>{if(i===void 0)return{type:"untracked",connection:c.connect(a)};const u=Fl.get(a.name);if(u)return{type:"tracked",store:i,...u};const f={connection:c.connect(a),stores:{}};return Fl.set(a.name,f),{type:"tracked",store:i,...f}},lp=(i,c={})=>(a,u,f)=>{const{enabled:m,anonymousActionType:g,store:w,...h}=c;let p;try{p=(m??(kl?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!p)return(kl?"production":void 0)!=="production"&&m&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),i(a,u,f);const{connection:y,...x}=ap(w,p,h);let E=!0;f.setState=(D,F,j)=>{const Y=a(D,F);if(!E)return Y;const H=j===void 0?{type:g||"anonymous"}:typeof j=="string"?{type:j}:j;return w===void 0?(y?.send(H,u()),Y):(y?.send({...H,type:`${w}/${H.type}`},{...Es(h.name),[w]:f.getState()}),Y)};const C=(...D)=>{const F=E;E=!1,a(...D),E=F},N=i(f.setState,u,f);if(x.type==="untracked"?y?.init(N):(x.stores[x.store]=f,y?.init(Object.fromEntries(Object.entries(x.stores).map(([D,F])=>[D,D===x.store?N:F.getState()])))),f.dispatchFromDevtools&&typeof f.dispatch=="function"){let D=!1;const F=f.dispatch;f.dispatch=(...j)=>{(kl?"production":void 0)!=="production"&&j[0].type==="__setState"&&!D&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),D=!0),F(...j)}}return y.subscribe(D=>{var F;switch(D.type){case"ACTION":if(typeof D.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return El(D.payload,j=>{if(j.type==="__setState"){if(w===void 0){C(j.state);return}Object.keys(j.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const Y=j.state[w];if(Y==null)return;JSON.stringify(f.getState())!==JSON.stringify(Y)&&C(Y);return}f.dispatchFromDevtools&&typeof f.dispatch=="function"&&f.dispatch(j)});case"DISPATCH":switch(D.payload.type){case"RESET":return C(N),w===void 0?y?.init(f.getState()):y?.init(Es(h.name));case"COMMIT":if(w===void 0){y?.init(f.getState());return}return y?.init(Es(h.name));case"ROLLBACK":return El(D.state,j=>{if(w===void 0){C(j),y?.init(f.getState());return}C(j[w]),y?.init(Es(h.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return El(D.state,j=>{if(w===void 0){C(j);return}JSON.stringify(f.getState())!==JSON.stringify(j[w])&&C(j[w])});case"IMPORT_STATE":{const{nextLiftedState:j}=D.payload,Y=(F=j.computedStates.slice(-1)[0])==null?void 0:F.state;if(!Y)return;C(w===void 0?Y:Y[w]),y?.send(null,j);return}case"PAUSE_RECORDING":return E=!E}return}}),N},ip=lp,El=(i,c)=>{let a;try{a=JSON.parse(i)}catch(u){console.error("[zustand devtools middleware] Could not parse the received json",u)}a!==void 0&&c(a)},cp=i=>{const c=i.data,a=new Map;for(let u=0;u<c.length;u+=4){const f=c[u],m=c[u+1],g=c[u+2];if(c[u+3]===255){const h=`#${(16777216+(f<<16)+(m<<8)+g).toString(16).slice(1).toUpperCase()}`;a.has(h)||a.set(h,{r:f,g:m,b:g})}}return a},up=(i,c,a,u)=>{let f="#000000",m={r:0,g:0,b:0},g=1/0;for(const[w,h]of u){const p=Math.sqrt(Math.pow(i-h.r,2)+Math.pow(c-h.g,2)+Math.pow(a-h.b,2));p<g&&(g=p,f=w,m=h)}return{hex:f,...m}},Cu=(i,c,a=!0)=>new Promise((u,f)=>{try{const m=new Image;m.onload=()=>{try{const g=document.createElement("canvas");g.width=m.width,g.height=m.height;const w=g.getContext("2d");if(!w){f(new Error("Could not get canvas context"));return}w.drawImage(m,0,0);const h=w.getImageData(0,0,g.width,g.height),p=h.data;let y=null;a&&(y=cp(h));for(let x=0;x<p.length;x+=4){const E=p[x+3];if(E!==0)if(E<c)p[x+3]=0;else{if(a&&y&&y.size>0&&E<255){const C=p[x],N=p[x+1],D=p[x+2],F=up(C,N,D,y);p[x]=F.r,p[x+1]=F.g,p[x+2]=F.b}p[x+3]=255}}w.putImageData(h,0,0),u(g.toDataURL())}catch(g){console.error("Error processing image data:",g),f(g)}},m.onerror=g=>{console.error("Error loading image for processing:",g),f(new Error("Failed to load image"))},m.src=i}catch(m){console.error("Error initiating image processing:",m),f(m)}}),Bu=i=>new Promise((c,a)=>{const u=new FileReader;u.onload=f=>{const m=f.target?.result;c(m)},u.onerror=()=>{a(new Error("Failed to read blob"))},u.readAsDataURL(i)}),dp=i=>{const c=i.split(","),a=c[0].match(/:(.*?);/),u=a?a[1]:"image/png",f=atob(c[1]),m=f.length,g=new Uint8Array(m);for(let w=0;w<m;w++)g[w]=f.charCodeAt(w);return new Blob([g],{type:u})},ku=(i,c=30,a=!1)=>new Promise((u,f)=>{try{const m=new Image;m.crossOrigin="anonymous",m.onload=()=>{try{const g=m.naturalWidth,w=m.naturalHeight,h=document.createElement("canvas");h.width=g,h.height=w;const p=h.getContext("2d");if(!p){f(new Error("Could not get canvas context"));return}p.drawImage(m,0,0);const y=p.getImageData(0,0,g,w),x=y.data,E=new Uint8Array(g*w),C=new Uint8Array(g*w),N=(M,$)=>$*g+M,D=(M,$)=>{const X=($*g+M)*4;return{r:x[X],g:x[X+1],b:x[X+2],a:x[X+3]}},F=(M,$)=>{const X=M.r-$.r,Z=M.g-$.g,A=M.b-$.b;return Math.sqrt(X*X+Z*Z+A*A)},j=[],Y=(M,$)=>{for(let X=Math.max(0,$-1);X<=Math.min(w-1,$+1);X++)for(let Z=Math.max(0,M-1);Z<=Math.min(g-1,M+1);Z++)j.push({x:Z,y:X})};Y(0,0),Y(g-1,0),Y(0,w-1),Y(g-1,w-1);const H=[];for(const M of j){const $=D(M.x,M.y);H.push({x:M.x,y:M.y,base:$})}const W=(M,$)=>M>=0&&M<g&&$>=0&&$<w;for(;H.length>0;){const{x:M,y:$,base:X}=H.shift(),Z=N(M,$);if(E[Z])continue;E[Z]=1;const A=D(M,$);if(F(A,X)<=c){C[Z]=1;const q=[{x:M+1,y:$},{x:M-1,y:$},{x:M,y:$+1},{x:M,y:$-1}];for(const ue of q)if(W(ue.x,ue.y)){const ee=N(ue.x,ue.y);E[ee]||H.push({x:ue.x,y:ue.y,base:X})}}}for(let M=0;M<w;M++)for(let $=0;$<g;$++){const X=(M*g+$)*4;C[N($,M)]===1?x[X+3]=0:(a&&(x[X]=255,x[X+1]=0,x[X+2]=0),x[X+3]=255)}p.putImageData(y,0,0),u(h.toDataURL())}catch(g){console.error("removeBackground processing error:",g),f(g)}},m.onerror=g=>{console.error("removeBackground load error:",g),f(new Error("Failed to load image"))},m.src=i}catch(m){console.error("removeBackground init error:",m),f(m)}}),fp=i=>new Promise((c,a)=>{if(i.length===0){a(new Error("No layers to composite"));return}let u=1/0,f=1/0,m=-1/0,g=-1/0;for(const C of i)u=Math.min(u,C.x),f=Math.min(f,C.y),m=Math.max(m,C.x+C.width),g=Math.max(g,C.y+C.height);const w=Math.ceil(m-u),h=Math.ceil(g-f),p=document.createElement("canvas");p.width=w,p.height=h;const y=p.getContext("2d",{willReadFrequently:!0});if(!y){a(new Error("Failed to get canvas context"));return}y.clearRect(0,0,w,h);let x=0,E=!1;for(const C of i){const N=new Image;N.onload=()=>{E||(y.globalAlpha=C.opacity,y.drawImage(N,C.x-u,C.y-f,C.width,C.height),x++,x===i.length&&(y.globalAlpha=1,p.toBlob(D=>{D?c(D):a(new Error("Failed to create blob from canvas"))},"image/png")))},N.onerror=()=>{E=!0,a(new Error(`Failed to load image for layer at (${C.x}, ${C.y})`))},N.src=C.imageData}}),Il=[{name:"Arial",value:"Arial, sans-serif",category:"system"},{name:"Times New Roman",value:'"Times New Roman", Times, serif',category:"system"},{name:"Courier New",value:'"Courier New", Courier, monospace',category:"system"},{name:"Georgia",value:"Georgia, serif",category:"system"},{name:"Verdana",value:"Verdana, sans-serif",category:"system"},{name:"Comic Sans MS",value:'"Comic Sans MS", "Comic Sans", cursive',category:"system"},{name:"Impact",value:"Impact, Charcoal, sans-serif",category:"system"},{name:"Trebuchet MS",value:'"Trebuchet MS", Helvetica, sans-serif',category:"system"},{name:"Jokerman",value:"Jokerman, fantasy",category:"system"}],zl=[{name:"Roboto",value:"Roboto, sans-serif",category:"google",googleFontName:"Roboto"},{name:"Open Sans",value:'"Open Sans", sans-serif',category:"google",googleFontName:"Open+Sans"},{name:"Lato",value:"Lato, sans-serif",category:"google",googleFontName:"Lato"},{name:"Montserrat",value:"Montserrat, sans-serif",category:"google",googleFontName:"Montserrat"},{name:"Poppins",value:"Poppins, sans-serif",category:"google",googleFontName:"Poppins"},{name:"Oswald",value:"Oswald, sans-serif",category:"google",googleFontName:"Oswald"},{name:"Raleway",value:"Raleway, sans-serif",category:"google",googleFontName:"Raleway"},{name:"Ubuntu",value:"Ubuntu, sans-serif",category:"google",googleFontName:"Ubuntu"},{name:"Nunito",value:"Nunito, sans-serif",category:"google",googleFontName:"Nunito"},{name:"PT Sans",value:'"PT Sans", sans-serif',category:"google",googleFontName:"PT+Sans"},{name:"Merriweather",value:"Merriweather, serif",category:"google",googleFontName:"Merriweather"},{name:"Playfair Display",value:'"Playfair Display", serif',category:"google",googleFontName:"Playfair+Display"},{name:"Lora",value:"Lora, serif",category:"google",googleFontName:"Lora"},{name:"PT Serif",value:'"PT Serif", serif',category:"google",googleFontName:"PT+Serif"},{name:"Crimson Text",value:'"Crimson Text", serif',category:"google",googleFontName:"Crimson+Text"},{name:"EB Garamond",value:'"EB Garamond", serif',category:"google",googleFontName:"EB+Garamond"},{name:"Libre Baskerville",value:'"Libre Baskerville", serif',category:"google",googleFontName:"Libre+Baskerville"},{name:"Cormorant",value:"Cormorant, serif",category:"google",googleFontName:"Cormorant"},{name:"Spectral",value:"Spectral, serif",category:"google",googleFontName:"Spectral"},{name:"Bitter",value:"Bitter, serif",category:"google",googleFontName:"Bitter"},{name:"Bebas Neue",value:'"Bebas Neue", cursive',category:"google",googleFontName:"Bebas+Neue"},{name:"Pacifico",value:"Pacifico, cursive",category:"google",googleFontName:"Pacifico"},{name:"Righteous",value:"Righteous, cursive",category:"google",googleFontName:"Righteous"},{name:"Bangers",value:"Bangers, cursive",category:"google",googleFontName:"Bangers"},{name:"Permanent Marker",value:'"Permanent Marker", cursive',category:"google",googleFontName:"Permanent+Marker"},{name:"Lobster",value:"Lobster, cursive",category:"google",googleFontName:"Lobster"},{name:"Press Start 2P",value:'"Press Start 2P", cursive',category:"google",googleFontName:"Press+Start+2P"},{name:"Fredoka One",value:'"Fredoka One", cursive',category:"google",googleFontName:"Fredoka+One"},{name:"Alfa Slab One",value:'"Alfa Slab One", cursive',category:"google",googleFontName:"Alfa+Slab+One"},{name:"Rubik Mono One",value:'"Rubik Mono One", sans-serif',category:"google",googleFontName:"Rubik+Mono+One"},{name:"Dancing Script",value:'"Dancing Script", cursive',category:"google",googleFontName:"Dancing+Script"},{name:"Caveat",value:"Caveat, cursive",category:"google",googleFontName:"Caveat"},{name:"Shadows Into Light",value:'"Shadows Into Light", cursive',category:"google",googleFontName:"Shadows+Into+Light"},{name:"Satisfy",value:"Satisfy, cursive",category:"google",googleFontName:"Satisfy"},{name:"Indie Flower",value:'"Indie Flower", cursive',category:"google",googleFontName:"Indie+Flower"},{name:"Architects Daughter",value:'"Architects Daughter", cursive',category:"google",googleFontName:"Architects+Daughter"},{name:"Kalam",value:"Kalam, cursive",category:"google",googleFontName:"Kalam"},{name:"Amatic SC",value:'"Amatic SC", cursive',category:"google",googleFontName:"Amatic+SC"},{name:"Patrick Hand",value:'"Patrick Hand", cursive',category:"google",googleFontName:"Patrick+Hand"},{name:"Courgette",value:"Courgette, cursive",category:"google",googleFontName:"Courgette"},{name:"Roboto Mono",value:'"Roboto Mono", monospace',category:"google",googleFontName:"Roboto+Mono"},{name:"Source Code Pro",value:'"Source Code Pro", monospace',category:"google",googleFontName:"Source+Code+Pro"},{name:"Fira Code",value:'"Fira Code", monospace',category:"google",googleFontName:"Fira+Code"},{name:"JetBrains Mono",value:'"JetBrains Mono", monospace',category:"google",googleFontName:"JetBrains+Mono"},{name:"Space Mono",value:'"Space Mono", monospace',category:"google",googleFontName:"Space+Mono"},{name:"Courier Prime",value:'"Courier Prime", monospace',category:"google",googleFontName:"Courier+Prime"},{name:"Inconsolata",value:"Inconsolata, monospace",category:"google",googleFontName:"Inconsolata"},{name:"IBM Plex Mono",value:'"IBM Plex Mono", monospace',category:"google",googleFontName:"IBM+Plex+Mono"},{name:"Anonymous Pro",value:'"Anonymous Pro", monospace',category:"google",googleFontName:"Anonymous+Pro"},{name:"Overpass Mono",value:'"Overpass Mono", monospace',category:"google",googleFontName:"Overpass+Mono"},{name:"Creepster",value:'"Creepster", cursive',category:"google",googleFontName:"Creepster"},{name:"Frijole",value:'"Frijole", cursive',category:"google",googleFontName:"Frijole"},{name:"Spicy Rice",value:'"Spicy Rice", cursive',category:"google",googleFontName:"Spicy+Rice"},{name:"Ranchers",value:'"Ranchers", cursive',category:"google",googleFontName:"Ranchers"},{name:"Chewy",value:'"Chewy", cursive',category:"google",googleFontName:"Chewy"}],_l=[...Il,...zl],Rl=new Set;async function pp(i){return Rl.has(i)?Promise.resolve():new Promise((c,a)=>{const u=document.createElement("link");u.rel="stylesheet",u.href=`https://fonts.googleapis.com/css2?family=${i}:wght@400;700&display=swap`,u.onload=()=>{Rl.add(i),c()},u.onerror=()=>{console.error(`Failed to load Google Font: ${i}`),a(new Error(`Failed to load font: ${i}`))},document.head.appendChild(u)})}let Eu=!1;function hp(){if(Eu)return Promise.resolve();Eu=!0;const i=zl.filter(c=>c.googleFontName).map(c=>`family=${c.googleFontName}:wght@400;700`).join("&");return new Promise(c=>{const a=document.createElement("link");a.rel="stylesheet",a.href=`https://fonts.googleapis.com/css2?${i}&display=swap`,a.onload=()=>{zl.forEach(u=>{u.googleFontName&&Rl.add(u.googleFontName)}),c()},a.onerror=()=>c(),document.head.appendChild(a)})}function gp(i){return _l.find(c=>c.value===i)}async function mp(){try{if(!("queryLocalFonts"in window))return[];const i=await window.queryLocalFonts(),c=new Set,a=new Set(_l.map(f=>f.name.toLowerCase())),u=[];for(const f of i){const m=f.family,g=m.toLowerCase();c.has(g)||a.has(g)||(c.add(g),u.push({name:m,value:`"${m}"`,category:"local"}))}return u.sort((f,m)=>f.name.localeCompare(m.name)),u}catch{return[]}}const $u=4;function xp(i,c,a,u,f,m=1.2,g=$u,w=0,h="normal"){i.font=`${h} ${a*g}px ${u}`,typeof i.letterSpacing<"u"&&(i.letterSpacing=`${w*g}px`);const p=[],y=c.split(`
`);for(const N of y){if(!N.trim()){p.push("");continue}if(!f){p.push(N);continue}const D=N.split(" ");let F="";for(const j of D){const Y=F?`${F} ${j}`:j;i.measureText(Y).width/g>f&&F?(p.push(F),F=j):F=Y}F&&p.push(F)}let x=0;for(const N of p){const F=i.measureText(N).width/g;x=Math.max(x,F)}const E=a*m,C=p.length*E;return{width:Math.ceil(x),height:Math.ceil(C),lines:p}}async function Ps(i){const{text:c,fontSize:a,fontFamily:u,color:f,textAlign:m="left",maxWidth:g,lineHeight:w=1.2,disableTransparency:h=!1,letterSpacing:p=0,fontWeight:y="normal"}=i,x=gp(u);if(x?.category==="google"&&x.googleFontName)try{await pp(x.googleFontName),await new Promise(ee=>setTimeout(ee,100))}catch(ee){console.error("Failed to load Google Font, using fallback:",ee)}const C=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});if(!C)throw new Error("Failed to get canvas context");const N=h?1:$u,{width:D,height:F,lines:j}=xp(C,c,a,u,g,w,N,p,y),Y=10,H=Y*N,W=(D+Y*2)*N,M=(F+Y*2)*N,$=document.createElement("canvas");$.width=W,$.height=M;const X=$.getContext("2d",{willReadFrequently:!0});if(!X)throw new Error("Failed to get canvas context");X.font=`${y} ${a*N}px ${u}`,typeof X.letterSpacing<"u"&&(X.letterSpacing=`${p*N}px`),X.fillStyle=f,X.textBaseline="top",X.imageSmoothingEnabled=!h,X.imageSmoothingQuality=h?"low":"high";const Z=a*w*N;let A=H;for(const ee of j){if(!ee){A+=Z;continue}let J=H;if(m==="center"){const U=X.measureText(ee).width;J=(W-U)/2}else if(m==="right"){const U=X.measureText(ee).width;J=W-U-H}X.fillText(ee,J,A),A+=Z}if(h){const ee=X.getImageData(0,0,$.width,$.height),J=ee.data,U=parseInt(f.slice(1,3),16),me=parseInt(f.slice(3,5),16),V=parseInt(f.slice(5,7),16);for(let K=0;K<J.length;K+=4)J[K+3]>=128?(J[K+3]=255,J[K]=U,J[K+1]=me,J[K+2]=V):J[K+3]=0;X.putImageData(ee,0,0)}const B=document.createElement("canvas");B.width=D+Y*2,B.height=F+Y*2;const q=B.getContext("2d",{willReadFrequently:!0});if(!q)throw new Error("Failed to get final canvas context");return q.imageSmoothingEnabled=!h,q.imageSmoothingQuality=h?"low":"high",q.drawImage($,0,0,W,M,0,0,B.width,B.height),{dataUrl:B.toDataURL("image/png"),width:B.width,height:B.height}}function Du(i){return i.textContent!==void 0&&i.textContent!==null}function yp(i){return i.shapeType!==void 0&&i.shapeType!==null}const Pu={version:"1.0.0",projectName:"Untitled",created:new Date().toISOString(),modified:new Date().toISOString(),canvas:{width:3276,height:3276,backgroundColor:null,borderColor:"#000000",borderWidth:0,borderOpacity:1,borderEnabled:!0,shadowIntensity:.5,showCheckeredBackground:!1,dragInfoEnabled:!0},viewport:{zoom:100,panX:0,panY:0},grid:{enabled:!1,density:4},rulers:{enabled:!1,guides:[]},layers:[],metadata:{author:"",description:"",tags:[]}},Dl={past:[],future:[],maxSteps:50},Pl={activeTool:"select",showRulers:!1,showSelectionBorders:!0,showSelectionTools:!0,selectionBorderAnimationSpeed:.1,clipboardLayers:[],isDraggingLayer:!1,dragLayerId:null,dragStartX:0,dragStartY:0,dragOffsetX:0,dragOffsetY:0},_=sp()(ip(i=>({project:Pu,selectedLayerIds:[],isDirty:!1,history:Dl,ui:Pl,setProjectName:c=>{i(a=>({project:{...a.project,projectName:c,modified:new Date().toISOString()},isDirty:!0}))},setCanvasConfig:c=>{i(a=>({project:{...a.project,canvas:{...a.project.canvas,...c},modified:new Date().toISOString()},isDirty:!0}))},setViewport:c=>{i(a=>({project:{...a.project,viewport:{...a.project.viewport,...c}}}))},setProjectMetadata:c=>{i(a=>({project:{...a.project,metadata:{...a.project.metadata,...c},modified:new Date().toISOString()},isDirty:!0}))},addLayer:c=>{i(a=>({project:{...a.project,layers:[...a.project.layers,{...c,id:c.id||`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}],modified:new Date().toISOString()},isDirty:!0}))},removeLayer:c=>{i(a=>({project:{...a.project,layers:a.project.layers.filter(u=>u.id!==c),modified:new Date().toISOString()},selectedLayerIds:a.selectedLayerIds.filter(u=>u!==c),isDirty:!0}))},updateLayer:(c,a)=>{i(u=>({project:{...u.project,layers:u.project.layers.map(f=>f.id===c?{...f,...a}:f),modified:new Date().toISOString()},isDirty:!0}))},duplicateLayer:c=>{i(a=>{const u=a.project.layers.find(m=>m.id===c);if(!u)return a;const f={...u,id:`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`${u.name} (copy)`,zIndex:Math.max(...a.project.layers.map(m=>m.zIndex),0)+1};return{project:{...a.project,layers:[...a.project.layers,f],modified:new Date().toISOString()},isDirty:!0}})},moveLayer:(c,a,u)=>{i(f=>{const m=_.getState(),g=[...m.history.past,m.project];return g.length>m.history.maxSteps&&g.shift(),{project:{...f.project,layers:f.project.layers.map(w=>{if(w.id===c&&!w.locked){const h=Math.floor(w.x+a),p=Math.floor(w.y+u);return{...w,x:h,y:p}}return w}),modified:new Date().toISOString()},history:{...m.history,past:g,future:[]},isDirty:!0}})},reorderLayer:(c,a)=>{i(u=>{const f=u.project.layers.find(p=>p.id===c)?.zIndex;if(f===void 0)return u;const m=u.project.layers.map(p=>p.zIndex).sort((p,y)=>p-y),g=m.indexOf(f);if(a==="up"&&g===m.length-1||a==="down"&&g===0)return u;const w=a==="up"?m[g+1]:m[g-1],h=u.project.layers.find(p=>p.zIndex===w)?.id;return h?{project:{...u.project,layers:u.project.layers.map(p=>p.id===c?{...p,zIndex:w}:p.id===h?{...p,zIndex:f}:p),modified:new Date().toISOString()},isDirty:!0}:u})},reorderSelectedLayers:c=>{i(a=>{if(a.selectedLayerIds.length===0)return a;const u=a.project.layers.map(w=>w.zIndex).sort((w,h)=>w-h),f=a.project.layers.filter(w=>a.selectedLayerIds.includes(w.id)).map(w=>w.zIndex).sort((w,h)=>w-h),m=Math.min(...f),g=Math.max(...f);if(c==="up"&&g===u[u.length-1]||c==="down"&&m===u[0])return a;if(c==="up"){const w=u.find(h=>h>g);return w===void 0?a:{project:{...a.project,layers:a.project.layers.map(h=>a.selectedLayerIds.includes(h.id)?{...h,zIndex:w}:h.zIndex===w?{...h,zIndex:g}:h),modified:new Date().toISOString()},isDirty:!0}}else{const w=[...u].reverse().find(h=>h<m);return w===void 0?a:{project:{...a.project,layers:a.project.layers.map(h=>a.selectedLayerIds.includes(h.id)?{...h,zIndex:w}:h.zIndex===w?{...h,zIndex:m}:h),modified:new Date().toISOString()},isDirty:!0}}})},bringLayerToFront:c=>{i(a=>{const u=Math.max(...a.project.layers.map(f=>f.zIndex),0);return{project:{...a.project,layers:a.project.layers.map(f=>f.id===c?{...f,zIndex:u+1}:f),modified:new Date().toISOString()},isDirty:!0}})},sendLayerToBack:c=>{i(a=>{const u=Math.min(...a.project.layers.map(f=>f.zIndex),0);return{project:{...a.project,layers:a.project.layers.map(f=>f.id===c?{...f,zIndex:u-1}:f),modified:new Date().toISOString()},isDirty:!0}})},selectLayer:(c,a=!1)=>{i(u=>a?{selectedLayerIds:u.selectedLayerIds.includes(c)?u.selectedLayerIds.filter(f=>f!==c):[...u.selectedLayerIds,c]}:{selectedLayerIds:[c]})},selectAllLayers:()=>{i(c=>({selectedLayerIds:c.project.layers.map(a=>a.id)}))},deselectAllLayers:()=>{i({selectedLayerIds:[]})},selectLayerRange:(c,a)=>{i(u=>{const f=u.project.layers.map(y=>y.id),m=f.indexOf(c),g=f.indexOf(a);if(m===-1||g===-1)return u;const[w,h]=m<g?[m,g]:[g,m];return{selectedLayerIds:f.slice(w,h+1)}})},moveSelectedLayers:(c,a)=>{i(u=>({project:{...u.project,layers:u.project.layers.map(f=>{if(u.selectedLayerIds.includes(f.id)&&!f.locked){const m=Math.floor(f.x+c),g=Math.floor(f.y+a);return{...f,x:m,y:g}}return f}),modified:new Date().toISOString()},isDirty:!0}))},deleteSelectedLayers:()=>{i(c=>({project:{...c.project,layers:c.project.layers.filter(a=>!c.selectedLayerIds.includes(a.id)),modified:new Date().toISOString()},selectedLayerIds:[],isDirty:!0}))},toggleVisibilitySelected:()=>{i(c=>{const a=c.selectedLayerIds.every(u=>c.project.layers.find(f=>f.id===u)?.visible);return{project:{...c.project,layers:c.project.layers.map(u=>c.selectedLayerIds.includes(u.id)?{...u,visible:!a}:u),modified:new Date().toISOString()},isDirty:!0}})},startDraggingLayer:(c,a,u)=>{i(f=>({ui:{...f.ui,isDraggingLayer:!0,dragLayerId:c,dragStartX:a,dragStartY:u}}))},updateDragPosition:(c,a)=>{i(u=>{if(!u.ui.isDraggingLayer)return u;let f=c-u.ui.dragStartX,m=a-u.ui.dragStartY;return f=Math.round(f),m=Math.round(m),{ui:{...u.ui,dragOffsetX:f,dragOffsetY:m}}})},stopDraggingLayer:()=>{i(c=>{if(!c.ui.isDraggingLayer||!c.ui.dragLayerId)return c;const a=c.selectedLayerIds.includes(c.ui.dragLayerId)?c.selectedLayerIds:[c.ui.dragLayerId],u=c.ui.dragOffsetX,f=c.ui.dragOffsetY,m=u!==0||f!==0,w={project:{...c.project,layers:c.project.layers.map(h=>a.includes(h.id)&&!h.locked?{...h,x:Math.floor(h.x+u),y:Math.floor(h.y+f)}:h),modified:new Date().toISOString()},ui:{...c.ui,isDraggingLayer:!1,dragLayerId:null,dragOffsetX:0,dragOffsetY:0},isDirty:!0};if(m){const h=_.getState(),{viewport:p,...y}=h.project,x=[...h.history.past,y];return x.length>h.history.maxSteps&&x.shift(),{...w,history:{...h.history,past:x,future:[]},_lastHistoryPushAt:Date.now()}}return w})},pushHistory:()=>{i(c=>{const{viewport:a,...u}=c.project,f=[...c.history.past,u];return f.length>c.history.maxSteps&&f.shift(),{history:{...c.history,past:f,future:[]},_lastHistoryPushAt:Date.now()}})},undo:()=>{i(c=>{if(c.history.past.length===0)return c;const a=[...c.history.past],u=a.pop();if(!u)return c;const{viewport:f,...m}=c.project,g=[m,...c.history.future];return{project:{...u,viewport:c.project.viewport},history:{...c.history,past:a,future:g},_lastHistoryPushAt:Date.now()}})},redo:()=>{i(c=>{if(c.history.future.length===0)return c;const a=[...c.history.future],u=a.shift(),{viewport:f,...m}=c.project,g=[...c.history.past,m];return u?{project:{...u,viewport:c.project.viewport},history:{...c.history,past:g,future:a},_lastHistoryPushAt:Date.now()}:c})},setActiveTool:c=>{i(a=>({ui:{...a.ui,activeTool:c}}))},toggleGrid:()=>{i(c=>({project:{...c.project,grid:{...c.project.grid,enabled:!c.project.grid.enabled},modified:new Date().toISOString()},isDirty:!0}))},setGridDensity:c=>{i(a=>({project:{...a.project,grid:{...a.project.grid,density:Math.max(1,Math.min(8,c))},modified:new Date().toISOString()},isDirty:!0}))},toggleRulers:()=>{i(c=>({project:{...c.project,rulers:{...c.project.rulers,enabled:!c.project.rulers.enabled},modified:new Date().toISOString()},isDirty:!0}))},toggleSelectionBorders:()=>{i(c=>({ui:{...c.ui,showSelectionBorders:!c.ui.showSelectionBorders}}))},toggleSelectionTools:()=>{i(c=>({ui:{...c.ui,showSelectionTools:!c.ui.showSelectionTools}}))},setSelectionBorderAnimationSpeed:c=>{i(a=>({ui:{...a.ui,selectionBorderAnimationSpeed:Math.max(0,Math.min(1,c))}}))},copySelectedLayers:()=>{i(c=>({ui:{...c.ui,clipboardLayers:c.project.layers.filter(a=>c.selectedLayerIds.includes(a.id))}}))},copySelectedLayersToClipboard:async()=>{try{const c=_.getState(),a=c.project.layers.filter(m=>c.selectedLayerIds.includes(m.id));if(a.length===0){console.warn("No layers selected to copy");return}let u;if(a.length===1)u=dp(a[0].imageData);else{const m=a.sort((g,w)=>g.zIndex-w.zIndex);u=await fp(m)}const f=new ClipboardItem({"image/png":u});await navigator.clipboard.write([f])}catch(c){console.error("Failed to copy layers to clipboard:",c)}},pasteSelectedLayers:()=>{i(c=>{const a=Math.max(...c.project.layers.map(f=>f.zIndex),0),u=c.ui.clipboardLayers.map((f,m)=>({...f,id:`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,x:f.x+10,y:f.y+10,zIndex:a+m+1}));return{project:{...c.project,layers:[...c.project.layers,...u],modified:new Date().toISOString()},selectedLayerIds:u.map(f=>f.id),isDirty:!0}})},pasteFromClipboard:async()=>{try{if(navigator.clipboard){try{const c=await navigator.clipboard.read();for(const a of c){const u=Array.from(a.types).filter(f=>f.startsWith("image/"));if(u.length>0){const f=u[0],m=await a.getType(f),g=await Bu(m),w=new Image;w.src=g,await new Promise((y,x)=>{w.onload=()=>y(),w.onerror=()=>x(new Error("Failed to load image"))});const h=_.getState(),p=Math.max(...h.project.layers.map(y=>y.zIndex),0);_.setState(y=>({project:{...y.project,layers:[...y.project.layers,{id:`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:"Pasted Image",imageData:g,x:0,y:0,zIndex:p+1,visible:!0,locked:!1,opacity:1,width:w.naturalWidth,height:w.naturalHeight}],modified:new Date().toISOString()},isDirty:!0}));return}}}catch(c){console.debug("Image paste failed, trying text paste:",c)}try{const c=await navigator.clipboard.readText();if(c.trim()){const a=await Ps({text:c,fontSize:16,fontFamily:"Arial",color:"#000000",textAlign:"left",lineHeight:1.2}),u=_.getState(),f=Math.max(...u.project.layers.map(m=>m.zIndex),0);_.setState(m=>({project:{...m.project,layers:[...m.project.layers,{id:`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`Text: ${c.substring(0,20)}${c.length>20?"...":""}`,imageData:a.dataUrl,x:0,y:0,zIndex:f+1,visible:!0,locked:!1,opacity:1,width:a.width,height:a.height,textContent:c,fontSize:16,fontFamily:"Arial",fontColor:"#000000",textAlign:"left",lineHeight:1.2}],modified:new Date().toISOString()},isDirty:!0}))}}catch(c){console.debug("Text paste failed:",c)}}}catch(c){console.error("Clipboard paste error:",c)}},cropCanvasToLayers:()=>{i(c=>{if(c.project.layers.length===0)return console.warn("[DEBUG] No layers to crop to"),c;let a=1/0,u=1/0,f=-1/0,m=-1/0;c.project.layers.forEach(x=>{a=Math.min(a,x.x),u=Math.min(u,x.y),f=Math.max(f,x.x+x.width),m=Math.max(m,x.y+x.height)});const g=Math.ceil(f-a),w=Math.ceil(m-u),h=a,p=u;if(g<=0||w<=0)return console.warn("[DEBUG] Invalid bounds for crop"),c;console.log(`[DEBUG] Cropping canvas to layers: ${g}x${w} at offset (${h}, ${p})`);const y=c.project.layers.map(x=>({...x,x:x.x-h,y:x.y-p}));return{project:{...c.project,canvas:{...c.project.canvas,width:g,height:w},layers:y,modified:new Date().toISOString()},isDirty:!0}})},resetProject:()=>{i({project:Pu,selectedLayerIds:[],isDirty:!1,history:Dl,ui:Pl})},loadProject:c=>{const a={...c,layers:c.layers.filter(u=>u.id!=="__text_canvas_preview__"&&u.id!=="__shape_canvas_preview__")};i({project:a,selectedLayerIds:[],isDirty:!1,history:Dl,ui:Pl})},markDirty:()=>{i({isDirty:!0})},markClean:()=>{i({isDirty:!1})}}),{name:"CompositorStore",enabled:!0}));function vp({canvas:i,gridEnabled:c,viewport:a,canvasWidth:u,canvasHeight:f,gridDensity:m,canvasBorderEnabled:g}){const w=v.useRef(null),h=v.useRef(null);return v.useEffect(()=>{if(!w.current||!i||!h.current)return;const p=w.current,y=p.getContext("2d");if(!y)return;const x=50;if(!c||a.zoom<x){y.clearRect(0,0,p.width,p.height);return}const E=a.zoom/100;p.width=h.current.clientWidth,p.height=h.current.clientHeight,y.clearRect(0,0,p.width,p.height);let C=0;a.zoom<=x?C=0:a.zoom<150?C=(a.zoom-x)/100*.3:C=.4;let N=m;if(E<3){const J=9/(E*3);N=m*J}y.strokeStyle=`rgba(0, 0, 0, ${C})`,y.lineWidth=1;const D=i.getBoundingClientRect(),F=h.current.getBoundingClientRect();let j=D.left-F.left,Y=D.top-F.top,H=D.width,W=D.height;const M=g?1:0;j+=M,Y+=M,H-=M*2,W-=M*2,y.save(),y.beginPath(),y.rect(j,Y,H,W),y.clip();const $=H/u,X=W/f,Z=Math.max(0,Math.floor(-j/$)),A=Math.min(u,Math.ceil((p.width-j)/$)),B=Math.max(0,Math.floor(-Y/X)),q=Math.min(f,Math.ceil((p.height-Y)/X)),ue=Math.ceil(Z/N)*N;for(let J=ue;J<=A;J+=N){const U=Math.round(j+J*$)+.5;y.beginPath(),y.moveTo(U,Y),y.lineTo(U,Y+W),y.stroke()}const ee=Math.ceil(B/N)*N;for(let J=ee;J<=q;J+=N){const U=Math.round(Y+J*X)+.5;y.beginPath(),y.moveTo(j,U),y.lineTo(j+H,U),y.stroke()}y.restore()},[c,a,u,f,i,m,g]),o.jsx("div",{ref:h,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"hidden"},children:o.jsx("canvas",{ref:w,style:{position:"absolute",top:0,left:0,imageRendering:"pixelated"}})})}const wp=({offsetX:i,offsetY:c,mouseX:a,mouseY:u})=>o.jsx("div",{style:{position:"fixed",left:`${a+10}px`,top:`${u+10}px`,pointerEvents:"none",zIndex:1e3},children:o.jsxs("div",{className:"bg-panel-bg border border-border rounded px-2 py-1 text-xs text-gray-300 whitespace-nowrap shadow-lg",children:[o.jsxs("div",{children:["X: ",i>0?"+":"",i]}),o.jsxs("div",{children:["Y: ",c>0?"+":"",c]})]})});function sn(){const[i,c]=v.useState(()=>window.innerHeight>window.innerWidth);return v.useEffect(()=>{const a=()=>c(window.innerHeight>window.innerWidth);window.addEventListener("resize",a),window.addEventListener("orientationchange",a);const u=window.matchMedia("(orientation: portrait)"),f=m=>c(m.matches);return u.addEventListener("change",f),()=>{window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a),u.removeEventListener("change",f)}},[]),i}function bp(){const i=v.useRef(null),c=v.useRef(null),a=_(P=>P.project),u=_(P=>P.selectedLayerIds),f=_(P=>P.ui.showSelectionBorders),m=_(P=>P.ui.showSelectionTools),g=_(P=>P.ui.selectionBorderAnimationSpeed),w=_(P=>P.ui.isDraggingLayer),h=_(P=>P.ui.dragLayerId),p=_(P=>P.ui.dragOffsetX),y=_(P=>P.ui.dragOffsetY),x=_(P=>P.selectLayer),E=_(P=>P.deselectAllLayers),C=_(P=>P.startDraggingLayer),N=_(P=>P.updateDragPosition),D=_(P=>P.stopDraggingLayer),F=_(P=>P.setViewport),j=_(P=>P.removeLayer),Y=_(P=>P.updateLayer),[H,W]=v.useState(new Map),[M,$]=v.useState(!1),[X,Z]=v.useState({x:0,y:0}),[A,B]=v.useState(null),[q,ue]=v.useState({x:0,y:0}),ee=sn();v.useEffect(()=>{(async()=>{const te=new Map;for(const ce of a.layers)if(!H.has(ce.id)||H.get(ce.id)?.src!==ce.imageData)try{const se=new Image;se.src=ce.imageData,await new Promise((de,le)=>{se.onload=()=>de(),se.onerror=()=>le(new Error(`Failed to load image for layer: ${ce.name}`))}),te.set(ce.id,se)}catch{}W(ce=>new Map([...ce,...te]))})()},[a.layers]),v.useEffect(()=>{const P=c.current,te=i.current;if(!P||!te||a.viewport.zoom!==100||a.viewport.panX!==0||a.viewport.panY!==0)return;const ce=P.clientWidth,se=P.clientHeight,de=a.canvas.width,le=a.canvas.height,ye=ce/de*100*.9,we=se/le*100*.9,Me=Math.min(ye,we,100);F({zoom:Math.max(Me,10)})},[]),v.useEffect(()=>{const P=i.current;if(!P){console.warn("[DEBUG] Canvas element not found");return}const te=P.getContext("2d");if(!te){console.error("[DEBUG] Failed to get canvas context");return}if(te.imageSmoothingEnabled=!1,te.webkitImageSmoothingEnabled=!1,te.mozImageSmoothingEnabled=!1,P.width=a.canvas.width,P.height=a.canvas.height,te.clearRect(0,0,P.width,P.height),a.canvas.backgroundColor&&(te.fillStyle=a.canvas.backgroundColor,te.fillRect(0,0,P.width,P.height)),a.canvas.showCheckeredBackground&&!a.canvas.backgroundColor){const de=document.createElement("canvas");de.width=16,de.height=16;const le=de.getContext("2d");if(le){le.fillStyle="#ffffff",le.fillRect(0,0,16,16),le.fillStyle="#cccccc",le.fillRect(0,0,8,8),le.fillRect(8,8,8,8);const ye=te.createPattern(de,"repeat");ye&&(te.fillStyle=ye,te.fillRect(0,0,P.width,P.height))}}if(a.canvas.borderWidth&&a.canvas.borderWidth>0){const se=a.canvas.borderWidth;te.strokeStyle=a.canvas.borderColor,te.globalAlpha=a.canvas.borderOpacity,te.lineWidth=se*2;const de=se/2;te.strokeRect(de,de,P.width-se,P.height-se),te.globalAlpha=1}const ce=[...a.layers].filter(se=>se.visible).sort((se,de)=>se.zIndex-de.zIndex);for(const se of ce){const de=H.get(se.id);if(!de){console.warn(`[DEBUG] Image not loaded for layer: ${se.name}`);continue}const le=_.getState(),ye=le.ui.isDraggingLayer&&(le.ui.dragLayerId===se.id||le.selectedLayerIds.includes(se.id)&&le.selectedLayerIds.includes(le.ui.dragLayerId));let we=Math.floor(se.x),Me=Math.floor(se.y);ye&&(we+=le.ui.dragOffsetX,Me+=le.ui.dragOffsetY);const _e=te.globalAlpha;te.globalAlpha=se.opacity!==void 0?se.opacity:1,te.drawImage(de,we,Me),te.globalAlpha=_e}},[a,H,w,h,p,y]);const J=(P,te)=>{const ce=c.current;if(!ce)return{x:0,y:0};const se=ce.getBoundingClientRect(),de=P-se.left-20,le=te-se.top-20,ye=se.width-40,we=se.height-40,Me=ye/2,_e=we/2,Ge=de-Me,Ke=le-_e,Xe=a.viewport.zoom/100,yt=Ge/Xe,He=Ke/Xe,G=a.canvas.width/2,Ie=a.canvas.height/2,Ee=G+yt+a.viewport.panX,We=Ie+He+a.viewport.panY;return{x:Ee,y:We}},U=P=>{if(!i.current){console.warn("[DEBUG] Canvas ref not available");return}if(P.button===1){P.preventDefault(),$(!0),Z({x:P.clientX,y:P.clientY});return}if(P.button!==0)return;const{x:ce,y:se}=J(P.clientX,P.clientY),de=[...a.layers].filter(le=>le.visible).sort((le,ye)=>ye.zIndex-le.zIndex);for(const le of de)if(ce>=le.x&&ce<le.x+le.width&&se>=le.y&&se<le.y+le.height){if(le.locked){x(le.id,P.ctrlKey||P.metaKey);return}const ye=P.ctrlKey||P.metaKey;u.includes(le.id)&&!ye||x(le.id,ye),C(le.id,ce,se);return}E(),$(!0),Z({x:P.clientX,y:P.clientY})},me=P=>{if(!i.current)return;ue({x:P.clientX,y:P.clientY});const{x:ce,y:se}=J(P.clientX,P.clientY);if(B({x:Math.floor(ce),y:Math.floor(se)}),M){const le=a.viewport.zoom/100,ye=P.clientX-X.x,we=P.clientY-X.y,Me=a.viewport.panX-ye/le,_e=a.viewport.panY-we/le;F({panX:Me,panY:_e}),Z({x:P.clientX,y:P.clientY});return}_.getState().ui.isDraggingLayer&&N(ce,se)},V=()=>{$(!1),D()},K=P=>{P.preventDefault();const te=P.deltaY>0?-1:1,ce=a.viewport.zoom,se=[25,33,50,66,75,100,125,150,200,400,800,1600,3200];let de=ce;te>0?de=se.find(le=>le>ce)||se[se.length-1]:de=[...se].reverse().find(le=>le<ce)||se[0],F({zoom:de})},Q=v.useRef({lastTouchDist:0,lastTouchCenter:{x:0,y:0},isTouching:!1,singleTouch:!1}),T=P=>{if(P.touches.length===2){P.preventDefault();const te=P.touches[0].clientX-P.touches[1].clientX,ce=P.touches[0].clientY-P.touches[1].clientY;Q.current.lastTouchDist=Math.hypot(te,ce),Q.current.lastTouchCenter={x:(P.touches[0].clientX+P.touches[1].clientX)/2,y:(P.touches[0].clientY+P.touches[1].clientY)/2},Q.current.isTouching=!0,Q.current.singleTouch=!1}else P.touches.length===1&&(Q.current.lastTouchCenter={x:P.touches[0].clientX,y:P.touches[0].clientY},Q.current.singleTouch=!0,Q.current.isTouching=!0)},S=P=>{if(P.touches.length===2&&Q.current.isTouching){P.preventDefault();const te=P.touches[0].clientX-P.touches[1].clientX,ce=P.touches[0].clientY-P.touches[1].clientY,se=Math.hypot(te,ce),de={x:(P.touches[0].clientX+P.touches[1].clientX)/2,y:(P.touches[0].clientY+P.touches[1].clientY)/2},le=Q.current.lastTouchDist,ye=Q.current.lastTouchCenter;if(le>0){const Ge=se/le,Ke=a.viewport.zoom,Xe=Math.max(10,Math.min(3200,Math.round(Ke*Ge)));Xe!==Ke&&F({zoom:Xe})}const we=de.x-ye.x,Me=de.y-ye.y,_e=a.viewport.zoom/100;F({panX:a.viewport.panX-we/_e,panY:a.viewport.panY-Me/_e}),Q.current.lastTouchDist=se,Q.current.lastTouchCenter=de,Q.current.singleTouch=!1}else if(P.touches.length===1&&Q.current.singleTouch){const te=P.touches[0],ce=Q.current.lastTouchCenter,se=te.clientX-ce.x,de=te.clientY-ce.y,le=a.viewport.zoom/100;F({panX:a.viewport.panX-se/le,panY:a.viewport.panY-de/le}),Q.current.lastTouchCenter={x:te.clientX,y:te.clientY}}},z=()=>{Q.current.isTouching=!1,Q.current.singleTouch=!1,Q.current.lastTouchDist=0};return o.jsxs("div",{ref:c,id:"canvas-renderer",className:"relative w-full h-full bg-canvas-bg overflow-hidden cursor-crosshair touch-none",style:{paddingTop:"20px",paddingLeft:"20px"},onMouseDown:U,onMouseMove:me,onMouseUp:V,onMouseLeave:V,onWheel:K,onTouchStart:T,onTouchMove:S,onTouchEnd:z,onTouchCancel:z,children:[o.jsxs("div",{className:"w-full h-full flex items-center justify-center",style:{width:"calc(100% - 20px)",height:"calc(100% - 20px)",overflowX:"auto",overflowY:"auto"},children:[o.jsxs("div",{style:{transform:`translate(${-a.viewport.panX*(a.viewport.zoom/100)}px, ${-a.viewport.panY*(a.viewport.zoom/100)}px) scale(${a.viewport.zoom/100})`,transformOrigin:"center center",position:"absolute"},children:[o.jsx("canvas",{ref:i,style:{imageRendering:"pixelated",backfaceVisibility:"hidden",WebkitFontSmoothing:"antialiased",outline:a.canvas.borderEnabled?"1px solid rgb(75, 85, 99)":"none",outlineOffset:"0px",boxShadow:a.canvas.shadowIntensity>0?`0 10px 40px rgba(0, 0, 0, ${.5*a.canvas.shadowIntensity})`:"none"}}),f&&u.length>0&&o.jsxs("svg",{width:a.canvas.width,height:a.canvas.height,style:{position:"absolute",top:0,left:0,pointerEvents:"none",overflow:"visible",display:"block"},children:[a.layers.map(P=>{if(!u.includes(P.id))return null;const te=w&&(h===P.id||u.includes(h));let ce=Math.floor(P.x),se=Math.floor(P.y);te&&(ce+=p,se+=y);const de=P.textContent!==void 0,le=P.shapeType!==void 0,ye=(de||le)&&u.length===1,we=100/a.viewport.zoom,_e=we*1.7,Ge=.25*we,Ke=ce+4*we,Xe=ce+18*we,yt=ce+32*we,He=se-14*we;return o.jsxs("g",{children:[o.jsx("rect",{x:ce-.12,y:se-.25,width:P.width+.3,height:P.height+.3,fill:"none",stroke:"#b0b0b0",strokeWidth:Ge,strokeDasharray:`${4*we},${4*we}`,style:{animation:g>0?`marching-ants ${8/(.125*g)/1e3}s linear infinite`:"none"}}),o.jsx("rect",{x:ce-.12,y:se-.25,width:P.width+.3,height:P.height+.3,fill:"none",stroke:"#505050",strokeWidth:Ge,strokeDasharray:`${4*we},${4*we}`,strokeDashoffset:2*we,style:{animation:g>0?`marching-ants ${8/(.125*g)/1e3}s linear infinite`:"none"}}),m&&u.includes(P.id)&&u.length===1&&o.jsxs("g",{className:"selection-tool-icon",transform:`translate(${Ke}, ${He}) scale(${_e})`,style:{cursor:"pointer",pointerEvents:"auto"},onClick:G=>{G.stopPropagation(),j(P.id)},onMouseDown:G=>G.stopPropagation(),children:[o.jsx("circle",{cx:"6",cy:"6",r:"5",fill:"none",stroke:"none",pointerEvents:"all"}),o.jsx("path",{d:"M4 4l16 16M20 4l-16 16",stroke:"#9ca3af",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",transform:"scale(0.4)",pointerEvents:"none"})]}),m&&u.includes(P.id)&&u.length===1&&o.jsxs("g",{className:"selection-tool-icon",transform:`translate(${Xe}, ${He}) scale(${_e})`,style:{cursor:"pointer",pointerEvents:"auto"},onClick:G=>{G.stopPropagation(),Y(P.id,{visible:!P.visible})},onMouseDown:G=>G.stopPropagation(),children:[o.jsx("circle",{cx:"6",cy:"6",r:"5",fill:"none",stroke:"none",pointerEvents:"all"}),P.visible?o.jsx("path",{d:"M12 4.5C7.244 4.5 3.226 7.662 1.934 12c1.292 4.338 5.31 7.5 10.066 7.5s8.773-3.162 10.065-7.5c-1.292-4.338-5.31-7.5-10.065-7.5zm0 12a4.5 4.5 0 110-9 4.5 4.5 0 010 9z",fill:"#9ca3af",stroke:"#4b5563",strokeWidth:"0.5",transform:"scale(0.4)",pointerEvents:"none"}):o.jsxs("g",{pointerEvents:"none",children:[o.jsx("circle",{cx:"6",cy:"6",r:"4",fill:"none",stroke:"#9ca3af",strokeWidth:"0.5"}),o.jsx("line",{x1:"2",y1:"2",x2:"10",y2:"10",stroke:"#9ca3af",strokeWidth:"0.5"})]})]}),m&&ye&&o.jsxs("g",{className:"selection-tool-icon",transform:`translate(${yt}, ${He}) scale(${_e})`,style:{cursor:"pointer",pointerEvents:"auto"},onClick:G=>{G.stopPropagation(),de?window.openTextLayerModal?.(P):le&&window.openShapeModal?.(P)},onMouseDown:G=>G.stopPropagation(),children:[o.jsx("circle",{cx:"6",cy:"6",r:"5",fill:"none",stroke:"none",pointerEvents:"all"}),o.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z",fill:"#9ca3af",stroke:"#4b5563",strokeWidth:"0.5",transform:"scale(0.4)",pointerEvents:"none"})]})]},P.id)}),o.jsx("style",{children:`
                @keyframes marching-ants {
                  0% {
                    stroke-dashoffset: 0;
                  }
                  100% {
                    stroke-dashoffset: ${-8*(100/a.viewport.zoom)};
                  }
                }
                .selection-tool-icon {
                  opacity: 0.6;
                  transition: opacity 0.2s ease, filter 0.2s ease;
                }
                .selection-tool-icon:hover {
                  opacity: 1;
                  filter: drop-shadow(0 0 4px rgba(156, 163, 175, 0.8));
                }
              `})]})]}),o.jsx(vp,{canvas:i.current,gridEnabled:a.grid.enabled,viewport:a.viewport,canvasWidth:a.canvas.width,canvasHeight:a.canvas.height,gridDensity:a.grid.density,canvasBorderEnabled:a.canvas.borderEnabled})]}),o.jsxs("div",{id:"canvas-status-bar",className:`absolute bottom-4 ${ee?"left-16":"right-4"} bg-panel-bg border border-border rounded px-3 py-2 text-xs text-gray-400 space-y-1`,"aria-label":"Canvas status",children:[o.jsxs("div",{children:["Canvas: ",a.canvas.width,"x",a.canvas.height]}),o.jsxs("div",{children:["Zoom: ",a.viewport.zoom,"%"]}),o.jsxs("div",{children:["Layers: ",a.layers.length]}),A&&o.jsxs("div",{children:["Coords: (",A.x,", ",A.y,")"]}),o.jsx("div",{className:"text-gray-500 text-xs mt-2 pt-2 border-t border-border",children:"Middle-click to pan"})]}),u.length>0&&o.jsxs("div",{id:"canvas-selection-info",className:"absolute top-4 right-4 bg-panel-bg border border-blue-600 rounded px-3 py-2 text-xs text-blue-400","aria-live":"polite",children:["Selected: ",u.length," layer",u.length!==1?"s":""]}),w&&a.canvas.dragInfoEnabled&&o.jsx(wp,{offsetX:p,offsetY:y,mouseX:q.x,mouseY:q.y})]})}const jp="1.0.0",Uu="1.0.0";function Hu(i){const c=i.layers.filter(u=>u.id!=="__text_canvas_preview__"&&u.id!=="__shape_canvas_preview__"),a={...i,layers:c,modified:new Date().toISOString()};return JSON.stringify(a,null,2)}async function Al(i){try{const c=JSON.parse(i);if(!c.version)throw new Error("Invalid project file: missing version field");if(!Sp(c.version))throw new Error(`Project version ${c.version} is not supported. Current version: ${jp}, minimum supported: ${Uu}`);return c.layers&&(c.layers=c.layers.filter(a=>a.id!=="__text_canvas_preview__"&&a.id!=="__shape_canvas_preview__")),Np(c),await Cp(c.layers),c}catch(c){throw console.error("[DEBUG] Project deserialization failed:",c),c}}function Sp(i){const[c,a]=i.split(".").map(Number),[u,f]=Uu.split(".").map(Number);return c>u||c<u?!1:a>=f}function Np(i){const c=["version","canvas","layers","viewport","grid","rulers"];for(const a of c)if(!(a in i))throw new Error(`Invalid project file: missing required field '${a}'`);if(typeof i.canvas.width!="number"||i.canvas.width<=0)throw new Error("Invalid project file: canvas width must be a positive number");if(typeof i.canvas.height!="number"||i.canvas.height<=0)throw new Error("Invalid project file: canvas height must be a positive number");if(!Array.isArray(i.layers))throw new Error("Invalid project file: layers must be an array");for(let a=0;a<i.layers.length;a++){const u=i.layers[a],f=["id","name","imageData","x","y","zIndex","visible","locked","width","height"];for(const m of f)if(!(m in u))throw new Error(`Invalid layer ${a}: missing required field '${m}'`);if(typeof u.x!="number"||typeof u.y!="number")throw new Error(`Invalid layer ${a}: x and y must be numbers`);if(!u.imageData.startsWith("data:image/"))throw new Error(`Invalid layer ${a}: imageData must be a valid data URL`)}}async function Cp(i){for(let c=0;c<i.length;c++){const a=i[c];try{await Wu(a.imageData)}catch(u){throw new Error(`Failed to load image for layer ${c} (${a.name}): ${u instanceof Error?u.message:"Unknown error"}`)}}}function Wu(i){return new Promise((c,a)=>{const u=new Image,f=setTimeout(()=>{a(new Error("Image load timeout"))},5e3);u.onload=()=>{clearTimeout(f),c(u)},u.onerror=()=>{clearTimeout(f),a(new Error("Failed to load image"))},u.src=i})}async function kp(i,c,a,u=1,f=null){const m=document.createElement("canvas");m.width=c*u,m.height=a*u;const g=m.getContext("2d");if(!g)throw new Error("Failed to get canvas context");g.imageSmoothingEnabled=!1,g.webkitImageSmoothingEnabled=!1,g.mozImageSmoothingEnabled=!1,g.scale(u,u),f&&(g.fillStyle=f,g.fillRect(0,0,c,a));const w=[...i].filter(h=>h.visible).sort((h,p)=>h.zIndex-p.zIndex);for(const h of w)try{const p=await Wu(h.imageData);g.drawImage(p,h.x,h.y)}catch(p){console.warn(`Failed to export layer ${h.name}:`,p)}return new Promise(h=>{m.toBlob(p=>{if(!p)throw new Error("Failed to create PNG blob");h(p)},"image/png")})}function Lu(){const i=v.useRef(null),c=_(g=>g.addLayer),a=_(g=>g.loadProject),u=_(g=>g.markClean),f=async g=>{const w=g.currentTarget.files;if(!w){console.warn("[DEBUG] No files selected");return}for(const h of Array.from(w))try{if(h.name.toLowerCase().endsWith(".pixcomp"))try{const C=await h.text(),N=await Al(C);a(N),u(),i.current&&(i.current.value="");return}catch(C){console.error("[DEBUG] Load project failed:",C),alert(`Error loading project: ${C instanceof Error?C.message:"Unknown error"}`);continue}if(!["image/png","image/gif","image/bmp","image/jpeg"].includes(h.type)){console.warn(`[DEBUG] Unsupported file type: ${h.type}`),alert(`Unsupported file type: ${h.type}. Please use .pixcomp, PNG, GIF, BMP, or JPEG.`);continue}const p=await new Promise((C,N)=>{const D=new FileReader;D.onload=F=>C(F.target?.result),D.onerror=()=>N(new Error("Failed to read file")),D.readAsDataURL(h)}),y=new Image;y.src=p,await new Promise((C,N)=>{y.onload=()=>C(),y.onerror=()=>N(new Error("Failed to load image"))});const x=y.naturalWidth,E=y.naturalHeight;c({name:h.name,imageData:p,x:0,y:0,zIndex:_.getState().project.layers.length,visible:!0,locked:!1,opacity:1,width:x,height:E})}catch(p){alert(`Error loading image ${h.name}: ${p instanceof Error?p.message:"Unknown error"}`)}i.current&&(i.current.value="")},m=async g=>{g.preventDefault();const w=g.clipboardData?.items;if(w){for(let h=0;h<w.length;h++){const p=w[h];if(p.type.startsWith("image/"))try{const y=p.getAsFile();if(!y)continue;const x=await Bu(y),E=new Image;E.src=x,await new Promise((N,D)=>{E.onload=()=>N(),E.onerror=()=>D(new Error("Failed to load image"))});const C=Math.max(..._.getState().project.layers.map(N=>N.zIndex),0);c({name:"Pasted Image",imageData:x,x:0,y:0,zIndex:C+1,visible:!0,locked:!1,opacity:1,width:E.naturalWidth,height:E.naturalHeight});break}catch(y){console.error("Error pasting image:",y)}}if(g.clipboardData?.types.includes("text/plain"))try{const h=g.clipboardData.getData("text/plain");if(h.trim()){const p=await Ps({text:h,fontSize:16,fontFamily:"Arial",color:"#000000",textAlign:"left",lineHeight:1.2}),y=Math.max(..._.getState().project.layers.map(x=>x.zIndex),0);c({id:`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`Text: ${h.substring(0,20)}${h.length>20?"...":""}`,imageData:p.dataUrl,x:0,y:0,zIndex:y+1,visible:!0,locked:!1,opacity:1,width:p.width,height:p.height,textContent:h,fontSize:16,fontFamily:"Arial",fontColor:"#000000",textAlign:"left",lineHeight:1.2})}}catch(h){console.error("Error pasting text:",h)}}};return o.jsxs("div",{id:"canvas-container",className:"w-full h-full flex flex-col relative",onPaste:m,children:[o.jsx("div",{className:"flex-1 relative overflow-hidden","data-region":"canvas",children:o.jsx(bp,{})}),_(g=>g.project.layers.length===0)&&o.jsx("div",{id:"canvas-upload-zone",onClick:()=>i.current?.click(),className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 cursor-pointer hover:bg-opacity-40 transition-all z-10",role:"button","aria-label":"Upload images",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-4xl mb-4",children:""}),o.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:"Click to upload images or drag & drop"}),o.jsx("div",{className:"text-sm text-gray-400",children:"Supported: .pixcomp, PNG, GIF, BMP, JPEG"})]})}),o.jsx("input",{ref:i,id:"input-canvas-upload",type:"file",multiple:!0,accept:".pixcomp,image/png,image/gif,image/bmp,image/jpeg",onChange:f,className:"hidden","aria-label":"Upload images"})]})}let Bt=null;function Ep({layer:i,isSelected:c}){const a=_(U=>U.selectLayer),u=_(U=>U.selectLayerRange),f=_(U=>U.updateLayer),m=_(U=>U.removeLayer),g=_(U=>U.reorderLayer),w=_(U=>U.bringLayerToFront),h=_(U=>U.sendLayerToBack),p=_(U=>U.duplicateLayer),[y,x]=v.useState(!1),[E,C]=v.useState(i.name),[N,D]=v.useState(!1),F=v.useRef(null);v.useEffect(()=>{const U=()=>{Bt&&(Bt=null,D(!1))};document.addEventListener("mouseup",U);const me=V=>{(V.clientY<0||V.clientX<0||V.clientX>window.innerWidth||V.clientY>window.innerHeight)&&Bt&&(Bt=null,D(!1))};return document.addEventListener("mousemove",me),()=>{document.removeEventListener("mouseup",U),document.removeEventListener("mousemove",me)}},[]);const j=U=>{const me=U.ctrlKey||U.metaKey;if(U.shiftKey&&_.getState().selectedLayerIds.length>0){const K=_.getState().selectedLayerIds[_.getState().selectedLayerIds.length-1];u(K,i.id)}else a(i.id,me)},Y=U=>{U.stopPropagation(),a(i.id,!0)},H=U=>{U.target.closest("button")||y||(Bt=i.id,c||a(i.id,!1))},W=()=>{if(!Bt||Bt===i.id){D(!1);return}D(!0);const U=_.getState().project.layers.find(V=>V.id===Bt),me=U&&U.zIndex<i.zIndex?"up":"down";g(Bt,me)},M=()=>{D(!1)},$=()=>{Bt&&(Bt=null)},X=U=>{U.stopPropagation(),f(i.id,{visible:!i.visible})},Z=U=>{U.stopPropagation(),f(i.id,{locked:!i.locked})},A=()=>{E.trim()?f(i.id,{name:E.trim()}):C(i.name),x(!1)},B=U=>{U.key==="Enter"?A():U.key==="Escape"&&(C(i.name),x(!1))},q=U=>{U.stopPropagation(),m(i.id)},ue=U=>{U.stopPropagation(),p(i.id)},ee=U=>{U.stopPropagation(),w(i.id)},J=U=>{U.stopPropagation(),h(i.id)};return o.jsxs("div",{ref:F,id:`layer-item-${i.id}`,onClick:j,onMouseDown:H,onMouseEnter:W,onMouseLeave:M,onMouseUp:$,title:"Click to select  Ctrl/Cmd+Click for multi-select  Shift+Click for range select","aria-label":`Layer: ${i.name}`,"aria-selected":c,role:"option",className:`group p-2 rounded border transition-all cursor-pointer select-none ${N?"bg-green-900 border-green-400 scale-105":""} ${c?"bg-blue-900 border-blue-500 text-white":"bg-panel-bg border-border text-gray-300 hover:bg-gray-800"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("button",{id:`btn-layer-select-${i.id}`,onClick:Y,onMouseDown:U=>U.stopPropagation(),className:`w-4 h-4 flex-shrink-0 rounded border-2 flex items-center justify-center transition-colors ${c?"bg-white border-white":"bg-gray-700 border-gray-600 hover:border-gray-500"}`,title:"Select/deselect this layer","aria-label":c?`Deselect ${i.name}`:`Select ${i.name}`,children:c&&o.jsx("svg",{className:"w-3 h-3 text-black",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),o.jsxs("div",{className:"w-8 h-8 flex-shrink-0 bg-canvas-bg border border-gray-600 rounded overflow-hidden relative",children:[o.jsx("img",{src:i.imageData,alt:i.name,className:"w-full h-full object-contain",style:{imageRendering:"pixelated"}}),Du(i)&&o.jsx("div",{className:"absolute bottom-0 right-0 bg-blue-600 text-white text-[8px] font-bold px-1 rounded-tl",title:"Text Layer",children:"T"})]}),o.jsx("div",{className:"flex-1 min-w-0",children:y?o.jsx("input",{id:`input-layer-name-${i.id}`,autoFocus:!0,type:"text",value:E,onChange:U=>C(U.target.value),onBlur:A,onKeyDown:B,onClick:U=>U.stopPropagation(),className:"w-full px-1 py-0 bg-canvas-bg border border-blue-400 rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-300",placeholder:"Layer name...","aria-label":"Layer name"}):o.jsx("span",{className:"text-xs font-medium truncate block",title:i.name,children:i.name})}),!y&&o.jsx("button",{id:`btn-layer-rename-${i.id}`,onClick:U=>{U.stopPropagation(),C(i.name),x(!0)},className:"w-4 h-4 flex items-center justify-center flex-shrink-0 rounded transition-colors hover:bg-gray-600 opacity-0 group-hover:opacity-100",title:"Rename layer","aria-label":`Rename ${i.name}`,children:o.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),o.jsx("button",{id:`btn-layer-visibility-${i.id}`,onClick:X,className:"w-5 h-5 flex items-center justify-center flex-shrink-0 rounded transition-colors hover:bg-gray-600",title:i.visible?"Hide layer":"Show layer","aria-label":i.visible?`Hide ${i.name}`:`Show ${i.name}`,children:i.visible?o.jsxs("svg",{className:"w-4 h-4 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20",children:[o.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),o.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):o.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-5.838 1.834l-2.455-2.541zM12.305 15.93A9.959 9.959 0 0110 15c-4.478 0-8.268-2.943-9.542-7a9.88 9.88 0 011.964-2.964l2.386 2.386c-.078.464-.12.94-.12 1.424 0 3.314 2.686 6 6 6a5.975 5.975 0 002.717-.632l2.472 2.472z",clipRule:"evenodd"})})}),o.jsx("button",{id:`btn-layer-lock-${i.id}`,onClick:Z,className:"w-5 h-5 flex items-center justify-center flex-shrink-0 rounded transition-colors hover:bg-gray-600",title:i.locked?"Unlock layer":"Lock layer","aria-label":i.locked?`Unlock ${i.name}`:`Lock ${i.name}`,children:i.locked?o.jsx("svg",{className:"w-4 h-4 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}):o.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v5a2 2 0 002 2h10a2 2 0 002-2v-5a2 2 0 00-2-2V7a5 5 0 00-5-5zm0 2a3 3 0 013 3v2H7V7a3 3 0 013-3z"})})})]}),o.jsxs("div",{className:"text-xs text-gray-500 px-10 mb-2",children:[i.width,"",i.height,"  z:",i.zIndex]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[Du(i)&&o.jsx("button",{id:`btn-layer-edit-text-${i.id}`,onClick:U=>{U.stopPropagation(),window.openTextLayerModal?.(i)},className:"flex-1 px-1 py-1 text-xs bg-blue-700 hover:bg-blue-600 rounded transition-colors flex items-center justify-center",title:"Edit text","aria-label":`Edit text for ${i.name}`,children:o.jsx("span",{className:"font-bold text-sm",children:"T"})}),yp(i)&&o.jsx("button",{id:`btn-layer-edit-shape-${i.id}`,onClick:U=>{U.stopPropagation(),window.openShapeModal?.(i)},className:"flex-1 px-1 py-1 text-xs bg-purple-700 hover:bg-purple-600 rounded transition-colors flex items-center justify-center",title:"Edit shape","aria-label":`Edit shape for ${i.name}`,children:""}),o.jsx("button",{id:`btn-layer-bring-front-${i.id}`,onClick:ee,className:"flex-1 px-1 py-1 text-xs bg-gray-700 hover:bg-gray-600 rounded transition-colors flex items-center justify-center",title:"Bring to front","aria-label":`Bring ${i.name} to front`,children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})})}),o.jsx("button",{id:`btn-layer-send-back-${i.id}`,onClick:J,className:"flex-1 px-1 py-1 text-xs bg-gray-700 hover:bg-gray-600 rounded transition-colors flex items-center justify-center",title:"Send to back","aria-label":`Send ${i.name} to back`,children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 9l-5 5m0 0l-5-5m5 5V2"})})}),o.jsx("button",{id:`btn-layer-duplicate-${i.id}`,onClick:ue,className:"flex-1 px-1 py-1 text-xs bg-blue-700 hover:bg-blue-600 rounded transition-colors flex items-center justify-center",title:"Duplicate layer","aria-label":`Duplicate ${i.name}`,children:o.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[o.jsx("path",{d:"M4 4a2 2 0 012-2h6a2 2 0 012 2v12a1 1 0 110 2h-6a2 2 0 01-2-2V4z"}),o.jsx("path",{d:"M14 4a2 2 0 00-2-2v12a2 2 0 002 2h2a2 2 0 002-2V4h-4z"})]})}),o.jsx("button",{id:`btn-layer-remove-${i.id}`,onClick:q,className:"flex-1 px-1 py-1 text-xs bg-red-700 hover:bg-red-600 rounded transition-colors flex items-center justify-center",title:"Remove layer","aria-label":`Remove ${i.name}`,children:o.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]})}const Yu="pixelconnect-preferences";function Ls(){try{const i=localStorage.getItem(Yu);if(i)return JSON.parse(i)}catch(i){console.warn("[DEBUG] Failed to load preferences from localStorage:",i)}return{}}function Ol(i){try{localStorage.setItem(Yu,JSON.stringify(i))}catch(c){console.warn("[DEBUG] Failed to save preferences to localStorage:",c)}}function Dp(){v.useEffect(()=>{const i=Ls();i.gridDensity!==void 0&&_.getState().setGridDensity(i.gridDensity),i.gridEnabled!==void 0&&_.getState().project.grid.enabled!==i.gridEnabled&&_.getState().toggleGrid(),i.showSelectionBorders!==void 0&&_.getState().ui.showSelectionBorders!==i.showSelectionBorders&&_.getState().toggleSelectionBorders(),i.selectionBorderAnimationSpeed!==void 0&&_.getState().setSelectionBorderAnimationSpeed(i.selectionBorderAnimationSpeed);const c={};i.canvasBorderColor!==void 0&&(c.borderColor=i.canvasBorderColor),i.canvasBorderWidth!==void 0&&(c.borderWidth=i.canvasBorderWidth),i.canvasBorderOpacity!==void 0&&(c.borderOpacity=i.canvasBorderOpacity),Object.keys(c).length>0&&_.getState().setCanvasConfig(c)},[])}function Pp(){const i=_(N=>N.project.canvas),c=_(N=>N.project.layers),a=_(N=>N.setCanvasConfig),u=_(N=>N.cropCanvasToLayers),[f,m]=v.useState(!1),[g,w]=v.useState(String(i.width)),[h,p]=v.useState(String(i.height)),y=N=>{if(w(N),N!==""&&N!=="-"){const D=parseInt(N,10);!isNaN(D)&&D>0&&a({width:D})}},x=N=>{if(p(N),N!==""&&N!=="-"){const D=parseInt(N,10);!isNaN(D)&&D>0&&a({height:D})}};v.useEffect(()=>{w(String(i.width))},[i.width]),v.useEffect(()=>{p(String(i.height))},[i.height]),v.useEffect(()=>{const N=Ls();N.canvasBorderEnabled=i.borderEnabled,N.canvasShadowIntensity=i.shadowIntensity,Ol(N)},[i.borderEnabled,i.shadowIntensity]);const E=N=>{N==="transparent"?a({backgroundColor:null}):N.startsWith("#")&&a({backgroundColor:N})},C=N=>{const[D,F]=N.split("x").map(Number);!isNaN(D)&&!isNaN(F)&&D>0&&F>0&&a({width:D,height:F})};return o.jsxs("div",{className:"border-t border-border bg-gray-850","data-region":"canvas-settings",children:[o.jsxs("button",{id:"btn-toggle-canvas-settings",onClick:()=>m(!f),className:"w-full px-3 py-2 flex items-center justify-between text-xs font-semibold text-gray-300 hover:bg-gray-800 transition-colors group","aria-label":f?"Expand canvas settings":"Collapse canvas settings","aria-expanded":!f,children:[o.jsx("span",{children:"Canvas"}),o.jsx("span",{className:`text-gray-400 transition-transform group-hover:drop-shadow-lg group-hover:text-gray-200 ${f?"":"rotate-180"}`,children:""})]}),!f&&o.jsxs("div",{className:"p-3 space-y-3 bg-gray-850",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Common Sizes"}),o.jsxs("select",{id:"select-canvas-size",onChange:N=>C(N.target.value),className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400 cursor-pointer",defaultValue:"","aria-label":"Common canvas sizes",children:[o.jsx("option",{value:"",children:"Select a size..."}),o.jsx("option",{value:"1024x1024",children:"1024x1024"}),o.jsx("option",{value:"2048x2048",children:"2048x2048"}),o.jsx("option",{value:"1920x1080",children:"1920x1080"}),o.jsx("option",{value:"3840x2160",children:"3840x2160 (4K)"}),o.jsx("option",{value:"4632x2316",children:"4632x2316"}),o.jsx("option",{value:"2316x4632",children:"2316x4632 (Vertical)"}),o.jsx("option",{value:"3276x3276",children:"3276x3276"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Width"}),o.jsx("input",{id:"input-canvas-width",type:"text",inputMode:"numeric",value:g,onChange:N=>y(N.target.value),className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"Width","aria-label":"Canvas width"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Height"}),o.jsx("input",{id:"input-canvas-height",type:"text",inputMode:"numeric",value:h,onChange:N=>x(N.target.value),className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"Height","aria-label":"Canvas height"})]})]}),o.jsx("button",{id:"btn-crop-canvas-to-layers",onClick:()=>{u(),window.fitCanvasToScreen?.()},disabled:c.length===0,className:`w-full px-3 py-2 rounded transition-colors text-xs font-medium ${c.length===0?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-slate-700 text-white hover:bg-slate-600"}`,title:c.length===0?"Add layers first to crop canvas":"Crop canvas to layer bounds","aria-label":"Crop canvas to layer bounds",children:"Crop Canvas to Layers"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Background"}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("input",{id:"input-bg-color",type:"color",value:i.backgroundColor||"#ffffff",onChange:N=>E(N.target.value),className:"flex-1 h-8 rounded cursor-pointer border border-border",title:"Pick background color","aria-label":"Background color"}),o.jsx("button",{id:"btn-bg-transparent",onClick:()=>E("transparent"),className:`flex-1 px-2 py-1 text-xs font-medium rounded transition-colors ${i.backgroundColor===null?"bg-blue-600 text-white":"bg-panel-bg text-gray-400 hover:text-gray-300"}`,title:"Set background to transparent","aria-label":"Set background to transparent",children:"Clear"})]})]}),o.jsxs("div",{className:"space-y-2 pt-2 border-t border-border",children:[o.jsx("div",{className:"text-xs font-semibold text-gray-300",children:"Border"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"input-border-enabled",checked:i.borderEnabled??!0,onChange:N=>a({borderEnabled:N.target.checked}),className:"w-4 h-4 rounded cursor-pointer",title:"Enable or disable canvas border","aria-label":"Enable or disable canvas border"}),o.jsx("label",{htmlFor:"input-border-enabled",className:"text-xs text-gray-400 cursor-pointer flex-1",children:"Show Border"})]})]}),o.jsxs("div",{className:"space-y-2 pt-2 border-t border-border",children:[o.jsx("div",{className:"text-xs font-semibold text-gray-300",children:"Shadow"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Intensity"}),o.jsx("input",{id:"input-shadow-intensity",type:"range",min:"0",max:"1",step:"0.1",value:i.shadowIntensity??.5,onChange:N=>a({shadowIntensity:parseFloat(N.target.value)}),className:"w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer",title:"Shadow intensity (0 = off, 1 = max)","aria-label":"Shadow intensity"}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round((i.shadowIntensity??.5)*100),"%"]})]})]}),o.jsx("div",{className:"space-y-2 pt-2 border-t border-border",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"input-checkered-bg",checked:i.showCheckeredBackground??!1,onChange:N=>a({showCheckeredBackground:N.target.checked}),disabled:i.backgroundColor!==null,className:"w-4 h-4 rounded cursor-pointer disabled:opacity-50",title:"Show checkered pattern for transparency (only available when background is transparent)","aria-label":"Show checkered background"}),o.jsx("label",{htmlFor:"input-checkered-bg",className:`text-xs cursor-pointer flex-1 ${i.backgroundColor!==null?"text-gray-600":"text-gray-400"}`,children:"Checkered Background"})]})}),o.jsx("div",{className:"space-y-2 pt-2 border-t border-border",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"input-drag-info",checked:i.dragInfoEnabled??!0,onChange:N=>a({dragInfoEnabled:N.target.checked}),className:"w-4 h-4 rounded cursor-pointer",title:"Show drag translation info when dragging layers","aria-label":"Show drag info tooltip"}),o.jsx("label",{htmlFor:"input-drag-info",className:"text-xs text-gray-400 cursor-pointer flex-1",children:"Show Drag Info"})]})})]})]})}function Mu(){const i=v.useRef(null),c=_(y=>y.project),a=_(y=>y.selectedLayerIds),u=_(y=>y.selectAllLayers),f=_(y=>y.deselectAllLayers),m=_(y=>y.deleteSelectedLayers),g=_(y=>y.addLayer),w=[...c.layers].sort((y,x)=>x.zIndex-y.zIndex),h=()=>{if(a.length===0){console.warn("[DEBUG] No layers selected for deletion");return}window.confirm(`Delete ${a.length} layer${a.length!==1?"s":""}?`)&&m()},p=async y=>{const x=y.currentTarget.files;if(!x){console.warn("[DEBUG] No files selected");return}for(const E of Array.from(x))try{if(!["image/png","image/gif","image/bmp","image/jpeg"].includes(E.type)){console.warn(`[DEBUG] Unsupported file type: ${E.type}`),alert(`Unsupported file type: ${E.type}. Please use PNG, GIF, BMP, or JPEG.`);continue}const C=await new Promise((j,Y)=>{const H=new FileReader;H.onload=W=>j(W.target?.result),H.onerror=()=>Y(new Error("Failed to read file")),H.readAsDataURL(E)}),N=new Image;N.src=C,await new Promise((j,Y)=>{N.onload=()=>j(),N.onerror=()=>Y(new Error("Failed to load image"))});const D=N.naturalWidth,F=N.naturalHeight;g({name:E.name,imageData:C,x:0,y:0,zIndex:_.getState().project.layers.length,visible:!0,locked:!1,opacity:1,width:D,height:F})}catch(C){alert(`Error loading image ${E.name}: ${C instanceof Error?C.message:"Unknown error"}`)}i.current&&(i.current.value="")};return o.jsxs("div",{className:"h-full flex flex-col bg-canvas-bg","data-region":"layer-panel",children:[o.jsxs("div",{className:"px-3 py-3 border-b border-border",children:[o.jsx("h2",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Layers"}),o.jsxs("div",{className:"flex gap-1 flex-wrap",children:[o.jsx("button",{id:"btn-select-all-layers",onClick:u,disabled:c.layers.length===0,className:"flex-1 min-w-16 px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-300 bg-panel-bg hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Select all layers (Ctrl+A)","aria-label":"Select all layers",children:"All"}),o.jsx("button",{id:"btn-deselect-all-layers",onClick:f,disabled:a.length===0,className:"flex-1 min-w-16 px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-300 bg-panel-bg hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Deselect all layers (Ctrl+D)","aria-label":"Deselect all layers",children:"None"}),o.jsx("button",{id:"btn-delete-selected-layers",onClick:h,disabled:a.length===0,className:"flex-1 min-w-16 px-2 py-1 text-xs font-medium text-red-400 hover:text-red-300 bg-panel-bg hover:bg-red-900 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete selected layers (Delete)","aria-label":"Delete selected layers",children:"Delete"}),o.jsx("button",{id:"btn-create-text-layer",onClick:()=>window.openTextLayerModal?.(),className:"flex-1 min-w-16 px-2 py-1 text-xs font-medium text-blue-400 hover:text-blue-300 bg-panel-bg hover:bg-blue-900 rounded transition-colors flex items-center justify-center gap-1",title:"Create text layer","aria-label":"Create text layer",children:o.jsx("span",{className:"font-bold",children:"T"})}),o.jsx("button",{id:"btn-create-shape-layer",onClick:()=>window.openShapeModal?.(),className:"flex-1 min-w-16 px-2 py-1 text-xs font-medium text-purple-400 hover:text-purple-300 bg-panel-bg hover:bg-purple-900 rounded transition-colors",title:"Create shape layer","aria-label":"Create shape layer",children:""}),o.jsx("button",{id:"btn-upload-images",onClick:()=>i.current?.click(),className:"flex-1 min-w-16 px-2 py-1 text-xs font-medium text-green-400 hover:text-green-300 bg-panel-bg hover:bg-green-900 rounded transition-colors",title:"Upload additional images","aria-label":"Upload additional images",children:"Add"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:w.length===0?o.jsxs("div",{className:"px-3 py-8 text-center text-sm text-gray-500",children:[o.jsx("div",{className:"mb-2",children:"No layers yet"}),o.jsx("div",{className:"text-xs",children:"Upload images to get started"})]}):o.jsx("div",{className:"space-y-1 p-2",children:w.map(y=>o.jsx(Ep,{layer:y,isSelected:a.includes(y.id)},y.id))})}),c.layers.length>0&&o.jsxs("div",{className:"px-3 py-2 border-t border-border text-xs text-gray-500",children:[c.layers.length," layer",c.layers.length!==1?"s":"",a.length>0&&`  ${a.length} selected`]}),o.jsx("div",{className:"border-t border-border px-3 py-2 bg-panel-bg",children:o.jsx(Pp,{})}),o.jsx("input",{ref:i,id:"input-upload-images",type:"file",multiple:!0,accept:"image/png,image/gif,image/bmp,image/jpeg",onChange:p,className:"hidden","aria-label":"Upload images"})]})}function Lp({layer:i}){const c=_(j=>j.updateLayer),a=_(j=>j.pushHistory),u=_(j=>j.ui.isDraggingLayer),f=_(j=>j.ui.dragLayerId),m=_(j=>j.ui.dragOffsetX),g=_(j=>j.ui.dragOffsetY),[w,h]=v.useState(String(i.x)),[p,y]=v.useState(String(i.y)),x=u&&f===i.id,E=x?Math.floor(i.x+m):i.x,C=x?Math.floor(i.y+g):i.y;v.useEffect(()=>{h(String(E))},[E]),v.useEffect(()=>{y(String(C))},[C]);const N=j=>{if(h(j),j!==""&&j!=="-"){const Y=parseInt(j,10);isNaN(Y)||c(i.id,{x:Y})}},D=j=>{if(y(j),j!==""&&j!=="-"){const Y=parseInt(j,10);isNaN(Y)||c(i.id,{y:Y})}},F=()=>{a()};return o.jsxs("div",{className:"bg-panel-bg rounded p-3 space-y-3","data-region":"position-inputs",children:[o.jsx("div",{className:"text-xs font-semibold text-gray-300",children:"Position"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"X"}),o.jsx("input",{id:"input-layer-x",type:"text",inputMode:"numeric",value:w,onChange:j=>N(j.target.value),onBlur:F,className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"X position","aria-label":"Layer X position"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Y"}),o.jsx("input",{id:"input-layer-y",type:"text",inputMode:"numeric",value:p,onChange:j=>D(j.target.value),onBlur:F,className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"Y position","aria-label":"Layer Y position"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-border",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Width"}),o.jsx("div",{className:"px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-gray-500",children:i.width})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Height"}),o.jsx("div",{className:"px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-gray-500",children:i.height})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Z-Index"}),o.jsx("div",{className:"px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-gray-500",children:i.zIndex})]})]})}function Mp({layer:i}){const c=_(f=>f.updateLayer),a=f=>{const m=Math.max(0,Math.min(1,f/100));c(i.id,{opacity:m})},u=i.opacity!==void 0?i.opacity:1;return o.jsxs("div",{className:"bg-panel-bg rounded p-3 space-y-2","data-region":"opacity-control",children:[o.jsx("div",{className:"text-xs font-semibold text-gray-300",children:"Opacity"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{id:"input-layer-opacity",type:"range",min:"0",max:"100",value:u*100,onChange:f=>a(parseInt(f.target.value)),className:"w-full h-2 bg-canvas-bg rounded appearance-none cursor-pointer accent-blue-400","aria-label":"Layer opacity"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-xs text-gray-400",children:[(u*100).toFixed(0),"%"]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{id:"btn-opacity-50",onClick:()=>a(50),className:"px-2 py-1 text-xs bg-canvas-bg hover:bg-border rounded transition",title:"50% opacity","aria-label":"Set 50% opacity",children:"50%"}),o.jsx("button",{id:"btn-opacity-100",onClick:()=>a(100),className:"px-2 py-1 text-xs bg-canvas-bg hover:bg-border rounded transition",title:"100% opacity (fully opaque)","aria-label":"Set 100% opacity",children:"100%"})]})]})]})]})}function Fp({layer:i}){const[c,a]=v.useState(null),[u,f]=v.useState(null),[m,g]=v.useState(!1),[w,h]=v.useState(new Set),[p,y]=v.useState(new Set),x=v.useRef(null),E=v.useRef(null),C=v.useRef(28);v.useEffect(()=>{a(null),f(null),h(new Set),y(new Set)},[i.id]);const N=()=>{if(!x.current||!c)return;const W=x.current,M=W.scrollTop,$=W.clientHeight,X=C.current,Z=Math.max(0,Math.floor(M/X)-2),A=Math.min(c.length,Math.ceil((M+$)/X)+2),B=new Set;for(let q=Z;q<A;q++)B.add(q);h(B)},D=()=>{if(!E.current||!u)return;const W=E.current,M=W.scrollTop,$=W.clientHeight,X=C.current,Z=Math.max(0,Math.floor(M/X)-2),A=Math.min(u.length,Math.ceil((M+$)/X)+2),B=new Set;for(let q=Z;q<A;q++)B.add(q);y(B)};v.useEffect(()=>{const W=x.current;if(W)return W.addEventListener("scroll",N),N(),()=>W.removeEventListener("scroll",N)},[c]),v.useEffect(()=>{const W=E.current;if(W)return W.addEventListener("scroll",D),D(),()=>W.removeEventListener("scroll",D)},[u]);const F=async W=>{g(!0);try{const M=new Image;M.onload=()=>{const $=document.createElement("canvas");$.width=M.width,$.height=M.height;const X=$.getContext("2d");if(!X){console.error("Failed to get canvas context"),g(!1);return}X.drawImage(M,0,0);const A=X.getImageData(0,0,$.width,$.height).data;if(W){const B=new Map;let q=0;for(let ee=0;ee<A.length;ee+=4){const J=A[ee],U=A[ee+1],me=A[ee+2],V=A[ee+3];if(V===0)continue;q++;const Q=`${`#${((1<<24)+(J<<16)+(U<<8)+me).toString(16).slice(1).toUpperCase()}`}${V.toString(16).padStart(2,"0").toUpperCase()}`;B.set(Q,(B.get(Q)||0)+1)}q=Math.max(1,q);const ue=Array.from(B.entries()).map(([ee,J])=>{const U=ee.substring(0,7),me=parseInt(ee.substring(7),16);return{hex:U,count:J,percent:J/q*100,hasAlpha:!0,alpha:me}}).filter(ee=>!(ee.hex==="#000000"&&ee.alpha===0)).sort((ee,J)=>J.count-ee.count);f(ue),y(new Set)}else{const B=new Map;let q=0;for(let ee=0;ee<A.length;ee+=4){const J=A[ee],U=A[ee+1],me=A[ee+2];if(A[ee+3]!==255)continue;q++;const K=`#${((1<<24)+(J<<16)+(U<<8)+me).toString(16).slice(1).toUpperCase()}`;B.set(K,(B.get(K)||0)+1)}q=Math.max(1,q);const ue=Array.from(B.entries()).map(([ee,J])=>({hex:ee,count:J,percent:J/q*100,hasAlpha:!1,alpha:void 0})).sort((ee,J)=>J.count-ee.count);a(ue),h(new Set)}},M.onerror=()=>{console.error("Failed to load image for color analysis"),g(!1)},M.src=i.imageData}finally{g(!1)}},j=W=>{navigator.clipboard.writeText(W).catch(()=>{console.error("Failed to copy to clipboard")})},Y=(W,M)=>{if(!W||W.length===0)return;const X=W.map(Z=>M&&Z.alpha!==void 0?`${Z.hex}${Z.alpha.toString(16).toUpperCase().padStart(2,"0")}`:Z.hex).join(`
`);j(X)},H=(W,M,$)=>{if(!W||W.length===0)return o.jsx("p",{className:"text-xs text-gray-500 p-2",children:"No colors found"});const X=[],Z=Array.from(M).sort((ee,J)=>ee-J);for(const ee of Z){const J=W[ee];J&&X.push(o.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs hover:bg-gray-700 border-b border-gray-700/50 last:border-b-0 transition-colors",style:{height:`${C.current}px`},children:[o.jsx("div",{className:"w-4 h-4 rounded border border-gray-600 flex-shrink-0",style:{backgroundColor:J.hex},title:J.hex}),o.jsx("span",{className:"font-mono text-gray-300 min-w-fit text-xs",children:J.hex}),J.hasAlpha&&J.alpha!==void 0&&o.jsxs("span",{className:"font-mono text-gray-500 text-xs",children:["",J.alpha.toString(16).toUpperCase().padStart(2,"0")]}),o.jsxs("div",{className:"ml-auto flex items-center gap-1 flex-shrink-0",children:[o.jsx("span",{className:"font-mono text-gray-400 text-xs",children:J.count}),o.jsxs("span",{className:"text-gray-600 text-xs",children:["(",J.percent.toFixed(2),"%)"]})]})]},`${J.hex}-${ee}`))}const A=M.size>0?Math.min(...M):0,B=M.size>0?Math.max(...M):0,q=Math.max(0,A)*C.current,ue=Math.max(0,W.length-(B+1))*C.current;return o.jsxs("div",{ref:$,className:"max-h-64 overflow-y-auto bg-gray-800/50 rounded border border-gray-700 text-xs",style:{height:"256px"},children:[o.jsx("div",{style:{height:q}}),X,o.jsx("div",{style:{height:ue}})]})};return o.jsxs("div",{className:"bg-panel-bg rounded p-3 space-y-2","data-region":"color-analysis",children:[o.jsx("div",{className:"text-xs font-semibold text-gray-300",children:"Analyze Colors"}),o.jsx("button",{id:"btn-analyze-rgb",onClick:()=>F(!1),disabled:m,className:"w-full px-3 py-1 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-700 disabled:cursor-not-allowed text-xs font-medium text-blue-400 rounded transition-colors","aria-label":"Analyze RGB colors",children:m?"Analyzing...":"Get Colors..."}),c&&o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[o.jsxs("span",{children:[c.length," colors (RGB)  ",Math.floor(c.reduce((W,M)=>W+M.count,0))," pixels"]}),o.jsx("button",{id:"btn-copy-rgb-colors",onClick:()=>Y(c,!1),className:"p-1 text-gray-500 hover:text-gray-300 transition-colors flex-shrink-0",title:"Copy all colors to clipboard","aria-label":"Copy all RGB colors to clipboard",children:o.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[o.jsx("path",{d:"M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2z"}),o.jsx("path",{fillOpacity:"0.5",d:"M2 6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-2h-2v2H2V8h2V6H2z"})]})})]}),H(c,w,x)]}),c&&o.jsx("div",{className:"my-2 border-t border-gray-700"}),o.jsx("button",{id:"btn-analyze-rgba",onClick:()=>F(!0),disabled:m,className:"w-full px-3 py-1 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-700 disabled:cursor-not-allowed text-xs font-medium text-purple-400 rounded transition-colors","aria-label":"Analyze RGBA colors",children:m?"Analyzing...":"Get Colors (inc. transparent pixels)..."}),u&&o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[o.jsxs("span",{children:[u.length," colors (RGBA)  ",Math.floor(u.reduce((W,M)=>W+M.count,0))," pixels"]}),o.jsx("button",{id:"btn-copy-rgba-colors",onClick:()=>Y(u,!0),className:"p-1 text-gray-500 hover:text-gray-300 transition-colors flex-shrink-0",title:"Copy all colors to clipboard","aria-label":"Copy all RGBA colors to clipboard",children:o.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[o.jsx("path",{d:"M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2z"}),o.jsx("path",{fillOpacity:"0.5",d:"M2 6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-2h-2v2H2V8h2V6H2z"})]})})]}),H(u,p,E)]})]})}function Ip(i,c){const{shapeType:a,stretchX:u,stretchY:f}=i;let m=1/0,g=-1/0,w=1/0,h=-1/0;const p=(x,E)=>{m=Math.min(m,x),g=Math.max(g,x),w=Math.min(w,E),h=Math.max(h,E)};if(a==="rectangle"||a==="circle"){const x=c*2*u,E=c*2*f;return{minX:-x/2,maxX:x/2,minY:-E/2,maxY:E/2}}let y=3;if(a==="hexagon"&&(y=6),a==="octagon"&&(y=8),a==="star"){const E=c*u,C=c*.4*u,N=Math.PI*2/10;let D=-Math.PI/2;for(let F=0;F<10;F++){const j=D+N*F,H=F%2===0?E:C,W=Math.cos(j)*H,M=Math.sin(j)*H*f;p(W,M)}}else{const x=Math.PI*2/y;let E=-Math.PI/2;for(let C=0;C<y;C++){const N=E+x*C,D=Math.cos(N)*c,F=Math.sin(N)*c;p(D*u,F*f)}}return{minX:m,maxX:g,minY:w,maxY:h}}async function Gn(i){const{shapeType:c,size:a,stretchX:u,stretchY:f,color:m}=i,w=a*1/2,h=Ip(i,w),p=h.maxX-h.minX,y=h.maxY-h.minY,x=0,E=Math.ceil(p+x*2),C=Math.ceil(y+x*2),N=document.createElement("canvas");N.width=E,N.height=C;const D=N.getContext("2d");if(!D)throw new Error("Failed to get canvas context");switch(D.imageSmoothingEnabled=!1,D.imageSmoothingQuality="low",D.fillStyle=m,D.translate(x-h.minX,x-h.minY),c){case"rectangle":zp(D,0,0,w,u,f);break;case"circle":Rp(D,0,0,w,u,f);break;case"triangle":Ll(D,0,0,w,3,u,f);break;case"hexagon":Ll(D,0,0,w,6,u,f);break;case"octagon":Ll(D,0,0,w,8,u,f);break;case"star":Tp(D,0,0,w,u,f);break}const F=D.getImageData(0,0,N.width,N.height),j=F.data,Y=parseInt(m.slice(1,3),16),H=parseInt(m.slice(3,5),16),W=parseInt(m.slice(5,7),16);for(let $=0;$<j.length;$+=4)j[$+3]>=128?(j[$+3]=255,j[$]=Y,j[$+1]=H,j[$+2]=W):j[$+3]=0;return D.putImageData(F,0,0),{dataUrl:N.toDataURL("image/png"),width:E,height:C,offsetX:0,offsetY:0}}function zp(i,c,a,u,f,m){const g=u*2*f,w=u*2*m;i.fillRect(c-g/2,a-w/2,g,w)}function Rp(i,c,a,u,f,m){i.beginPath(),f===m?i.arc(c,a,u*f,0,Math.PI*2):i.ellipse(c,a,u*f,u*m,0,0,Math.PI*2),i.fill()}function Ll(i,c,a,u,f,m,g){i.beginPath();const w=Math.PI*2/f;let h=-Math.PI/2;for(let p=0;p<f;p++){const y=h+w*p,x=c+Math.cos(y)*u*m,E=a+Math.sin(y)*u*g;p===0?i.moveTo(x,E):i.lineTo(x,E)}i.closePath(),i.fill()}function Tp(i,c,a,u,f,m){const w=u*f,h=u*.4*f;i.beginPath();const p=Math.PI*2/10;let y=-Math.PI/2;for(let x=0;x<10;x++){const E=y+p*x,N=x%2===0?w:h,D=c+Math.cos(E)*N,F=a+Math.sin(E)*N*m;x===0?i.moveTo(D,F):i.lineTo(D,F)}i.closePath(),i.fill()}function _p({layer:i}){const c=_(h=>h.updateLayer);if(!i.shapeType)return null;const a=async h=>{if(h)try{const p=await Gn({shapeType:h,size:i.shapeSize||200,stretchX:i.shapeStretchX||1,stretchY:i.shapeStretchY||1,color:i.shapeColor||"#FFFFFF"});c(i.id,{imageData:p.dataUrl,width:p.width,height:p.height,x:i.x-p.offsetX,y:i.y-p.offsetY,shapeType:h})}catch(p){console.error("Failed to update shape type:",p)}},u=async h=>{try{if(!i.shapeType)return;const p=await Gn({shapeType:i.shapeType,size:h,stretchX:i.shapeStretchX||1,stretchY:i.shapeStretchY||1,color:i.shapeColor||"#FFFFFF"});c(i.id,{imageData:p.dataUrl,width:p.width,height:p.height,x:i.x-p.offsetX,y:i.y-p.offsetY,shapeSize:h})}catch(p){console.error("Failed to update shape size:",p)}},f=async h=>{try{if(!i.shapeType)return;const p=await Gn({shapeType:i.shapeType,size:i.shapeSize||200,stretchX:h,stretchY:i.shapeStretchY||1,color:i.shapeColor||"#FFFFFF"});c(i.id,{imageData:p.dataUrl,width:p.width,height:p.height,x:i.x-p.offsetX,y:i.y-p.offsetY,shapeStretchX:h})}catch(p){console.error("Failed to update shape stretch X:",p)}},m=async h=>{try{if(!i.shapeType)return;const p=await Gn({shapeType:i.shapeType,size:i.shapeSize||200,stretchX:i.shapeStretchX||1,stretchY:h,color:i.shapeColor||"#FFFFFF"});c(i.id,{imageData:p.dataUrl,width:p.width,height:p.height,x:i.x-p.offsetY,y:i.y-p.offsetY,shapeStretchY:h})}catch(p){console.error("Failed to update shape stretch Y:",p)}},g=async h=>{try{if(!i.shapeType)return;const p=await Gn({shapeType:i.shapeType,size:i.shapeSize||200,stretchX:i.shapeStretchX||1,stretchY:i.shapeStretchY||1,color:h});c(i.id,{imageData:p.dataUrl,width:p.width,height:p.height,x:i.x-p.offsetX,y:i.y-p.offsetY,shapeColor:h})}catch(p){console.error("Failed to update shape color:",p)}},w=["rectangle","circle","triangle","hexagon","octagon","star"];return o.jsxs("div",{className:"bg-panel-bg rounded p-3 space-y-3","data-region":"shape-properties",children:[o.jsx("div",{className:"text-xs font-semibold text-gray-300",children:"Shape Properties"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Type"}),o.jsx("select",{id:"select-shape-type",value:i.shapeType,onChange:h=>a(h.target.value),className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400","aria-label":"Shape type",children:w.map(h=>o.jsx("option",{value:h,children:h.charAt(0).toUpperCase()+h.slice(1)},h))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Size: ",i.shapeSize||200,"px"]}),o.jsx("input",{id:"input-shape-size",type:"range",min:"10",max:"500",value:i.shapeSize||200,onChange:h=>u(Number(h.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer","aria-label":"Shape size"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Stretch X: ",(i.shapeStretchX||1).toFixed(2),"x"]}),o.jsx("input",{id:"input-shape-stretch-x",type:"range",min:"0.1",max:"20",step:"0.1",value:i.shapeStretchX||1,onChange:h=>f(Number(h.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer","aria-label":"Shape stretch X"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Stretch Y: ",(i.shapeStretchY||1).toFixed(2),"x"]}),o.jsx("input",{id:"input-shape-stretch-y",type:"range",min:"0.1",max:"20",step:"0.1",value:i.shapeStretchY||1,onChange:h=>m(Number(h.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer","aria-label":"Shape stretch Y"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Color"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{id:"input-shape-color",type:"color",value:i.shapeColor||"#FFFFFF",onChange:h=>g(h.target.value),className:"w-12 h-8 rounded cursor-pointer border border-border","aria-label":"Shape color"}),o.jsx("input",{id:"input-shape-color-hex",type:"text",value:i.shapeColor||"#FFFFFF",onChange:h=>{/^#[0-9A-F]{6}$/i.test(h.target.value)&&g(h.target.value)},placeholder:"#FFFFFF",className:"flex-1 px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400","aria-label":"Shape color hex value"})]})]}),o.jsx("button",{id:"btn-edit-shape",onClick:()=>window.openShapeModal?.(i),className:"w-full px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white text-xs font-medium rounded transition-colors","aria-label":"Edit shape in modal",children:"Edit Shape"})]})}const Pr=({isOpen:i,onClose:c,title:a,children:u,initialPosition:f={x:100,y:100},noPadding:m=!1,modalId:g})=>{const[w,h]=v.useState(f),[p,y]=v.useState(!1),[x,E]=v.useState({width:1100,height:900}),[C,N]=v.useState(!1),D=v.useRef(null),F=v.useRef(null);v.useEffect(()=>{const Y=W=>{if(p&&D.current){const M=W.clientX-D.current.x,$=W.clientY-D.current.y;h(X=>({x:X.x+M,y:X.y+$})),D.current={x:W.clientX,y:W.clientY}}},H=()=>{y(!1),D.current=null};return p&&(window.addEventListener("mousemove",Y),window.addEventListener("mouseup",H)),()=>{window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",H)}},[p]);const j=Y=>{Y.preventDefault(),Y.stopPropagation(),N(!0),F.current={x:Y.clientX,y:Y.clientY,startWidth:x.width,startHeight:x.height}};return v.useEffect(()=>{const Y=W=>{if(C&&F.current){const M=W.clientX-F.current.x,$=W.clientY-F.current.y;E({width:Math.max(600,F.current.startWidth+M),height:Math.max(400,F.current.startHeight+$)})}},H=()=>{N(!1),F.current=null};return C&&(window.addEventListener("mousemove",Y),window.addEventListener("mouseup",H)),()=>{window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",H)}},[C]),i?o.jsx(Ap,{modalId:g,title:a,onClose:c,position:w,setPosition:h,size:x,setSize:E,noPadding:m,isDragging:p,setIsDragging:y,dragStartRef:D,isResizing:C,handleResizeMouseDown:j,children:typeof u=="function"?u(x):u}):null},Ap=({modalId:i,title:c,onClose:a,position:u,size:f,noPadding:m,setIsDragging:g,dragStartRef:w,handleResizeMouseDown:h,children:p})=>sn()?o.jsxs("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:a}),o.jsxs("div",{id:i,role:"dialog","aria-modal":"true","aria-label":c,"data-region":i||"modal",className:"relative flex flex-col bg-panel-bg border border-border rounded-lg shadow-2xl overflow-hidden",style:{width:"95vw",height:"90vh",maxWidth:"1200px",maxHeight:"95vh",zIndex:301},children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-canvas-bg border-b border-border select-none flex-shrink-0",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:c}),o.jsx("button",{id:i?`${i}-close`:void 0,onClick:a,className:"text-gray-400 hover:text-white focus:outline-none p-1 rounded hover:bg-gray-700 transition-colors","aria-label":`Close ${c}`,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:`${m?"":"p-4"} text-gray-300 ${m?"overflow-hidden":"overflow-auto"} flex-1`,children:p})]})]}):o.jsxs("div",{id:i,role:"dialog","aria-modal":"true","aria-label":c,"data-region":i||"modal",className:"fixed flex flex-col bg-panel-bg border border-border rounded shadow-lg overflow-hidden",style:{left:u.x,top:u.y,zIndex:50,width:`${f.width}px`,height:`${f.height}px`,position:"absolute"},children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-canvas-bg border-b border-border cursor-move select-none",onMouseDown:x=>{g(!0),w.current={x:x.clientX,y:x.clientY}},children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:c}),o.jsx("button",{id:i?`${i}-close`:void 0,onClick:a,className:"text-gray-400 hover:text-white focus:outline-none p-1 rounded hover:bg-gray-700 transition-colors","aria-label":`Close ${c}`,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:`${m?"":"p-4"} text-gray-300 ${m?"overflow-hidden":"overflow-auto"} flex-1`,children:p}),o.jsx("div",{onMouseDown:h,className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize bg-gray-600 hover:bg-gray-500 transition-colors","aria-label":"Resize modal",role:"separator",style:{clipPath:"polygon(100% 0, 100% 100%, 0 100%)"}})]}),Op=({isOpen:i,onClose:c,layer:a})=>{const[u,f]=v.useState(128),[m,g]=v.useState(null),[w,h]=v.useState(!1),[p,y]=v.useState(1),[x,E]=v.useState(null),[C,N]=v.useState(!0),[D,F]=v.useState(!1),j=v.useRef(null),Y=v.useRef(null),H=_(B=>B.updateLayer);v.useEffect(()=>{if(!i||!a.imageData)return;const B=setTimeout(async()=>{h(!0);try{const q=await Cu(a.imageData,u,!1);g(q)}catch(q){console.error("Failed to apply transparency mask:",q)}finally{h(!1)}},100);return F(!1),()=>clearTimeout(B)},[u,a.imageData,i]);const W=async()=>{if(a.imageData)try{const B=await Cu(a.imageData,u,C);H(a.id,{imageData:B}),c()}catch(B){console.error("Failed to apply transparency mask with palette reduction:",B)}},M=()=>{y(B=>Math.min(B+.25,3))},$=()=>{y(B=>Math.max(B-.25,.1))},X=(B,q)=>{if(!j.current)return 1;const ue=j.current.clientWidth,ee=j.current.clientHeight;if(ue<=0||ee<=0)return 1;const J=ue/B,U=ee/q,me=Math.min(J,U);return Math.max(.1,me*.9)},Z=()=>{y(x?X(x.width,x.height):1)},A=B=>{const q=B.currentTarget;E({width:q.naturalWidth,height:q.naturalHeight})};return v.useEffect(()=>{x&&j.current&&!D&&setTimeout(()=>{const B=X(x.width,x.height);y(B),F(!0)},100)},[x,D]),o.jsx(Pr,{isOpen:i,title:"Transparency Mask",onClose:c,modalId:"modal-transparency-mask",children:o.jsxs("div",{className:"flex flex-col h-full p-4 gap-4 text-gray-200",children:[o.jsxs("div",{className:"flex-1 flex flex-col min-h-0 gap-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium",children:"Preview"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{id:"btn-tmask-zoom-out",onClick:$,disabled:p<=.1,className:"p-1 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Zoom out","aria-label":"Zoom out",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})})}),o.jsxs("span",{className:"text-xs text-gray-400 min-w-[45px] text-center",children:[Math.round(p*100),"%"]}),o.jsx("button",{id:"btn-tmask-zoom-in",onClick:M,disabled:p>=3,className:"p-1 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Zoom in","aria-label":"Zoom in",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7"})})}),o.jsx("button",{id:"btn-tmask-zoom-reset",onClick:Z,className:"text-xs px-2 py-1 text-gray-400 hover:text-white bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Reset zoom","aria-label":"Reset zoom",children:"Reset"})]})]}),o.jsxs("div",{ref:j,className:"flex-1 relative w-full bg-gray-900 rounded border border-gray-700 overflow-auto",children:[w&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-10",children:o.jsx("span",{className:"text-white font-medium",children:"Processing..."})}),m?o.jsx("div",{style:{display:"inline-block",padding:"10px"},children:o.jsx("img",{ref:Y,src:m,alt:"Preview",onLoad:A,style:{width:x?`${x.width*p}px`:"auto",height:x?`${x.height*p}px`:"auto",transition:"width 0.1s ease-out, height 0.1s ease-out",maxWidth:"none"}})}):o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"text-gray-500",children:"No preview available"})})]})]}),o.jsxs("div",{className:"flex flex-col gap-4 pt-4 border-t border-gray-700",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex justify-between text-sm",children:o.jsxs("label",{htmlFor:"input-tmask-threshold",children:["Mask Threshold: ",u]})}),o.jsx("input",{id:"input-tmask-threshold",type:"range",min:"0",max:"255",value:u,onChange:B=>f(Number(B.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500","aria-label":"Mask threshold"}),o.jsx("p",{className:"text-xs text-gray-400",children:"0=Opaque, 255=Transparent"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{id:"input-tmask-template-colors",type:"checkbox",checked:C,onChange:B=>N(B.target.checked),className:"w-4 h-4 rounded bg-gray-700 border-gray-600 accent-blue-500 cursor-pointer","aria-label":"Use template colors"}),o.jsx("label",{htmlFor:"input-tmask-template-colors",className:"text-sm text-gray-300 cursor-pointer",children:"Use template colors"})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{id:"btn-tmask-cancel",onClick:c,className:"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-700 rounded hover:bg-gray-600 transition-colors","aria-label":"Cancel transparency mask",children:"Cancel"}),o.jsx("button",{id:"btn-tmask-apply",onClick:W,disabled:!m||w,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Apply transparency mask",children:"Apply"})]})]})]})]})})},Bp=({isOpen:i,onClose:c,layer:a})=>{const u=_(Z=>Z.updateLayer),[f,m]=v.useState(30),[g,w]=v.useState(null),[h,p]=v.useState(!1),[y,x]=v.useState(1),[E,C]=v.useState(null),[N,D]=v.useState(!1),[F,j]=v.useState(!1),Y=v.useRef(null),H=v.useRef(null),W=v.useRef(null);v.useEffect(()=>{if(!(!i||!a?.imageData))return W.current&&clearTimeout(W.current),W.current=window.setTimeout(async()=>{p(!0);try{const Z=await ku(a.imageData,f,N);w(Z)}catch(Z){console.error("BG removal preview failed:",Z)}finally{p(!1)}},120),()=>{W.current&&(clearTimeout(W.current),W.current=null)}},[i,a?.imageData,f,N]);const M=async()=>{if(a?.imageData){p(!0);try{const Z=await ku(a.imageData,f,!1);u(a.id,{imageData:Z}),c()}catch(Z){console.error("BG removal apply failed:",Z),alert("Background removal failed. Please try again.")}finally{p(!1)}}},$=Z=>{const A=Z.currentTarget;C({width:A.naturalWidth,height:A.naturalHeight})},X=(Z,A)=>{if(!Y.current)return 1;const B=Y.current.clientWidth,q=Y.current.clientHeight;if(B<=0||q<=0)return 1;const ue=B/Z,ee=q/A,J=Math.min(ue,ee);return Math.max(.1,J*.9)};return v.useEffect(()=>{E&&Y.current&&!F&&setTimeout(()=>{const Z=X(E.width,E.height);x(Z),j(!0)},100)},[E,F]),o.jsx(Pr,{isOpen:i,title:"BG Removal",onClose:c,modalId:"modal-bg-removal",children:o.jsxs("div",{className:"flex flex-col h-full p-4 gap-4 text-gray-200",children:[o.jsxs("div",{className:"flex-1 flex flex-col min-h-0 gap-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium",children:"Preview"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{id:"btn-bgremoval-zoom-out",onClick:()=>x(Z=>Math.max(Z-.25,.1)),className:"p-1 text-gray-400 hover:text-white transition-colors",title:"Zoom out","aria-label":"Zoom out",children:""}),o.jsxs("span",{className:"text-xs text-gray-400 min-w-[45px] text-center",children:[Math.round(y*100),"%"]}),o.jsx("button",{id:"btn-bgremoval-zoom-in",onClick:()=>x(Z=>Math.min(Z+.25,3)),className:"p-1 text-gray-400 hover:text-white transition-colors",title:"Zoom in","aria-label":"Zoom in",children:"+"}),o.jsx("button",{id:"btn-bgremoval-zoom-reset",onClick:()=>{E&&x(X(E.width,E.height))},className:"text-xs px-2 py-1 text-gray-400 hover:text-white bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Reset zoom","aria-label":"Reset zoom",children:"Reset"})]})]}),o.jsxs("div",{ref:Y,className:"flex-1 relative w-full bg-gray-900 rounded border border-gray-700 overflow-auto",children:[h&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-10",children:o.jsx("span",{className:"text-white font-medium",children:"Processing..."})}),g?o.jsx("div",{style:{display:"inline-block",padding:"10px"},children:o.jsx("img",{ref:H,src:g,alt:"Preview",onLoad:$,style:{width:E?`${E.width*y}px`:"auto",height:E?`${E.height*y}px`:"auto",transition:"width 0.1s ease-out, height 0.1s ease-out",maxWidth:"none"}})}):o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"text-gray-500",children:"No preview available"})})]})]}),o.jsxs("div",{className:"flex flex-col gap-4 pt-4 border-t border-gray-700",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex justify-between text-sm",children:o.jsxs("label",{htmlFor:"input-bgremoval-tolerance",children:["Tolerance: ",f]})}),o.jsx("input",{id:"input-bgremoval-tolerance",type:"range",min:"0",max:"255",value:f,onChange:Z=>m(Number(Z.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500","aria-label":"Background removal tolerance"}),o.jsx("p",{className:"text-xs text-gray-400",children:"Adjust color tolerance for background selection"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{id:"input-bgremoval-heatmap",type:"checkbox",checked:N,onChange:Z=>D(Z.target.checked),className:"w-4 h-4 rounded bg-gray-700 border-gray-600 accent-blue-500 cursor-pointer","aria-label":"Show heatmap"}),o.jsx("label",{htmlFor:"input-bgremoval-heatmap",className:"text-sm text-gray-300 cursor-pointer",children:"Show heatmap (red = kept pixels)"})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{id:"btn-bgremoval-cancel",onClick:c,className:"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-700 rounded hover:bg-gray-600 transition-colors","aria-label":"Cancel background removal",children:"Cancel"}),o.jsx("button",{id:"btn-bgremoval-apply",onClick:M,disabled:!g||h,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Apply background removal",children:"Apply"})]})]})]})]})})},$p=({isOpen:i,onClose:c,imageDataUrl:a,onAddColors:u})=>{const f=v.useRef(null),m=v.useRef(null),g=v.useRef(null),w=sn(),[h,p]=v.useState([]),[y,x]=v.useState(null),[E,C]=v.useState({x:0,y:0}),[N,D]=v.useState(1),[F,j]=v.useState({x:0,y:0}),[Y,H]=v.useState(!1),[W,M]=v.useState({x:0,y:0}),[$,X]=v.useState(!1),[Z,A]=v.useState({w:0,h:0});v.useEffect(()=>{if(!i||!a)return;const T=new Image;T.onload=()=>{g.current=T,A({w:T.naturalWidth,h:T.naturalHeight}),X(!0),p([]),D(1),j({x:0,y:0})},T.src=a},[i,a]),v.useEffect(()=>{if(!$||!m.current)return;const T=m.current.clientWidth-40,S=m.current.clientHeight-40;if(T<=0||S<=0||Z.w<=0||Z.h<=0)return;const z=Math.min(T/Z.w,S/Z.h,4);D(z)},[$,Z]);const B=v.useCallback(()=>{const T=f.current,S=m.current,z=g.current;if(!T||!S||!z||!$)return;T.width=S.clientWidth,T.height=S.clientHeight;const P=T.getContext("2d");if(!P)return;P.imageSmoothingEnabled=!1,P.clearRect(0,0,T.width,T.height);const te=8,ce=document.createElement("canvas");ce.width=te*2,ce.height=te*2;const se=ce.getContext("2d");se.fillStyle="#3a3a3a",se.fillRect(0,0,te*2,te*2),se.fillStyle="#2a2a2a",se.fillRect(0,0,te,te),se.fillRect(te,te,te,te);const de=Z.w*N,le=Z.h*N,ye=(T.width-de)/2+F.x,we=(T.height-le)/2+F.y;P.save(),P.beginPath(),P.rect(ye,we,de,le),P.clip();const Me=P.createPattern(ce,"repeat");Me&&(P.fillStyle=Me,P.fillRect(ye,we,de,le)),P.restore(),P.drawImage(z,ye,we,de,le)},[$,Z,N,F]);v.useEffect(()=>{B()},[B]),v.useEffect(()=>{const T=m.current;if(!T)return;const S=new ResizeObserver(()=>B());return S.observe(T),()=>S.disconnect()},[B]);const q=v.useRef(null),ue=v.useRef({w:0,h:0});v.useEffect(()=>{if(!$||!g.current)return;const T=g.current,S=document.createElement("canvas");S.width=T.naturalWidth,S.height=T.naturalHeight;const z=S.getContext("2d");z.drawImage(T,0,0),q.current=z.getImageData(0,0,S.width,S.height),ue.current={w:S.width,h:S.height}},[$,a]);const ee=v.useCallback((T,S)=>{const z=f.current;if(!z||!$||!q.current)return null;const P=z.getBoundingClientRect(),te=T-P.left,ce=S-P.top,se=Z.w*N,de=Z.h*N,le=(z.width-se)/2+F.x,ye=(z.height-de)/2+F.y;if(te<le||te>=le+se||ce<ye||ce>=ye+de)return null;const we=Math.floor((te-le)/N),Me=Math.floor((ce-ye)/N),_e=q.current,Ge=ue.current.w;if(we<0||we>=Ge||Me<0||Me>=ue.current.h)return null;const Ke=(Me*Ge+we)*4,Xe=_e.data[Ke],yt=_e.data[Ke+1],He=_e.data[Ke+2];return"#"+[Xe,yt,He].map(G=>G.toString(16).padStart(2,"0")).join("").toUpperCase()},[$,Z,N,F]),J=T=>{if(C({x:T.clientX,y:T.clientY}),Y){const z=T.clientX-W.x,P=T.clientY-W.y;j(te=>({x:te.x+z,y:te.y+P})),M({x:T.clientX,y:T.clientY}),x(null);return}const S=ee(T.clientX,T.clientY);x(S)},U=T=>{if(T.button===1||T.button===2){T.preventDefault(),H(!0),M({x:T.clientX,y:T.clientY});return}if(T.button===0){const S=ee(T.clientX,T.clientY);S&&!h.includes(S)&&p(z=>[...z,S])}},me=()=>{H(!1)},V=T=>{T.preventDefault();const S=T.deltaY>0?-1:1;D(z=>{const P=S>0?z*1.2:z/1.2;return Math.max(.1,Math.min(50,P))})},K=T=>{p(S=>S.filter(z=>z!==T))},Q=()=>{u(h),c()};return i?o.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",onClick:T=>{T.target===T.currentTarget&&c()},children:[o.jsx("div",{className:"absolute inset-0 bg-black/80"}),o.jsxs("div",{className:"relative z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl flex flex-col overflow-hidden",style:{width:"90vw",height:"85vh",maxWidth:"1400px"},children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-900 border-b border-gray-700 flex-shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-sm font-semibold text-white",children:" Eyedropper  Pick Colors from Image"}),o.jsx("span",{className:"text-xs text-gray-500",children:"Click to pick  Scroll to zoom  Middle-drag to pan"})]}),o.jsx("button",{onClick:c,className:"text-gray-400 hover:text-white text-lg px-2","aria-label":"Close eyedropper",children:""})]}),o.jsxs("div",{className:`${w?"flex flex-col":"flex"} flex-1 overflow-hidden`,children:[o.jsxs("div",{ref:m,className:"flex-1 relative overflow-hidden bg-gray-950 cursor-crosshair",children:[o.jsx("canvas",{ref:f,className:"absolute inset-0",onMouseMove:J,onMouseDown:U,onMouseUp:me,onMouseLeave:()=>{H(!1),x(null)},onWheel:V,onContextMenu:T=>T.preventDefault()}),o.jsxs("div",{className:"absolute top-3 left-3 bg-gray-900/80 border border-gray-700 rounded px-2 py-1 text-xs text-gray-300 pointer-events-none",children:[Math.round(N*100),"%"]}),y&&!Y&&o.jsxs("div",{style:{position:"fixed",left:E.x+20,top:E.y+20,zIndex:99999,pointerEvents:"none"},className:"bg-gray-900 border border-gray-600 rounded-lg p-2 shadow-xl flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded border border-gray-500 flex-shrink-0",style:{backgroundColor:y}}),o.jsx("span",{className:"font-mono text-sm text-white font-bold",children:y})]})]}),o.jsxs("div",{className:`${w?"h-48 border-t w-full":"w-56 border-l"} border-gray-700 flex flex-col bg-gray-800 flex-shrink-0`,children:[o.jsx("div",{className:"px-3 py-2 border-b border-gray-700",children:o.jsxs("span",{className:"text-xs font-semibold text-gray-400 uppercase",children:["Picked Colors (",h.length,")"]})}),o.jsx("div",{className:`flex-1 overflow-y-auto p-2 ${w?"flex flex-wrap gap-1":"space-y-1"}`,children:h.length===0?o.jsx("div",{className:"text-xs text-gray-500 text-center py-4 w-full",children:"Click on the image to pick colors"}):h.map((T,S)=>o.jsxs("div",{className:`flex items-center gap-2 bg-gray-900 rounded px-2 py-1.5 group ${w?"flex-shrink-0":""}`,children:[o.jsx("div",{className:"w-6 h-6 rounded border border-gray-600 flex-shrink-0",style:{backgroundColor:T}}),o.jsx("span",{className:"font-mono text-xs text-white flex-1",children:T}),o.jsx("button",{onClick:()=>K(T),className:"text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity text-sm","aria-label":`Remove ${T}`,children:""})]},S))}),o.jsxs("div",{className:`${w?"flex items-center gap-2 p-2":"p-3 space-y-2"} border-t border-gray-700 flex-shrink-0`,children:[o.jsx("button",{onClick:Q,disabled:h.length===0,className:`${w?"flex-1":"w-full"} px-3 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white text-sm font-semibold rounded transition-colors`,children:"Add Colors to Palette"}),o.jsx("button",{onClick:()=>p([]),disabled:h.length===0,className:`${w?"flex-shrink-0":"w-full"} px-3 py-1.5 bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed text-gray-300 text-xs rounded transition-colors`,children:"Clear All"})]})]})]})]})]}):null};function Up(i){return new Worker("/assets/pixelator.worker-C1wMxZux.js",{name:i?.name})}const Fu=["#FFFFFF","#F4F59F","#FFCA3A","#FF9F1C","#FF595E","#E71D36","#F3BBC2","#FF85A1","#BD637D","#CDB4DB","#6A4C93","#4D194D","#A8D0DC","#2EC4B6","#1A535C","#6D9DCD","#1982C4","#A1C181","#8AC926","#A0A0A0","#6B4226","#505050","#CFD078","#145A7A","#8B1D24","#C07F7A","#C49A6C","#5B7B1C","#000000"],Hp=["#000000","#3c3c3c","#787878","#aaaaaa","#d2d2d2","#ffffff","#600018","#a50e1e","#ed1c24","#fa8072","#e45c1a","#ff7f27","#f6aa09","#f9dd3b","#fffabc","#9c8431","#c5ad31","#e8d45f","#4a6b3a","#5a944a","#84c573","#0eb968","#13e67b","#87ff5e","#0c816e","#10aea6","#13e1be","#0f799f","#60f7f2","#bbfaf2","#28509e","#4093e4","#7dc7ff","#4d31b8","#6b50f6","#99b1fb","#4a4284","#7a71c4","#b5aef1","#780c99","#aa38b9","#e09ff9","#cb007a","#ec1f80","#f38da9","#9b5249","#d18078","#fab6a4","#684634","#95682a","#dba463","#7b6352","#9c846b","#d6b594","#d18051","#f8b277","#ffc5a5","#6d643f","#948c6b","#cdc59e","#333941","#6d758d","#b3b9d1"],Wp=[{value:"none",label:"None (Nearest Color)"},{value:"floyd-steinberg",label:"Floyd-Steinberg"},{value:"burkes",label:"Burkes"},{value:"stucki",label:"Stucki"},{value:"sierra-2",label:"Sierra-2"},{value:"sierra-lite",label:"Sierra Lite"},{value:"bayer-4x4",label:"Bayer 4x4"},{value:"bayer-8x8",label:"Bayer 8x8"},{value:"halftone-dot",label:"Halftone Dot"},{value:"diagonal-line",label:"Diagonal Line"},{value:"cross-hatch",label:"Cross Hatch"},{value:"grid",label:"Grid"}],Iu=[64,100,128,150,200,250,256,300,350,400,450,500,512,550,600,650,700,750,800,850,900,950,1e3],Yp=({isOpen:i,onClose:c,layer:a})=>{const u=_(ne=>ne.updateLayer),f=sn(),[m,g]=v.useState(128),[w,h]=v.useState(128),[p,y]=v.useState("bilinear"),[x,E]=v.useState("none"),[C,N]=v.useState(100),[D,F]=v.useState("none"),[j,Y]=v.useState(50),[H,W]=v.useState("geopixels"),[M,$]=v.useState(""),[X,Z]=v.useState(null),[A,B]=v.useState(null),[q,ue]=v.useState(!1),[ee,J]=v.useState(1),[U,me]=v.useState(null),[V,K]=v.useState(String(m)),[Q,T]=v.useState(!0),[S,z]=v.useState(!1),[P,te]=v.useState(16),[ce,se]=v.useState([]),[de,le]=v.useState(8),[ye,we]=v.useState(!1),[Me,_e]=v.useState(!0),[Ge,Ke]=v.useState(!1),[Xe,yt]=v.useState(!0),[He,G]=v.useState(new Map),[Ie,Ee]=v.useState(null),[We,Pn]=v.useState(null),[Gt,Lr]=v.useState([]),[Mr,xo]=v.useState(!1),[Zn,Kn]=v.useState(!0),[an,Ln]=v.useState(!1),[Zt,Ms]=v.useState(!1),[Kt,Fr]=v.useState(0),[ln,Qn]=v.useState(0),[$t,Jn]=v.useState(0),[Ir,qn]=v.useState(!1),ct=v.useRef(null),St=v.useRef(null),yo=v.useRef(null),er=v.useRef(!1),tr=v.useRef(H),ot=v.useRef(750),vo=ne=>{const ve=ne.data,Se=new Map;let Pe=0;for(let Be=0;Be<ve.length;Be+=4){const ke=ve[Be],Ut=ve[Be+1],Ft=ve[Be+2];if(ve[Be+3]===0)continue;const Rn=`#${((1<<24)+(ke<<16)+(Ut<<8)+Ft).toString(16).slice(1).toUpperCase()}`;Se.set(Rn,(Se.get(Rn)||0)+1),Pe++}const Oe=new Map;Se.forEach((Be,ke)=>{Oe.set(ke,{count:Be,percent:Pe>0?Be/Pe*100:0})}),G(Oe)};v.useEffect(()=>(ct.current=new Up,ct.current&&(ct.current.onmessage=ne=>{const{type:ve,imageData:Se,message:Pe,suggestions:Oe,generatedPalette:Be}=ne.data;if(ve==="success"){const ke=document.createElement("canvas");ke.width=Se.width,ke.height=Se.height;const Ut=ke.getContext("2d");if(Ut){if(Ut.putImageData(Se,0,0),me({width:Se.width,height:Se.height}),B({width:Se.width,height:Se.height}),Zn){const Ft=Fn(Se.width,Se.height);J(Ft)}Z(ke.toDataURL()),vo(Se),Lr(Be||[])}}else ve==="suggestions"?(se(Oe),we(!1)):(console.error("Pixelator Worker Error:",Pe),we(!1));ue(!1)}),()=>{ct.current?.terminate()}),[]),v.useEffect(()=>{K(String(m))},[m]),v.useEffect(()=>{const ne=localStorage.getItem("pixelator_custom_palette");ne&&$(ne)},[]),v.useEffect(()=>{if(i&&a.imageData){const ne=new Image;ne.onload=()=>{h(ne.height),g(128)},ne.src=a.imageData}},[i,a.imageData]),v.useEffect(()=>{M.trim()&&localStorage.setItem("pixelator_custom_palette",M)},[M]);const Mt=v.useCallback(()=>{if(H==="none")return[];if(H==="geopixels")return Fu;if(H==="wplace")return Hp;const ne=M.trim();let ve=[];if(ne&&(ve=ne.split(/[\s,]+/).filter(Pe=>Pe.trim()!=="").map(Pe=>{const Oe=Pe.trim();if(/^\d+$/.test(Oe)){const Be=parseInt(Oe,10);if(Be>=0&&Be<=16777215)return"#"+Be.toString(16).padStart(6,"0").toUpperCase()}return/^#?[0-9A-F]{6}$/i.test(Oe)?Oe.startsWith("#")?Oe.toUpperCase():"#"+Oe.toUpperCase():null}).filter(Pe=>Pe!==null)),H==="custom")return ve;if(H==="geopixels+custom"){const Se=[...Fu];for(const Pe of ve)Se.includes(Pe.toUpperCase())||Se.push(Pe.toUpperCase());return Se}return[]},[H,M]);v.useEffect(()=>{tr.current==="none"&&H!=="none"?S?(er.current=!0,z(!1)):er.current=!1:tr.current!=="none"&&H==="none"?er.current&&z(!0):H!=="none"&&S&&z(!1),tr.current=H},[H,S]);const nr=v.useCallback(()=>{if(!ct.current||!a.imageData)return;ue(!0);const ne=new Image;ne.onload=()=>{const ve=document.createElement("canvas");ve.width=ne.width,ve.height=ne.height;const Se=ve.getContext("2d");if(!Se)return;Se.drawImage(ne,0,0);const Pe=Se.getImageData(0,0,ne.width,ne.height);Ke(zr(Pe));const Oe=Mt(),Be=ne.width/ne.height,ke=Math.round(m*Be);ct.current?.postMessage({imageData:Pe,settings:{targetWidth:ke,targetHeight:m,ditherMethod:x,ditherStrength:C,palette:Oe,resamplingMethod:p,useKmeans:S,kmeansColors:P,brightness:Kt,contrast:ln,saturation:$t,preprocessingMethod:D,preprocessingStrength:j,filterTrivialColors:an,colorStats:an?Array.from(He.entries()).map(([Ut,Ft])=>({color:Ut,percent:Ft.percent})):[]}})},ne.src=a.imageData},[a.imageData,m,x,C,Mt,p,S,P,Kt,ln,$t,D,j,an]);v.useEffect(()=>{if(!i||!Xe)return;const ne=setTimeout(()=>{nr(),ot.current=750},ot.current);return()=>clearTimeout(ne)},[i,Xe,m,x,C,H,M,p,S,P,Kt,ln,$t,D,j,an,nr]);const Mn=()=>{X&&A&&(u(a.id,{imageData:X,width:A.width,height:A.height}),c())},Fn=v.useCallback((ne,ve)=>{if(!St.current)return 1;const Se=St.current.clientWidth,Pe=St.current.clientHeight,Oe=Se-40,Be=Pe-40;if(Oe<=0||Be<=0)return 1;const ke=Oe/ne,Ut=Be/ve,Ft=Math.min(ke,Ut);return Math.max(.1,Ft)},[]),In=()=>J(ne=>Math.min(ne+.5,20)),Fs=()=>J(ne=>Math.max(ne-.5,.5)),zn=()=>J(1),cn=v.useCallback(()=>{U&&J(Fn(U.width,U.height))},[U,Fn]);v.useEffect(()=>{U&&St.current&&(Mr||setTimeout(()=>{cn(),xo(!0)},50))},[U,Mr,cn]);const rr=()=>g(w),zr=ne=>{const ve=ne.data;for(let Se=3;Se<ve.length;Se+=4){const Pe=ve[Se];if(Pe>0&&Pe<255)return!0}return!1},Is=ne=>{const ve=ne.currentTarget;me({width:ve.naturalWidth,height:ve.naturalHeight})},zs=v.useCallback(()=>{if(!ct.current||!a.imageData)return;if(Mt().length===0){alert("Please select a palette first to find missing colors.");return}we(!0);const ve=new Image;ve.onload=()=>{const Se=document.createElement("canvas");Se.width=ve.width,Se.height=ve.height;const Pe=Se.getContext("2d");if(!Pe)return;Pe.drawImage(ve,0,0);const Oe=Pe.getImageData(0,0,ve.width,ve.height);ct.current?.postMessage({type:"suggest",imageData:Oe,settings:{palette:Mt(),numSuggestions:de,preferDistinct:Me}})},ve.src=a.imageData},[a.imageData,Mt,de,Me]),Rs=()=>{const ne=M.trim(),ve=ce.join(", ");$(ne===""?ve:`${ne}, ${ve}`)},Nt=v.useMemo(()=>{let ne=Mt();return H==="none"&&S&&Gt.length>0&&(ne=Gt),He.size===0?ne:[...ne].sort((ve,Se)=>{const Pe=He.get(ve)?.count||0,Oe=He.get(Se)?.count||0;return Pe!==Oe?Oe-Pe:0})},[Mt,He,Gt,H,S]),wo=()=>{Nt.length>0&&navigator.clipboard.writeText(Nt.join(", "))},bo=ne=>{if(ne.length===0)return;const ve=ne.join(", "),Se=M.trim();$(Se===""?ve:`${Se}, ${ve}`),H!=="custom"&&H!=="geopixels+custom"&&(ot.current=100,W("geopixels+custom"))},Ts=()=>{if(Gt.length===0)return;const ne=Gt.join(", "),ve=M.trim();$(ve===""?ne:`${ve}, ${ne}`),ot.current=100,W("geopixels+custom")};return o.jsx(Pr,{isOpen:i,title:"Pixelator",onClose:c,noPadding:!0,modalId:"modal-pixelator",children:()=>o.jsxs("div",{className:`${f?"flex flex-col-reverse":"flex"} text-gray-200 h-full w-full overflow-hidden`,children:[o.jsxs("div",{className:`${f?"border-t max-h-[45vh]":"w-72 border-r"} border-gray-700 flex-shrink-0 flex flex-col overflow-hidden`,children:[o.jsxs("div",{className:"overflow-y-auto flex-1 p-4 space-y-6 text-gray-200",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Dimensions"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex gap-2 items-end",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Height (px)"}),o.jsx("input",{type:"text",inputMode:"numeric",value:V,onChange:ne=>{if(K(ne.target.value),ne.target.value!==""&&ne.target.value!=="-"){const ve=Number(ne.target.value);!isNaN(ve)&&ve>0&&g(ve)}},className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1 text-sm"})]}),o.jsxs("select",{className:"flex-1 bg-gray-800 border border-gray-600 rounded px-2 py-1 text-xs text-gray-400",onChange:ne=>{ne.target.value&&(ot.current=100,g(Number(ne.target.value)))},value:Iu.includes(m)?m:"",children:[o.jsx("option",{value:"",disabled:!0,children:"common sizes"}),Iu.map(ne=>o.jsxs("option",{value:ne,children:[ne,"px"]},ne))]}),o.jsx("button",{onClick:rr,className:"text-xs px-2 py-1 text-gray-400 hover:text-white bg-gray-700 hover:bg-gray-600 rounded transition-colors whitespace-nowrap flex-shrink-0",title:"Reset height to default",children:"Reset"})]}),A&&o.jsxs("div",{className:"text-xs text-gray-400 bg-gray-800 px-2 py-1 rounded whitespace-nowrap",children:[A.width,"  ",A.height," ",o.jsx("span",{className:"text-gray-600 mx-1",children:"|"})," ",(A.width*A.height).toLocaleString()," px"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Resampling"}),o.jsxs("select",{value:p,onChange:ne=>y(ne.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1 text-sm",children:[o.jsx("option",{value:"nearest",children:"Nearest Neighbor (Sharp)"}),o.jsx("option",{value:"bilinear",children:"Bilinear (Smooth)"}),o.jsx("option",{value:"lanczos",children:"Lanczos (High Quality)"})]})]})]}),Ge&&o.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-700 rounded p-3 flex gap-3",children:[o.jsx("div",{className:"text-yellow-500 text-xl flex-shrink-0",children:""}),o.jsxs("div",{className:"text-xs text-yellow-300",children:[o.jsx("p",{className:"font-semibold mb-1",children:"Semi-transparent pixels detected"}),o.jsx("p",{children:"Apply a transparency mask first for better results"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Palette"}),H==="geopixels+custom"&&o.jsxs("div",{className:"group relative",children:[o.jsx("span",{className:"cursor-help text-xs text-blue-400",children:"Fun Fact?"}),o.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-64 p-2 bg-gray-900 border border-gray-600 rounded shadow-xl text-xs text-gray-300 hidden group-hover:block z-50",children:["If you play on Geopixels, you can export your palette by typing ",o.jsx("code",{className:"text-yellow-400",children:"userData.colors"})," in the browser console. Paste the result here!"]})]})]}),o.jsxs("div",{className:"flex flex-col space-y-1",children:[o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"palette",checked:H==="geopixels",onChange:()=>{ot.current=100,W("geopixels")}}),o.jsx("span",{className:"text-sm",children:"Geopixels Base"})]}),o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"palette",checked:H==="wplace",onChange:()=>{ot.current=100,W("wplace")}}),o.jsx("span",{className:"text-sm",children:"WPlace Base"})]}),o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"palette",checked:H==="custom",onChange:()=>{ot.current=100,W("custom")}}),o.jsx("span",{className:"text-sm",children:"Custom"})]}),o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"palette",checked:H==="geopixels+custom",onChange:()=>{ot.current=100,W("geopixels+custom")}}),o.jsx("span",{className:"text-sm",children:"Geopixels Base + Custom"})]}),o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"palette",checked:H==="none",onChange:()=>{ot.current=100,W("none")}}),o.jsx("span",{className:"text-sm",children:"No Recoloring (Resize Only)"})]})]}),(H==="custom"||H==="geopixels+custom")&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("textarea",{value:M,onChange:ne=>$(ne.target.value),placeholder:"#FFFFFF, #000000 or 16777215, 0",className:"w-full h-24 bg-gray-800 border border-gray-600 rounded p-2 text-xs font-mono"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>qn(!0),className:"flex-1 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 text-white text-xs font-medium rounded transition-colors",children:"Eyedropper"}),o.jsxs("div",{className:"group relative",children:[o.jsx("span",{className:"cursor-help text-xs text-blue-400",children:"?"}),o.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-52 p-2 bg-gray-900 border border-gray-600 rounded shadow-xl text-xs text-gray-300 hidden group-hover:block z-50",children:"Select colors to use from template image"})]})]})]}),o.jsxs("div",{className:"border-t border-gray-700 pt-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("button",{onClick:()=>T(!Q),className:"flex items-center text-xs text-gray-400 hover:text-gray-300",children:[o.jsx("span",{children:"Palette Preview"}),o.jsx("span",{className:"ml-1",children:Q?"":""})]}),o.jsx("button",{onClick:wo,className:"text-gray-400 hover:text-white p-1 rounded hover:bg-gray-700",title:"Copy palette to clipboard",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m2 4h3a2 2 0 012 2v3m-3-3V5a2 2 0 012-2h3.071a2 2 0 011.414.586l1.414 1.414A2 2 0 0118 6.414V9m-3-3h3"})})})]}),Q&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex flex-wrap gap-0 bg-gray-900 p-1 rounded border border-gray-700",children:Nt.length>0?Nt.map((ne,ve)=>o.jsx("div",{className:"w-4 h-4 cursor-crosshair hover:z-10 hover:scale-125 transition-transform duration-75 border border-transparent hover:border-white",style:{backgroundColor:ne},onMouseEnter:Se=>{Ee(ne),Pn({x:Se.clientX,y:Se.clientY})},onMouseLeave:()=>{Ee(null),Pn(null)},onMouseMove:Se=>{Pn({x:Se.clientX,y:Se.clientY})}},ve)):o.jsx("div",{className:"text-xs text-gray-500 p-2",children:"No palette selected"})}),Ie&&We&&o.jsxs("div",{style:{position:"fixed",left:We.x+15,top:We.y+15,zIndex:9999,pointerEvents:"none"},className:"bg-gray-900 border border-gray-600 rounded p-2 shadow-xl text-xs min-w-[120px]",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1 pb-1 border-b border-gray-700",children:[o.jsx("div",{className:"w-3 h-3 border border-gray-500",style:{backgroundColor:Ie}}),o.jsx("span",{className:"font-mono font-bold text-white",children:Ie})]}),He.has(Ie)?o.jsxs("div",{className:"text-gray-300 space-y-0.5",children:[o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{children:"Count:"}),o.jsx("span",{className:"text-white font-mono",children:He.get(Ie)?.count.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{children:"Usage:"}),o.jsxs("span",{className:"text-white font-mono",children:[He.get(Ie)?.percent.toFixed(2),"%"]})]})]}):o.jsx("div",{className:"text-gray-500 italic",children:"Not used in preview"})]}),(H==="custom"||H==="geopixels+custom")&&o.jsxs("div",{className:"space-y-2 border-t border-gray-700 pt-2",children:[o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:an,onChange:ne=>Ln(ne.target.checked),className:"rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-blue-500 focus:ring-offset-gray-800",title:"Ignore colors below 0.1% usage during processing"}),o.jsx("span",{className:"text-xs text-gray-400",children:"Filter trivial colors (<0.1%)"})]}),o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase whitespace-nowrap",children:"Suggest Colors"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"number",min:"1",max:"32",value:de,onChange:ne=>le(Math.max(1,Math.min(32,Number(ne.target.value)))),className:"w-12 bg-gray-800 border border-gray-600 rounded px-1 py-0.5 text-xs text-center",title:"Number of colors to suggest"}),o.jsx("button",{onClick:zs,disabled:ye,className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white text-xs rounded transition-colors",children:ye?"...":"Go"})]})]}),o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:Me,onChange:ne=>_e(ne.target.checked),className:"rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-blue-500 focus:ring-offset-gray-800",title:"Prioritize colors that are distinct from each other"}),o.jsx("span",{className:"text-xs text-gray-400",children:"Prefer distinct color suggestions"})]}),ce.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex flex-wrap gap-1 bg-gray-900 p-2 rounded border border-gray-700",children:ce.map((ne,ve)=>o.jsx("div",{className:"w-8 h-8 rounded border border-gray-500 cursor-pointer hover:border-white",style:{backgroundColor:ne},title:`${ne} - Click to copy`,onClick:()=>{navigator.clipboard.writeText(ne)}},ve))}),o.jsx("button",{onClick:Rs,className:"w-full px-2 py-1 bg-gray-700 hover:bg-gray-600 text-white text-xs rounded transition-colors",children:"Add to Custom Palette"})]}),o.jsx("p",{className:"text-xs text-gray-500",children:"Analyzes the image to find dominant colors missing from your palette."})]})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Dithering"}),o.jsx("select",{value:x,onChange:ne=>{ot.current=100,E(ne.target.value)},className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1 text-sm",children:Wp.map(ne=>o.jsx("option",{value:ne.value,children:ne.label},ne.value))}),x!=="none"&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[o.jsx("span",{children:"Strength"}),o.jsxs("span",{children:[C,"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:C,onChange:ne=>N(Number(ne.target.value)),className:"w-full"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"group relative inline-block w-full",children:[o.jsxs("label",{className:`flex items-center space-x-2 ${H!=="none"?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[o.jsx("input",{type:"checkbox",checked:S,onChange:ne=>z(ne.target.checked),disabled:H!=="none"}),o.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase",children:"K-Means Color Reduction"})]}),H!=="none"&&o.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-64 p-2 bg-gray-900 border border-gray-600 rounded shadow-xl text-xs text-gray-300 hidden group-hover:block z-50",children:`K-Means is only available when "No Recoloring" is selected. It's used to reduce the color space when you're not providing a specific palette.`})]}),S&&o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Number of Colors"}),o.jsx("input",{type:"number",min:"2",max:"256",value:P,onChange:ne=>te(Number(ne.target.value)),className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1 text-sm"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Reduces image to N dominant colors before applying palette/dithering."}),Gt.length>0&&o.jsx("button",{onClick:Ts,className:"w-full mt-2 px-3 py-1.5 bg-teal-700 hover:bg-teal-600 text-white text-xs font-medium rounded transition-colors",title:"Send K-Means palette to Geopixels Base + Custom",children:"Send Colors to Geopixels Custom Palette"})]})]}),o.jsxs("div",{className:"space-y-2 border-t border-gray-700 pt-2",children:[o.jsxs("button",{onClick:()=>Ms(!Zt),className:"flex items-center justify-between w-full text-xs font-semibold text-gray-400 hover:text-gray-300 uppercase",children:[o.jsx("span",{children:"Extra Features"}),o.jsx("span",{children:Zt?"":""})]}),Zt&&o.jsxs("div",{className:"space-y-3 pt-2",children:[o.jsxs("div",{className:"border-b border-gray-700 pb-3",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase mb-2 block",children:"Pre-processing (Experimental)"}),o.jsxs("select",{value:D,onChange:ne=>{ot.current=100,F(ne.target.value)},className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1 text-sm mb-2",title:"Apply filters before pixelation to improve results (may impact performance)",children:[o.jsx("option",{value:"none",children:"None"}),o.jsx("option",{value:"kuwahara",children:"Kuwahara (Oil Paint / Flatten)"}),o.jsx("option",{value:"median",children:"Median (De-noise / Smooth)"}),o.jsx("option",{value:"bilateral",children:"Bilateral (Soft Blur)"})]}),D!=="none"&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-2",children:[o.jsx("span",{children:"Intensity"}),o.jsxs("span",{children:[j,"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:j,onChange:ne=>{ot.current=100,Y(Number(ne.target.value))},className:"w-full"}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[D==="bilateral"&&"Smooths surfaces while keeping edges. Good for photographs.",D==="kuwahara"&&'Best for Pixel Art. Creates flat, "painted" clusters of color.',D==="median"&&"Removes noise and small details. Great for cleaning up JPEGs before pixelating."]})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[o.jsx("span",{children:"Brightness"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:Kt}),o.jsx("button",{onClick:()=>Fr(0),className:"text-gray-500 hover:text-white disabled:opacity-0 transition-opacity",title:"Reset Brightness",disabled:Kt===0,children:""})]})]}),o.jsx("input",{type:"range",min:"-100",max:"100",value:Kt,onChange:ne=>Fr(Number(ne.target.value)),className:"w-full"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[o.jsx("span",{children:"Contrast"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:ln}),o.jsx("button",{onClick:()=>Qn(0),className:"text-gray-500 hover:text-white disabled:opacity-0 transition-opacity",title:"Reset Contrast",disabled:ln===0,children:""})]})]}),o.jsx("input",{type:"range",min:"-100",max:"100",value:ln,onChange:ne=>Qn(Number(ne.target.value)),className:"w-full"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[o.jsx("span",{children:"Saturation"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:$t}),o.jsx("button",{onClick:()=>Jn(0),className:"text-gray-500 hover:text-white disabled:opacity-0 transition-opacity",title:"Reset Saturation",disabled:$t===0,children:""})]})]}),o.jsx("input",{type:"range",min:"-100",max:"100",value:$t,onChange:ne=>Jn(Number(ne.target.value)),className:"w-full"})]})]})]})]}),!Xe&&o.jsx("div",{className:"p-4 border-t border-gray-700 bg-gray-800/30 flex-shrink-0",children:o.jsxs("button",{onClick:nr,className:"w-full bg-green-600 hover:bg-green-500 text-white py-2 rounded font-semibold transition-colors flex items-center justify-center gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Execute"})]})})]}),o.jsxs("div",{className:"flex-1 bg-gray-900 relative overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-800/50 border-b border-gray-700 flex-shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xs text-gray-400",children:"Preview"}),o.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:Xe,onChange:ne=>yt(ne.target.checked),className:"rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-blue-500 focus:ring-offset-gray-800"}),o.jsx("span",{className:"text-xs text-gray-400 select-none",children:"Auto-update"})]}),o.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",title:"Always fit preview to screen",children:[o.jsx("input",{type:"checkbox",checked:Zn,onChange:ne=>Kn(ne.target.checked),className:"rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-blue-500 focus:ring-offset-gray-800"}),o.jsx("span",{className:"text-xs text-gray-400 select-none",children:"Pin Fit"})]})]}),o.jsxs("div",{className:"flex space-x-2 items-center",children:[o.jsx("button",{onClick:Fs,className:"bg-gray-700 p-1 rounded hover:bg-gray-600 text-sm font-bold",title:"Zoom out",children:""}),o.jsxs("span",{className:"bg-gray-700 px-2 py-1 rounded text-sm font-mono min-w-[50px] text-center",children:[Math.round(ee*100),"%"]}),o.jsx("button",{onClick:In,className:"bg-gray-700 p-1 rounded hover:bg-gray-600 text-sm font-bold",title:"Zoom in",children:"+"}),o.jsx("button",{onClick:cn,className:"bg-gray-700 px-2 py-1 rounded hover:bg-gray-600 text-xs",title:"Fit to screen",children:"Fit"}),o.jsx("button",{onClick:zn,className:"bg-gray-700 px-2 py-1 rounded hover:bg-gray-600 text-xs",title:"Reset zoom",children:"Reset"})]})]}),q&&o.jsx("div",{className:"absolute top-14 right-4 z-20 pointer-events-none",children:o.jsxs("div",{className:"bg-gray-900/90 border border-gray-700 text-gray-200 text-xs px-3 py-1.5 rounded shadow-lg flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),"Generating..."]})}),o.jsx("div",{ref:St,className:"flex-1 overflow-auto bg-gray-900",children:X?o.jsx("div",{style:{display:"inline-block",padding:"20px"},children:o.jsx("img",{ref:yo,src:X,alt:"Preview",onLoad:Is,style:{width:U?`${U.width*ee}px`:"auto",height:U?`${U.height*ee}px`:"auto",maxWidth:"none",imageRendering:"pixelated"}})}):o.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:"Click Execute to generate preview"})}),o.jsx("div",{className:"px-4 py-3 bg-gray-800/50 border-t border-gray-700 flex-shrink-0",children:o.jsx("button",{onClick:Mn,disabled:!X,className:"w-full bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white py-2 rounded font-semibold transition-colors",children:"Apply Pixelation"})})]}),o.jsx($p,{isOpen:Ir,onClose:()=>qn(!1),imageDataUrl:a.imageData,onAddColors:bo})]})})},Ds=5,Xp=({isOpen:i,onClose:c,layer:a})=>{const u=_(B=>B.updateLayer),[f,m]=v.useState(null),[g,w]=v.useState(null),[h,p]=v.useState(1),[y,x]=v.useState(null),[E,C]=v.useState(!1),N=v.useRef(null),D=v.useRef(null),F=v.useRef(null),j=v.useRef({cropRect:null,zoom:1,imageDimensions:null,isDragging:!1});v.useEffect(()=>{j.current.cropRect=y,j.current.zoom=h,j.current.imageDimensions=g},[y,h,g]),v.useEffect(()=>{!i||!a.imageData||(m(a.imageData),p(1),x(null),C(!1))},[i,a.imageData]);const Y=B=>{const q=B.currentTarget,ue={width:q.naturalWidth,height:q.naturalHeight};w(ue),x({x:0,y:0,width:ue.width,height:ue.height})},H=(B,q)=>{if(!F.current)return 1;const ue=F.current.clientWidth,ee=F.current.clientHeight;if(ue<=0||ee<=0)return 1;const J=ue/B,U=ee/q,me=Math.min(J,U);return Math.max(.1,me*.9)};v.useEffect(()=>{g&&F.current&&!E&&setTimeout(()=>{const B=H(g.width,g.height);p(B),C(!0)},100)},[g,E]);const W=(B,q)=>{if(B.preventDefault(),!D.current||!j.current.cropRect||!j.current.imageDimensions)return;j.current.isDragging=!0;const ue=B.clientX,ee=B.clientY,J={...j.current.cropRect},U=j.current.zoom,me=j.current.imageDimensions,V=Q=>{if(!j.current.isDragging)return;const T=(Q.clientX-ue)/U,S=(Q.clientY-ee)/U;let z={...J};q==="move"?(z.x=J.x+T,z.y=J.y+S):(q.includes("n")&&(z.y=J.y+S,z.height=J.height-S),q.includes("s")&&(z.height=J.height+S),q.includes("w")&&(z.x=J.x+T,z.width=J.width-T),q.includes("e")&&(z.width=J.width+T)),z.x=Math.max(0,Math.min(z.x,me.width-Ds)),z.y=Math.max(0,Math.min(z.y,me.height-Ds)),z.width=Math.max(Ds,Math.min(z.width,me.width-z.x)),z.height=Math.max(Ds,Math.min(z.height,me.height-z.y)),x(z),j.current.cropRect=z},K=()=>{j.current.isDragging=!1,document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",K)};document.addEventListener("mousemove",V),document.addEventListener("mouseup",K)},M=()=>p(B=>Math.min(5,B+.25)),$=()=>p(B=>Math.max(.1,B-.25)),X=()=>{p(g?H(g.width,g.height):1)},Z=async()=>{if(!f||!g)return;const B=new Image;B.src=f,await new Promise(T=>{B.onload=T,B.onerror=T});const q=document.createElement("canvas");q.width=g.width,q.height=g.height;const ue=q.getContext("2d");if(!ue)return;ue.drawImage(B,0,0);const J=ue.getImageData(0,0,g.width,g.height).data;let U=g.width,me=g.height,V=-1,K=-1;for(let T=0;T<J.length;T+=4)if(J[T+3]>0){const z=T/4,P=z%g.width,te=Math.floor(z/g.width);U=Math.min(U,P),me=Math.min(me,te),V=Math.max(V,P),K=Math.max(K,te)}if(V<U||K<me)return;const Q={x:U,y:me,width:V-U+1,height:K-me+1};x(Q),j.current.cropRect=Q},A=async()=>{if(!y||!g||!f)return;const B=new Image;B.src=f,await new Promise(J=>{B.onload=J,B.onerror=J});const q=document.createElement("canvas");q.width=Math.round(y.width),q.height=Math.round(y.height);const ue=q.getContext("2d");if(!ue)return;ue.imageSmoothingQuality="high",ue.drawImage(B,Math.round(y.x),Math.round(y.y),Math.round(y.width),Math.round(y.height),0,0,Math.round(y.width),Math.round(y.height));const ee=q.toDataURL();u(a.id,{imageData:ee,width:Math.round(y.width),height:Math.round(y.height)}),c()};return o.jsx(Pr,{isOpen:i,title:"Crop",onClose:c,modalId:"modal-crop",children:o.jsxs("div",{className:"flex flex-col h-full p-4 gap-4 text-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium",children:"Preview"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{id:"btn-crop-zoom-out",onClick:$,disabled:h<=.1,className:"p-1 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Zoom out","aria-label":"Zoom out",children:""}),o.jsxs("span",{className:"text-xs text-gray-400 min-w-[45px] text-center",children:[Math.round(h*100),"%"]}),o.jsx("button",{id:"btn-crop-zoom-in",onClick:M,disabled:h>=5,className:"p-1 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Zoom in","aria-label":"Zoom in",children:"+"}),o.jsx("button",{id:"btn-crop-zoom-reset",onClick:X,className:"text-xs px-2 py-1 text-gray-400 hover:text-white bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Reset zoom","aria-label":"Reset zoom",children:"Reset"}),o.jsx("button",{id:"btn-crop-auto",onClick:Z,className:"text-xs px-2 py-1 text-cyan-200 bg-cyan-900 hover:bg-cyan-800 rounded transition-colors",title:"Auto-crop to remove transparent edges","aria-label":"Auto-crop transparent edges",children:"Auto"})]})]}),o.jsxs("div",{className:"flex gap-4 text-xs text-gray-400",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Original:"})," ",g?`${g.width}${g.height}`:""]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Crop:"})," ",y?`${Math.round(y.width)}${Math.round(y.height)}`:""]})]}),o.jsx("div",{className:"flex-1 relative w-full bg-gray-900 rounded border border-gray-700 overflow-auto",ref:F,children:f?o.jsxs("div",{ref:N,style:{display:"inline-block",padding:10,position:"relative"},children:[o.jsx("img",{ref:D,src:f,alt:"Preview",onLoad:Y,style:{width:g?`${g.width*h}px`:"auto",height:g?`${g.height*h}px`:"auto",display:"block",maxWidth:"none",userSelect:"none"}}),g&&y&&o.jsxs("div",{style:{position:"absolute",left:10+y.x*h,top:10+y.y*h,width:Math.max(0,y.width*h),height:Math.max(0,y.height*h),boxSizing:"border-box",border:"2px dashed rgba(100,200,255,0.8)",pointerEvents:"none"},children:[o.jsx("div",{onMouseDown:B=>W(B,"move"),style:{position:"absolute",inset:0,cursor:"move",pointerEvents:"auto",background:"rgba(100,200,255,0.05)"}}),[{type:"nw",left:-6,top:-6,cursorStyle:"nw-resize"},{type:"n",left:"50%",top:-6,transform:"translateX(-50%)",cursorStyle:"n-resize"},{type:"ne",right:-6,top:-6,cursorStyle:"ne-resize"},{type:"e",right:-6,top:"50%",transform:"translateY(-50%)",cursorStyle:"e-resize"},{type:"se",right:-6,bottom:-6,cursorStyle:"se-resize"},{type:"s",left:"50%",bottom:-6,transform:"translateX(-50%)",cursorStyle:"s-resize"},{type:"sw",left:-6,bottom:-6,cursorStyle:"sw-resize"},{type:"w",left:-6,top:"50%",transform:"translateY(-50%)",cursorStyle:"w-resize"}].map(({type:B,cursorStyle:q,...ue})=>o.jsx("div",{onMouseDown:ee=>W(ee,B),style:{position:"absolute",width:12,height:12,background:"#fff",border:"1px solid #000",borderRadius:2,cursor:q,pointerEvents:"auto",boxSizing:"border-box",...ue}},B))]})]}):o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"text-gray-500",children:"No preview available"})})}),o.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t border-gray-700",children:[o.jsx("button",{id:"btn-crop-cancel",onClick:c,className:"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-700 rounded hover:bg-gray-600 transition-colors","aria-label":"Cancel crop",children:"Cancel"}),o.jsx("button",{id:"btn-crop-apply",onClick:A,disabled:!y,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Apply crop",children:"Apply"})]})]})})};function zu(){const i=_(C=>C.project),c=_(C=>C.selectedLayerIds),a=i.layers.filter(C=>c.includes(C.id)),[u,f]=v.useState(!1),[m,g]=v.useState(!1),[w,h]=v.useState(!1),[p,y]=v.useState(!1),[x,E]=v.useState(!1);return o.jsxs("div",{className:"h-full flex flex-col bg-canvas-bg overflow-hidden","data-region":"property-panel",children:[o.jsx("div",{className:"px-3 py-3 border-b border-border",children:o.jsx("h2",{className:"text-sm font-semibold text-gray-300",children:"Properties"})}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:c.length===0?o.jsxs("div",{className:"p-4 text-center text-sm text-gray-500",children:[o.jsx("div",{className:"mb-2",children:"No layer selected"}),o.jsx("div",{className:"text-xs",children:"Select a layer to edit properties"})]}):o.jsxs("div",{className:"p-3 space-y-4",children:[o.jsxs("div",{className:"bg-panel-bg rounded p-2 text-xs text-gray-400",children:[o.jsx("div",{className:"font-semibold text-gray-300 mb-1",children:"Selected"}),a.map(C=>o.jsx("div",{className:"truncate",children:C.name},C.id))]}),c.length===1&&a.length>0&&o.jsx(Lp,{layer:a[0]}),c.length===1&&a.length>0&&o.jsx(Mp,{layer:a[0]}),c.length===1&&a.length>0&&o.jsx(Fp,{layer:a[0]}),c.length===1&&a.length>0&&a[0].shapeType&&o.jsx(_p,{layer:a[0]}),c.length===1&&a.length>0&&o.jsxs("div",{className:"relative","data-region":"actions-menu",children:[o.jsx("div",{className:"text-xs font-semibold text-gray-300 mb-2",children:"Actions"}),o.jsxs("button",{id:"btn-modify-menu",onClick:()=>f(!u),className:"w-full px-3 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs rounded transition-colors flex justify-between items-center","aria-label":"Open modify menu","aria-expanded":u,children:[o.jsx("span",{children:"Modify..."}),o.jsx("span",{className:"text-[10px]",children:""})]}),u&&o.jsxs("div",{className:"absolute left-0 top-full mt-1 w-full bg-panel-bg border border-border rounded shadow-lg z-20",children:[o.jsx("button",{id:"btn-open-transparency-modal",onClick:()=>{g(!0),f(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-300 hover:bg-slate-700 hover:text-white","aria-label":"Open transparency masking",children:"Transparency Masking"}),o.jsx("button",{id:"btn-open-pixelator-modal",onClick:()=>{h(!0),f(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-300 hover:bg-slate-700 hover:text-white","aria-label":"Open pixelator",children:"Pixelator"}),o.jsx("button",{id:"btn-open-crop-modal",onClick:()=>{y(!0),f(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-300 hover:bg-slate-700 hover:text-white","aria-label":"Open crop tool",children:"Crop"}),o.jsx("button",{id:"btn-open-bg-removal-modal",onClick:()=>{E(!0),f(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-300 hover:bg-slate-700 hover:text-white","aria-label":"Open background removal",children:"BG Removal (Experimental)"})]})]}),c.length===1&&a.length>0&&o.jsx(Op,{isOpen:m,onClose:()=>g(!1),layer:a[0]}),c.length===1&&a.length>0&&o.jsx(Yp,{isOpen:w,onClose:()=>h(!1),layer:a[0]}),c.length===1&&a.length>0&&o.jsx(Bp,{isOpen:x,onClose:()=>E(!1),layer:a[0]}),c.length===1&&a.length>0&&o.jsx(Xp,{isOpen:p,onClose:()=>y(!1),layer:a[0]}),c.length>1&&o.jsx(Vp,{})]})})]})}function Vp(){const i=_(u=>u.moveSelectedLayers),c=_(u=>u.selectedLayerIds),a=(u,f)=>{console.log(`[DEBUG] Moving ${c.length} layers by (${u}, ${f})`),i(u,f)};return o.jsxs("div",{className:"bg-panel-bg rounded p-3 space-y-3",children:[o.jsx("div",{className:"text-xs font-semibold text-gray-300",children:"Move Selected"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Offset X"}),o.jsx("input",{id:"input-bulk-offset-x",type:"number",defaultValue:0,onKeyDown:u=>{if(u.key==="Enter"){const f=parseInt(u.target.value)||0;a(f,0),u.target.value="0"}},className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"Pixels","aria-label":"Offset X pixels"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Offset Y"}),o.jsx("input",{id:"input-bulk-offset-y",type:"number",defaultValue:0,onKeyDown:u=>{if(u.key==="Enter"){const f=parseInt(u.target.value)||0;a(0,f),u.target.value="0"}},className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"Pixels","aria-label":"Offset Y pixels"})]})]}),o.jsxs("div",{className:"flex gap-1 text-xs",children:[o.jsx("button",{id:"btn-bulk-move-left",onClick:()=>a(-1,0),className:"flex-1 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Move left 1px (Shift+)","aria-label":"Move left 1 pixel",children:""}),o.jsx("button",{id:"btn-bulk-move-right",onClick:()=>a(1,0),className:"flex-1 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Move right 1px (Shift+)","aria-label":"Move right 1 pixel",children:""}),o.jsx("button",{id:"btn-bulk-move-up",onClick:()=>a(0,-1),className:"flex-1 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Move up 1px (Shift+)","aria-label":"Move up 1 pixel",children:""}),o.jsx("button",{id:"btn-bulk-move-down",onClick:()=>a(0,1),className:"flex-1 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Move down 1px (Shift+)","aria-label":"Move down 1 pixel",children:""})]})]})}function Ru(){const i=_(p=>p.project.viewport),c=_(p=>p.project.canvas),a=_(p=>p.setViewport),u=[25,33,50,66,75,100,125,150,200,400,800,1600,3200],f=()=>{const p=document.querySelector('[data-region="canvas"]');if(!p)return 100;const y=p.clientWidth,x=p.clientHeight;if(y<=0||x<=0||c.width<=0||c.height<=0)return 100;const E=y/c.width,C=x/c.height,N=Math.min(E,C)*100,D=u.reduce((Y,H)=>Math.abs(H-N)<Math.abs(Y-N)?H:Y),F=u.indexOf(D);return F>0?u[F-1]:D},m=p=>{a({zoom:p})},g=()=>{const p=i.zoom,y=u.find(x=>x>p)||u[u.length-1];m(y)},w=()=>{const p=i.zoom,y=[...u].reverse().find(x=>x<p)||u[0];m(y)},h=()=>{const p=f();a({zoom:p,panX:0,panY:0})};return o.jsxs("div",{className:"flex items-center gap-2 bg-canvas-bg rounded px-2 py-1","data-region":"zoom-controls",children:[o.jsx("button",{id:"btn-zoom-out",onClick:w,className:"px-2 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors",title:"Zoom Out","aria-label":"Zoom out",children:""}),o.jsxs("div",{className:"relative group",children:[o.jsxs("button",{id:"btn-zoom-level",className:"px-3 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors min-w-16 text-right",title:"Click to select zoom level","aria-label":`Current zoom: ${i.zoom}%`,children:[i.zoom,"%"]}),o.jsx("div",{className:"absolute right-0 mt-1 w-24 bg-panel-bg border border-border rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:u.map(p=>o.jsxs("button",{id:`btn-zoom-preset-${p}`,onClick:()=>m(p),className:`w-full text-left px-3 py-1 text-sm transition-colors ${i.zoom===p?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,"aria-label":`Set zoom to ${p}%`,children:[p,"%"]},p))})]}),o.jsx("button",{id:"btn-zoom-in",onClick:g,className:"px-2 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors",title:"Zoom In","aria-label":"Zoom in",children:"+"}),o.jsx("div",{className:"w-px h-4 bg-border"}),o.jsx("button",{id:"btn-zoom-reset",onClick:h,className:"px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-300 hover:bg-gray-700 rounded transition-colors",title:"Fit canvas to screen","aria-label":"Fit canvas to screen",children:"Reset"})]})}function Gp(){const i=v.useRef(null),[c,a]=v.useState(1),u=_(x=>x.project),f=_(x=>x.resetProject),m=_(x=>x.loadProject),g=_(x=>x.markClean);v.useEffect(()=>{const x=E=>{const C=E.ctrlKey||E.metaKey;C&&E.key==="s"&&(E.preventDefault(),w()),C&&E.key==="o"&&(E.preventDefault(),i.current?.click())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[u]);const w=async()=>{try{const x=Hu(u),E=new Blob([x],{type:"application/json"}),C=URL.createObjectURL(E),N=document.createElement("a");N.href=C,N.download=`${u.projectName||"untitled"}.pixcomp`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(C),g(),alert(`Project saved: ${N.download}`)}catch(x){console.error("[DEBUG] Save project failed:",x),alert(`Error saving project: ${x instanceof Error?x.message:"Unknown error"}`)}},h=async x=>{const E=x.target.files;if(!E||E.length===0){console.warn("[DEBUG] No file selected for loading");return}for(const C of Array.from(E))if(C.name.toLowerCase().endsWith(".pixcomp")||C.name.toLowerCase().endsWith(".json"))try{const N=await C.text(),D=await Al(N);m(D),g(),alert(`Project loaded: ${C.name}`)}catch(N){console.error("[DEBUG] Load project failed:",N),alert(`Error loading project: ${N instanceof Error?N.message:"Unknown error"}`)}else if(C.type.startsWith("image/"))try{const N=await new Promise((j,Y)=>{const H=new FileReader;H.onload=W=>j(W.target?.result),H.onerror=()=>Y(new Error("Failed to read file")),H.readAsDataURL(C)}),D=new Image;D.src=N,await new Promise((j,Y)=>{D.onload=()=>j(),D.onerror=()=>Y(new Error("Failed to load image"))});const F=_.getState().addLayer;F({name:C.name,imageData:N,x:0,y:0,zIndex:_.getState().project.layers.length,visible:!0,locked:!1,opacity:1,width:D.naturalWidth,height:D.naturalHeight})}catch(N){console.error(`[DEBUG] Error loading image ${C.name}:`,N),alert(`Error loading image ${C.name}: ${N instanceof Error?N.message:"Unknown error"}`)}i.current&&(i.current.value="")},p=()=>{_.getState().isDirty&&!window.confirm("You have unsaved changes. Create new project anyway?")||f()},y=async()=>{try{const x=await kp(u.layers,u.canvas.width,u.canvas.height,c,u.canvas.backgroundColor),E=URL.createObjectURL(x),C=document.createElement("a");C.href=E,C.download=`${u.projectName||"composite"}_${c}x.png`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(E),alert(`PNG exported: ${C.download}`)}catch(x){console.error("[DEBUG] Export PNG failed:",x),alert(`Error exporting PNG: ${x instanceof Error?x.message:"Unknown error"}`)}};return o.jsxs("div",{className:"flex items-center gap-1","data-region":"file-operations",children:[o.jsx("button",{id:"btn-new-project",onClick:p,className:"px-3 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors",title:"New project","aria-label":"New project",children:"New"}),o.jsx("button",{id:"btn-save-project",onClick:w,className:"px-3 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors",title:"Save project as .pixcomp file (Ctrl+S)","aria-label":"Save project",children:"Save Project"}),o.jsx("button",{id:"btn-load-project",onClick:()=>i.current?.click(),className:"px-3 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors",title:"Load .pixcomp project or image files (Ctrl+O)","aria-label":"Load project or images",children:"Load"}),o.jsx("button",{id:"btn-export-png",onClick:y,className:"px-3 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors",title:"Export canvas as PNG","aria-label":"Export canvas as PNG",children:"Export Image"}),o.jsxs("div",{className:"relative group",children:[o.jsxs("button",{id:"btn-export-scale",className:"px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-300 bg-panel-bg hover:bg-gray-700 rounded transition-colors opacity-0 group-hover:opacity-100",title:"Export scale","aria-label":`Export scale: ${c}x`,children:[c,"x"]}),o.jsx("div",{className:"absolute right-0 mt-1 w-16 bg-panel-bg border border-border rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[1,2,4,8].map(x=>o.jsxs("button",{id:`btn-export-scale-${x}`,onClick:()=>{a(x)},className:`w-full text-left px-2 py-1 text-xs transition-colors ${c===x?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,"aria-label":`Set export scale to ${x}x`,children:[x,"x"]},x))})]}),o.jsx("input",{ref:i,id:"input-load-file",type:"file",multiple:!0,accept:".pixcomp,.json,image/png,image/gif,image/bmp,image/jpeg",onChange:h,className:"hidden","aria-label":"Load project or image files"})]})}function Zp(){const i=_(w=>w.history),c=_(w=>w.undo),a=_(w=>w.redo),u=i.past.length>0,f=i.future.length>0,m=()=>{c()},g=()=>{a()};return o.jsxs("div",{className:"flex items-center gap-1","data-region":"history-controls",children:[o.jsx("button",{id:"btn-undo",onClick:m,disabled:!u,className:`px-3 py-1 text-sm font-medium rounded transition-colors ${u?"text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700":"text-gray-600 bg-panel-bg cursor-not-allowed opacity-50"}`,title:`Undo (${i.past.length} operation${i.past.length!==1?"s":""} available) - Ctrl+Z`,"aria-label":"Undo",children:""}),o.jsx("button",{id:"btn-redo",onClick:g,disabled:!f,className:`px-3 py-1 text-sm font-medium rounded transition-colors ${f?"text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700":"text-gray-600 bg-panel-bg cursor-not-allowed opacity-50"}`,title:`Redo (${i.future.length} operation${i.future.length!==1?"s":""} available) - Ctrl+Shift+Z`,"aria-label":"Redo",children:""})]})}function Kp(){const i=_(f=>f.project.grid.enabled),c=_(f=>f.project.grid.density),a=_(f=>f.toggleGrid),u=_(f=>f.setGridDensity);return v.useEffect(()=>{const f=Ls();f.gridEnabled=i,f.gridDensity=c,Ol(f)},[i,c]),o.jsxs("div",{className:"flex items-center gap-1","data-region":"grid-toggle",children:[o.jsx("button",{id:"btn-toggle-grid",onClick:a,className:`px-3 py-1 text-sm font-medium rounded transition-colors ${i?"bg-gray-600 text-white hover:bg-gray-500":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,title:"Toggle pixel grid (shows lines between pixels)","aria-label":i?"Disable pixel grid":"Enable pixel grid","aria-pressed":i,children:"Grid"}),i&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("label",{className:"text-xs text-gray-400",children:"Density:"}),o.jsx("input",{id:"input-grid-density",type:"range",min:"1",max:"8",value:c,onChange:f=>u(parseInt(f.target.value)),className:"w-24 h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer",title:`Grid density: every ${c} pixel(s)`,"aria-label":"Grid density"}),o.jsx("span",{className:"text-xs text-gray-400 w-6",children:c})]})]})}function Qp({onHelpClick:i}){const c=_(j=>j.project),a=_(j=>j.setProjectName),u=_(j=>j.ui.showSelectionBorders),f=_(j=>j.toggleSelectionBorders),m=_(j=>j.ui.showSelectionTools),g=_(j=>j.toggleSelectionTools),w=_(j=>j.ui.selectionBorderAnimationSpeed),h=_(j=>j.setSelectionBorderAnimationSpeed),[p,y]=v.useState(!1),[x,E]=v.useState(c.projectName),C=sn();v.useEffect(()=>{const j=Ls();j.showSelectionBorders=u,j.selectionBorderAnimationSpeed=w,Ol(j)},[u,w]);const N=()=>{x.trim()?a(x.trim()):E(c.projectName),y(!1)},D=j=>{j.key==="Enter"?N():j.key==="Escape"&&(E(c.projectName),y(!1))},F=o.jsxs(o.Fragment,{children:[o.jsx(Kp,{}),o.jsx("div",{className:"w-px h-6 bg-border"}),o.jsx("button",{id:"btn-toggle-borders",onClick:f,title:u?"Hide selection borders":"Show selection borders","aria-label":u?"Hide selection borders":"Show selection borders","aria-pressed":u,className:`px-3 py-1 rounded transition-colors text-sm font-medium ${u?"bg-gray-600 text-white hover:bg-gray-500":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Borders"}),u&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-xs text-gray-400 whitespace-nowrap",children:"Speed:"}),o.jsx("input",{id:"input-border-speed",type:"range",min:"0",max:"1",step:"0.1",value:w,onChange:j=>h(parseFloat(j.target.value)),className:"w-24 h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer",title:"Border animation speed (0 = static, 1 = max speed)","aria-label":"Border animation speed"})]}),o.jsx("div",{className:"w-px h-6 bg-border"}),o.jsx("button",{id:"btn-toggle-tools",onClick:g,title:m?"Hide selection tools":"Show selection tools","aria-label":m?"Hide selection tools":"Show selection tools","aria-pressed":m,className:`px-3 py-1 rounded transition-colors text-sm font-medium ${m?"bg-gray-600 text-white hover:bg-gray-500":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Tools"})]});return o.jsxs("div",{className:"bg-panel-bg border-b border-border px-4 py-2","data-region":"toolbar",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[o.jsxs("div",{className:"text-lg font-semibold whitespace-nowrap",children:[o.jsx("span",{className:"text-red-500",children:"Pi"}),o.jsx("span",{className:"text-sky-400 hidden sm:inline",children:"xelConnect"})]}),o.jsx("div",{className:"text-gray-500 hidden sm:block",children:"|"}),p?o.jsx("input",{id:"input-project-name",autoFocus:!0,type:"text",value:x,onChange:j=>E(j.target.value),onBlur:N,onKeyDown:D,className:"flex-1 px-2 py-1 bg-canvas-bg border border-blue-500 rounded text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Project name...","aria-label":"Project name"}):o.jsx("button",{id:"btn-rename-project",onClick:()=>{E(c.projectName),y(!0)},className:"flex-1 text-left px-2 py-1 text-gray-300 hover:text-white hover:bg-canvas-bg rounded transition-colors truncate",title:"Click to rename project","aria-label":"Rename project",children:c.projectName})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Gp,{}),o.jsx("div",{className:"w-px h-6 bg-border"}),o.jsx(Zp,{}),i&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-px h-6 bg-border"}),o.jsx("button",{onClick:i,className:"px-2 py-1 rounded text-sm font-bold text-blue-400 hover:text-white hover:bg-gray-700 transition-colors",title:"Open tutorial","aria-label":"Open tutorial",children:"?"})]})]}),!C&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-px h-6 bg-border"}),o.jsx("div",{className:"flex items-center gap-2",children:F}),o.jsx("div",{className:"flex items-center gap-2 ml-auto",children:o.jsx(Ru,{})})]})]}),C&&o.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2 pt-2 border-t border-border justify-between",children:[o.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:F}),o.jsx(Ru,{})]})]})}function Jp({isOpen:i,onClose:c}){const a=_(p=>p.history),u=_(p=>p.project),[f,m]=v.useState(null);if(!i)return null;const g=p=>`${p.projectName} | ${p.layers.length} layer(s) | Modified: ${new Date(p.modified).toLocaleTimeString()}`,w=(p,y)=>{const x=[];p.layers.length!==y.layers.length&&x.push(`Layer count: ${p.layers.length}  ${y.layers.length}`);for(let E=0;E<Math.max(p.layers.length,y.layers.length);E++){const C=p.layers[E],N=y.layers[E];C?N?(C.x!==N.x||C.y!==N.y||C.width!==N.width||C.height!==N.height)&&x.push(`${C.name}: (${C.x}, ${C.y})  (${N.x}, ${N.y})`):x.push(`Layer ${E}: added (${C.name})`):x.push(`Layer ${E}: removed`)}return x.length>0?x:["No layer changes"]},h=p=>{p.key==="Escape"&&c()};return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:c,onKeyDown:h,role:"dialog","aria-modal":"true","aria-label":"Debug History Modal",tabIndex:0,children:o.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col",onClick:p=>p.stopPropagation(),children:[o.jsxs("div",{className:"bg-slate-800 px-6 py-4 border-b border-slate-700 flex justify-between items-center",children:[o.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[o.jsx("span",{className:"text-yellow-400",children:""}),"Debug History"]}),o.jsx("button",{onClick:c,className:"text-slate-400 hover:text-white transition-colors","aria-label":"Close debug menu",children:""})]}),o.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-2",children:[o.jsxs("div",{className:"bg-slate-800 rounded p-3 border border-slate-700 sticky top-0",children:[o.jsx("div",{className:"text-sm font-semibold text-cyan-400 mb-1",children:"Current State"}),o.jsx("div",{className:"text-xs text-slate-300",children:g(u)})]}),a.past.length===0&&a.future.length===0?o.jsx("div",{className:"text-center text-slate-400 py-8",children:o.jsx("p",{className:"text-sm",children:"No history entries yet"})}):o.jsxs(o.Fragment,{children:[a.past.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"text-xs font-semibold text-green-400 mb-2 px-1",children:["UNDO STACK (",a.past.length,")"]}),o.jsx("div",{className:"space-y-1",children:a.past.map((p,y)=>o.jsxs("div",{children:[o.jsx("button",{onClick:()=>m(f===`past-${y}`?null:`past-${y}`),className:"w-full text-left bg-slate-800 hover:bg-slate-700 rounded px-3 py-2 text-xs transition-colors border border-slate-700 hover:border-slate-600",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-green-400",children:""}),o.jsx("span",{className:"text-slate-300 flex-1",children:g(p)}),o.jsx("span",{className:"text-slate-500",children:f===`past-${y}`?"":""})]})}),f===`past-${y}`&&o.jsx("div",{className:"bg-slate-800/50 border-l-2 border-green-400 ml-4 mt-1 p-2 rounded text-xs text-slate-300 space-y-1",children:w(a.past[y+1]||u,p).map((x,E)=>o.jsxs("div",{className:"text-slate-400",children:[" ",x]},E))})]},`past-${y}`))})]}),a.future.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"text-xs font-semibold text-blue-400 mb-2 px-1 mt-4",children:["REDO STACK (",a.future.length,")"]}),o.jsx("div",{className:"space-y-1",children:a.future.map((p,y)=>o.jsxs("div",{children:[o.jsx("button",{onClick:()=>m(f===`future-${y}`?null:`future-${y}`),className:"w-full text-left bg-slate-800 hover:bg-slate-700 rounded px-3 py-2 text-xs transition-colors border border-slate-700 hover:border-slate-600",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-blue-400",children:""}),o.jsx("span",{className:"text-slate-300 flex-1",children:g(p)}),o.jsx("span",{className:"text-slate-500",children:f===`future-${y}`?"":""})]})}),f===`future-${y}`&&o.jsx("div",{className:"bg-slate-800/50 border-l-2 border-blue-400 ml-4 mt-1 p-2 rounded text-xs text-slate-300 space-y-1",children:w(u,p).map((x,E)=>o.jsxs("div",{className:"text-slate-400",children:[" ",x]},E))})]},`future-${y}`))})]})]})]}),o.jsxs("div",{className:"bg-slate-800 px-6 py-3 border-t border-slate-700 text-xs text-slate-400",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:["Stack size: ",a.past.length+a.future.length]}),o.jsxs("span",{children:["Max steps: ",a.maxSteps]})]}),o.jsx("div",{className:"text-slate-500 text-xs mt-1",children:"Press ESC or click overlay to close"})]})]})]})})}const kr="__text_canvas_preview__",qp=({isOpen:i,onClose:c,existingLayer:a})=>{const u=_(G=>G.addLayer),f=_(G=>G.updateLayer),m=_(G=>G.removeLayer),g=sn(),[w,h]=v.useState("Enter your text here"),[p,y]=v.useState(48),[x,E]=v.useState(Il[0].value),[C,N]=v.useState("#FFCDD2"),[D,F]=v.useState("left"),[j,Y]=v.useState(null),[H,W]=v.useState(!1),[M,$]=v.useState(""),[X,Z]=v.useState(!1),[A,B]=v.useState(!1),[q,ue]=v.useState(!0),[ee,J]=v.useState(1.2),[U,me]=v.useState(0),[V,K]=v.useState("normal"),[Q,T]=v.useState(0),[S,z]=v.useState(0),P=v.useRef(null),te=v.useRef(null),ce=v.useRef(!0),[se,de]=v.useState([]);v.useEffect(()=>{mp().then(G=>{G.length>0&&de(G)}),hp()},[]),v.useEffect(()=>{a&&a.textContent!==void 0&&(h(a.textContent),y(a.fontSize||48),E(a.fontFamily||Il[0].value),N(a.fontColor||"#FFCDD2"),F(a.textAlign||"left"),ue(a.disableTransparency||!1),J(a.lineHeight||1.2),me(a.letterSpacing||0),K(a.fontWeight||"normal"),T(a.x),z(a.y),ce.current=a.visible)},[a]),v.useEffect(()=>{!i||!w.trim()||le()},[w,p,x,C,D,q,ee,U,V,i]),v.useEffect(()=>{if(A&&w.trim()&&j){if(a){const Ie=_.getState().project.layers.find(Ee=>Ee.id===a.id);Ie&&Ie.visible&&f(a.id,{visible:!1})}ye()}else we()},[A,j,w,Q,S]),v.useEffect(()=>{if(!A)return;const G=_.subscribe(Ie=>{const Ee=Ie.project.layers.find(We=>We.id===kr);Ee&&(Math.abs(Ee.x-Q)>.1||Math.abs(Ee.y-S)>.1)&&(T(Ee.x),z(Ee.y))});return()=>{G()}},[A,Q,S]),v.useEffect(()=>{i||we()},[i]),v.useEffect(()=>{const G=Ie=>{P.current&&!P.current.contains(Ie.target)&&Z(!1)};return document.addEventListener("mousedown",G),()=>document.removeEventListener("mousedown",G)},[]);const le=async()=>{if(w.trim()){W(!0);try{const G=await Ps({text:w,fontSize:p,fontFamily:x,color:C,textAlign:D,lineHeight:ee,disableTransparency:q,letterSpacing:U,fontWeight:V});Y(G.dataUrl)}catch(G){console.error("Failed to generate text preview:",G)}finally{W(!1)}}},ye=()=>{!j||!A||(te.current!==null&&clearTimeout(te.current),te.current=window.setTimeout(()=>{const G=new Image;G.src=j,G.onload=()=>{if(_.getState().project.layers.find(We=>We.id===kr))f(kr,{imageData:j,width:G.naturalWidth,height:G.naturalHeight,opacity:.7,x:Q,y:S});else if(A){const We={id:kr,name:" Canvas Preview (Temporary)",imageData:j,x:Q,y:S,zIndex:Date.now()+1e6,visible:!0,locked:!1,opacity:.7,width:G.naturalWidth,height:G.naturalHeight};u(We)}}},50))},we=()=>{te.current!==null&&(clearTimeout(te.current),te.current=null);const G=_.getState().project.layers;if(G.find(Ee=>Ee.id===kr)&&m(kr),a){const Ee=G.find(We=>We.id===a.id);Ee&&!Ee.visible&&f(a.id,{visible:!0})}},Me=async()=>{if(!w.trim()){alert("Please enter some text");return}W(!0);try{const G=await Ps({text:w,fontSize:p,fontFamily:x,color:C,textAlign:D,lineHeight:ee,disableTransparency:q,letterSpacing:U,fontWeight:V}),Ie=A?Q:0,Ee=A?S:0;if(a)f(a.id,{imageData:G.dataUrl,width:G.width,height:G.height,x:Ie,y:Ee,textContent:w,fontSize:p,fontFamily:x,fontColor:C,textAlign:D,disableTransparency:q,name:a.name,...ee!==1.2&&{lineHeight:ee},...U!==0&&{letterSpacing:U},...V!=="normal"&&{fontWeight:V}});else{const We={id:crypto.randomUUID(),name:`Text: ${w.substring(0,20)}${w.length>20?"...":""}`,imageData:G.dataUrl,x:Ie,y:Ee,zIndex:Date.now(),visible:!0,locked:!1,opacity:1,width:G.width,height:G.height,textContent:w,fontSize:p,fontFamily:x,fontColor:C,textAlign:D,disableTransparency:q,...ee!==1.2&&{lineHeight:ee},...U!==0&&{letterSpacing:U},...V!=="normal"&&{fontWeight:V}};u(We)}we(),c()}catch(G){console.error("Failed to create text layer:",G),alert("Failed to create text layer. Please try again.")}finally{W(!1)}},_e=[..._l,...se],Ge=_e.filter(G=>G.name.toLowerCase().includes(M.toLowerCase())),Ke=Ge.filter(G=>G.category==="system"),Xe=Ge.filter(G=>G.category==="local"),yt=Ge.filter(G=>G.category==="google"),He=_e.find(G=>G.value===x);return o.jsx(Pr,{isOpen:i,onClose:c,title:a?"Edit Text Layer":"Create Text Layer",noPadding:!0,modalId:"modal-text-layer",children:o.jsxs("div",{className:`${g?"flex flex-col-reverse":"flex"} text-gray-200 h-full w-full overflow-hidden`,children:[o.jsxs("div",{className:`${g?"border-t max-h-[45vh]":"w-80 border-r"} border-gray-700 flex-shrink-0 flex flex-col overflow-hidden bg-gray-800`,children:[o.jsxs("div",{className:"overflow-y-auto flex-1 p-4 space-y-5",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Content"}),o.jsxs("span",{className:"text-xs text-gray-500",children:[w.length," chars"]})]}),o.jsx("textarea",{value:w,onChange:G=>h(G.target.value),placeholder:"Enter text...",className:"w-full h-20 px-3 py-2 bg-gray-900 border border-gray-600 rounded text-white text-sm resize-none focus:outline-none focus:ring-1 focus:ring-blue-500"}),o.jsx("button",{onClick:()=>navigator.clipboard.writeText(w),disabled:!w.trim(),className:"w-full py-1 text-xs text-gray-400 hover:text-white bg-gray-700 hover:bg-gray-600 rounded transition-colors",children:"Copy Text"})]}),o.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-3",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Typography"}),o.jsxs("div",{className:"relative",ref:P,children:[o.jsxs("button",{onClick:()=>Z(!X),className:"w-full px-3 py-1.5 bg-gray-900 border border-gray-600 rounded text-white text-sm text-left flex items-center justify-between hover:bg-gray-700",children:[o.jsx("span",{className:"truncate",children:He?.name||"Arial"}),o.jsx("span",{className:"text-gray-500 text-xs",children:""})]}),X&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded shadow-xl z-50 max-h-60 overflow-y-auto",children:[o.jsx("div",{className:"p-2 sticky top-0 bg-gray-800 border-b border-gray-700",children:o.jsx("input",{type:"text",value:M,onChange:G=>$(G.target.value),placeholder:"Search...",className:"w-full px-2 py-1 bg-gray-900 border border-gray-600 rounded text-white text-xs focus:outline-none focus:border-blue-500",onClick:G=>G.stopPropagation(),autoFocus:!0})}),Ke.length>0&&o.jsxs("div",{children:[o.jsx("div",{className:"px-2 py-1 text-[10px] font-bold text-gray-500 uppercase bg-gray-800/50",children:"System"}),Ke.map(G=>o.jsx("button",{onClick:()=>{E(G.value),Z(!1),$("")},className:`w-full px-3 py-1.5 text-left text-sm hover:bg-blue-600 hover:text-white ${x===G.value?"bg-blue-600 text-white":"text-gray-300"}`,style:{fontFamily:G.value},children:G.name},G.value))]}),Xe.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"px-2 py-1 text-[10px] font-bold text-gray-500 uppercase bg-gray-800/50 border-t border-gray-700",children:["Local (",Xe.length,")"]}),Xe.map(G=>o.jsx("button",{onClick:()=>{E(G.value),Z(!1),$("")},className:`w-full px-3 py-1.5 text-left text-sm hover:bg-blue-600 hover:text-white ${x===G.value?"bg-blue-600 text-white":"text-gray-300"}`,style:{fontFamily:G.value},children:G.name},G.value))]}),yt.length>0&&o.jsxs("div",{children:[o.jsx("div",{className:"px-2 py-1 text-[10px] font-bold text-gray-500 uppercase bg-gray-800/50 border-t border-gray-700",children:"Google Fonts"}),yt.map(G=>o.jsx("button",{onClick:()=>{E(G.value),Z(!1),$("")},className:`w-full px-3 py-1.5 text-left text-sm hover:bg-blue-600 hover:text-white ${x===G.value?"bg-blue-600 text-white":"text-gray-300"}`,style:{fontFamily:G.value},children:G.name},G.value))]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] text-gray-500 mb-1 block",children:"Size"}),o.jsx("input",{type:"number",value:p,onChange:G=>y(Math.max(1,Math.min(2e3,parseInt(G.target.value)||48))),className:"w-full px-2 py-1 bg-gray-900 border border-gray-600 rounded text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] text-gray-500 mb-1 block",children:"Weight"}),o.jsxs("select",{value:V,onChange:G=>K(G.target.value),className:"w-full px-2 py-1 bg-gray-900 border border-gray-600 rounded text-white text-sm",children:[o.jsx("option",{value:"lighter",children:"Light"}),o.jsx("option",{value:"normal",children:"Normal"}),o.jsx("option",{value:"bold",children:"Bold"})]})]})]}),o.jsx("div",{className:"flex flex-wrap gap-1",children:[16,24,32,48,64,96].map(G=>o.jsx("button",{onClick:()=>y(G),className:`px-2 py-0.5 rounded text-[10px] border transition-colors ${p===G?"bg-blue-600 border-blue-500 text-white":"bg-gray-700 border-gray-600 text-gray-400 hover:bg-gray-600 hover:text-gray-200"}`,children:G},G))})]}),o.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-3",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Appearance"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"color",value:C,onChange:G=>N(G.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-0 p-0"}),o.jsx("input",{type:"text",value:C,onChange:G=>N(G.target.value),className:"flex-1 px-2 py-1 bg-gray-900 border border-gray-600 rounded text-white text-sm font-mono uppercase"})]}),o.jsx("div",{className:"space-y-1",children:[["#FFFFFF","#E0E0E0","#C0C0C0","#A0A0A0","#808080","#606060","#404040","#202020","#000000"],["#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828","#B71C1C"],["#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00","#E65100"],["#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825","#F57F17"],["#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32","#1B5E20"],["#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F","#006064"],["#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0","#0D47A1"],["#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A","#4A148C"],["#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457","#880E4F"]].map((G,Ie)=>o.jsx("div",{className:"flex gap-1",children:G.map(Ee=>o.jsx("button",{onClick:()=>N(Ee),className:`flex-1 aspect-square rounded-sm border ${C===Ee?"border-white scale-110 z-10":"border-gray-600 hover:border-gray-400"}`,style:{backgroundColor:Ee},title:Ee},Ee))},Ie))}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] text-gray-500 mb-1 block",children:"Alignment"}),o.jsx("div",{className:"bg-gray-900 rounded border border-gray-600 p-0.5 flex",children:["left","center","right"].map(G=>o.jsx("button",{onClick:()=>F(G),className:`flex-1 py-1 rounded text-xs capitalize ${D===G?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-gray-300"}`,title:`Align ${G}`,children:G},G))})]})]}),o.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-3",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Spacing"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 mb-1",children:[o.jsx("span",{children:"Line Height"}),o.jsx("span",{children:ee.toFixed(1)})]}),o.jsx("input",{type:"range",min:"0.8",max:"2.0",step:"0.1",value:ee,onChange:G=>J(parseFloat(G.target.value)),className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 mb-1",children:[o.jsx("span",{children:"Letter Spacing"}),o.jsxs("span",{children:[U,"px"]})]}),o.jsx("input",{type:"range",min:"-5",max:"10",step:"0.5",value:U,onChange:G=>me(parseFloat(G.target.value)),className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]})]})]}),o.jsx("div",{className:"pt-2",children:o.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-300 cursor-pointer hover:text-white select-none",children:[o.jsx("input",{type:"checkbox",checked:q,onChange:G=>ue(G.target.checked),className:"rounded bg-gray-700 border-gray-600 text-blue-600 focus:ring-offset-gray-800"}),o.jsx("span",{children:"Pixel Perfect (No AA)"})]})})]}),o.jsx("div",{className:"p-4 border-t border-gray-700 bg-gray-800/50",children:o.jsx("button",{onClick:Me,disabled:H||!w.trim(),className:"w-full py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-700 disabled:text-gray-500 rounded text-white font-semibold transition-colors text-sm",children:a?"Update Layer":"Create Layer"})})]}),o.jsxs("div",{className:"flex-1 bg-gray-900 relative flex flex-col min-w-0",children:[o.jsxs("div",{className:"h-10 border-b border-gray-700 flex items-center justify-between px-4 bg-gray-800/30",children:[o.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Preview"}),o.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400 cursor-pointer hover:text-gray-200 select-none",children:[o.jsx("input",{type:"checkbox",checked:A,onChange:G=>B(G.target.checked),className:"rounded bg-gray-700 border-gray-600 text-blue-600 focus:ring-offset-gray-800"}),o.jsx("span",{children:"Show on Canvas"})]})]}),o.jsx("div",{className:"flex-1 overflow-auto flex items-center justify-center p-8 bg-[url('/grid-pattern.png')] bg-repeat",children:H?o.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),"Rendering..."]}):j?o.jsx("div",{className:"relative",children:o.jsx("img",{src:j,alt:"Text preview",className:"max-w-full max-h-full object-contain",style:{imageRendering:"pixelated"}})}):o.jsx("div",{className:"text-gray-600 text-sm italic",children:"Enter text to generate preview"})})]})]})})},Er="__shape_canvas_preview__",eh=["rectangle","circle","triangle","hexagon","octagon","star"],th=({isOpen:i,onClose:c,existingLayer:a})=>{const u=_(V=>V.addLayer),f=_(V=>V.updateLayer),m=_(V=>V.removeLayer),g=sn(),[w,h]=v.useState("rectangle"),[p,y]=v.useState(200),[x,E]=v.useState(1),[C,N]=v.useState(1),[D,F]=v.useState("#FFFFFF"),[j,Y]=v.useState(null),[H,W]=v.useState(!1),[M,$]=v.useState(!0),[X,Z]=v.useState(0),[A,B]=v.useState(0),q=v.useRef(null),ue=v.useRef(!0);v.useEffect(()=>{a&&a.shapeType!==void 0&&(h(a.shapeType),y(a.shapeSize||200),E(a.shapeStretchX||1),N(a.shapeStretchY||1),F(a.shapeColor||"#FFFFFF"),Z(a.x),B(a.y),ue.current=a.visible)},[a]),v.useEffect(()=>{i&&ee()},[w,p,x,C,D,i]),v.useEffect(()=>{if(M&&j){if(a){const K=_.getState().project.layers.find(Q=>Q.id===a.id);K&&K.visible&&f(a.id,{visible:!1})}J()}else U()},[M,j,X,A]),v.useEffect(()=>{if(!M)return;const V=_.subscribe(K=>{const Q=K.project.layers.find(T=>T.id===Er);Q&&(Math.abs(Q.x-X)>.1||Math.abs(Q.y-A)>.1)&&(Z(Q.x),B(Q.y))});return()=>{V()}},[M,X,A]),v.useEffect(()=>{i||U()},[i]);const ee=async()=>{W(!0);try{const V=await Gn({shapeType:w,size:p,stretchX:x,stretchY:C,color:D});Y(V.dataUrl)}catch(V){console.error("Failed to generate shape preview:",V)}finally{W(!1)}},J=()=>{!j||!M||(q.current!==null&&clearTimeout(q.current),q.current=window.setTimeout(()=>{const V=new Image;V.src=j,V.onload=()=>{if(_.getState().project.layers.find(T=>T.id===Er))f(Er,{imageData:j,width:V.naturalWidth,height:V.naturalHeight,opacity:.7,x:X,y:A});else if(M){const T={id:Er,name:" Canvas Preview (Temporary)",imageData:j,x:X,y:A,zIndex:Date.now()+1e6,visible:!0,locked:!1,opacity:.7,width:V.naturalWidth,height:V.naturalHeight};u(T)}}},50))},U=()=>{if(q.current!==null&&(clearTimeout(q.current),q.current=null),_.getState().project.layers.find(Q=>Q.id===Er)&&m(Er),a){const Q=_.getState().project.layers.find(T=>T.id===a.id);Q&&!Q.visible&&f(a.id,{visible:ue.current})}},me=async()=>{if(j){W(!0);try{const V=await Gn({shapeType:w,size:p,stretchX:x,stretchY:C,color:D}),K=M?X:-V.offsetX,Q=M?A:-V.offsetY;if(a)f(a.id,{imageData:V.dataUrl,width:V.width,height:V.height,x:K,y:Q,shapeType:w,shapeSize:p,shapeStretchX:x,shapeStretchY:C,shapeColor:D,name:a.name});else{const T={id:crypto.randomUUID(),name:`Shape: ${w}`,imageData:V.dataUrl,x:K,y:Q,zIndex:Date.now(),visible:!0,locked:!1,opacity:1,width:V.width,height:V.height,shapeType:w,shapeSize:p,shapeStretchX:x,shapeStretchY:C,shapeColor:D};u(T)}U(),c()}catch(V){console.error("Failed to create shape layer:",V),alert("Failed to create shape layer. Please try again.")}finally{W(!1)}}};return o.jsx(Pr,{isOpen:i,onClose:c,title:a?"Edit Shape Layer":"Create Shape Layer",noPadding:!0,modalId:"modal-shape",children:o.jsxs("div",{className:`${g?"flex flex-col-reverse":"flex"} text-gray-200 h-full w-full overflow-hidden`,children:[o.jsxs("div",{className:`${g?"border-t max-h-[45vh]":"w-80 border-r"} border-gray-700 flex-shrink-0 flex flex-col overflow-hidden bg-gray-800`,children:[o.jsxs("div",{className:"overflow-y-auto flex-1 p-4 space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Shape"}),o.jsx("div",{className:"grid grid-cols-3 gap-1",children:eh.map(V=>o.jsx("button",{onClick:()=>h(V),className:`px-2 py-2 text-[10px] font-medium rounded transition-colors capitalize ${w===V?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:V},V))})]}),o.jsxs("div",{className:"space-y-2 border-t border-gray-700 pt-3",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Size"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("input",{type:"range",min:"1",max:"500",value:p,onChange:V=>y(Number(V.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-xs text-gray-500",children:[p,"px"]}),o.jsx("input",{type:"number",value:p,onChange:V=>y(Math.max(1,Math.min(500,parseInt(V.target.value)||p))),className:"flex-1 px-2 py-1 bg-gray-900 border border-gray-600 rounded text-xs text-white"})]})]}),o.jsx("div",{className:"flex flex-wrap gap-1",children:[50,100,150,200,300,400].map(V=>o.jsx("button",{onClick:()=>y(V),className:`px-2 py-0.5 rounded text-[10px] border transition-colors ${p===V?"bg-blue-600 border-blue-500 text-white":"bg-gray-700 border-gray-600 text-gray-400 hover:bg-gray-600"}`,children:V},V))})]}),o.jsxs("div",{className:"space-y-2 border-t border-gray-700 pt-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Stretch"}),o.jsx("button",{onClick:()=>{E(1),N(1)},className:"text-[10px] text-blue-400 hover:text-blue-300",children:"Reset"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500",children:[o.jsx("span",{children:"Horizontal"}),o.jsxs("span",{children:[x.toFixed(2),"x"]})]}),o.jsx("input",{type:"range",min:"0.1",max:"20",step:"0.1",value:x,onChange:V=>E(Number(V.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500",children:[o.jsx("span",{children:"Vertical"}),o.jsxs("span",{children:[C.toFixed(2),"x"]})]}),o.jsx("input",{type:"range",min:"0.1",max:"20",step:"0.1",value:C,onChange:V=>N(Number(V.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"})]})]}),o.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-3",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Appearance"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"color",value:D,onChange:V=>F(V.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-0 p-0"}),o.jsx("input",{type:"text",value:D,onChange:V=>F(V.target.value),className:"flex-1 px-2 py-1 bg-gray-900 border border-gray-600 rounded text-white text-sm font-mono uppercase"})]}),o.jsx("div",{className:"space-y-1",children:[["#FFFFFF","#E0E0E0","#C0C0C0","#A0A0A0","#808080","#606060","#404040","#202020","#000000"],["#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828","#B71C1C"],["#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00","#E65100"],["#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825","#F57F17"],["#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32","#1B5E20"],["#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F","#006064"],["#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0","#0D47A1"],["#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A","#4A148C"],["#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457","#880E4F"]].map((V,K)=>o.jsx("div",{className:"flex gap-1",children:V.map(Q=>o.jsx("button",{onClick:()=>F(Q),className:`flex-1 aspect-square rounded-sm border ${D===Q?"border-white scale-110 z-10":"border-gray-600 hover:border-gray-400"}`,style:{backgroundColor:Q},title:Q},Q))},K))})]}),o.jsx("div",{className:"space-y-2 border-t border-gray-700 pt-3",children:o.jsxs("label",{className:"flex items-center gap-2 text-xs font-semibold text-gray-400 uppercase cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:M,onChange:V=>$(V.target.checked),className:"rounded cursor-pointer"}),"Preview on Canvas"]})})]}),o.jsxs("div",{className:"border-t border-gray-700 p-3 space-y-2",children:[o.jsx("button",{onClick:me,disabled:H,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed uppercase",children:H?"Processing...":a?"Update":"Create"}),o.jsx("button",{onClick:c,className:"w-full px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 text-xs font-semibold rounded transition-colors uppercase",children:"Cancel"})]})]}),o.jsxs("div",{className:"flex-1 bg-gray-900 relative flex flex-col min-w-0",children:[o.jsxs("div",{className:"h-10 border-b border-gray-700 flex items-center justify-between px-4 bg-gray-800/30",children:[o.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Preview"}),o.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400 cursor-pointer hover:text-gray-200 select-none",children:[o.jsx("input",{type:"checkbox",checked:M,onChange:V=>$(V.target.checked),className:"rounded bg-gray-700 border-gray-600 text-blue-600 focus:ring-offset-gray-800"}),o.jsx("span",{children:"Show on Canvas"})]})]}),o.jsx("div",{className:"flex-1 overflow-auto flex items-center justify-center p-8 bg-[url('/grid-pattern.png')] bg-repeat",children:H?o.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),"Rendering..."]}):j?o.jsx("div",{className:"relative",children:o.jsx("img",{src:j,alt:"Shape preview",className:"max-w-full max-h-full object-contain",style:{imageRendering:"pixelated"}})}):o.jsx("div",{className:"text-gray-600 text-sm italic",children:"Configure shape to generate preview"})})]})]})})};function nh(){const i=_(M=>M.project),c=_(M=>M.selectedLayerIds),a=_(M=>M.selectAllLayers),u=_(M=>M.deselectAllLayers),f=_(M=>M.deleteSelectedLayers),m=_(M=>M.moveSelectedLayers),g=_(M=>M.setViewport),w=_(M=>M.undo),h=_(M=>M.redo),p=_(M=>M.copySelectedLayers),y=_(M=>M.copySelectedLayersToClipboard),x=_(M=>M.pasteSelectedLayers),E=_(M=>M.pasteFromClipboard),C=_(M=>M.reorderSelectedLayers),N=v.useRef(!1),D=v.useRef(0),F=v.useRef(0),j=v.useRef(new Set),Y=v.useRef(null),H=()=>{Y.current===null&&c.length!==0&&(Y.current=window.setInterval(()=>{let M=0,$=0;const X={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};for(const[Z,[A,B]]of Object.entries(X))j.current.has(Z)&&(M+=A,$+=B);(j.current.has("ShiftLeft")||j.current.has("ShiftRight"))&&(M*=10,$*=10),(M!==0||$!==0)&&m(M,$)},50))},W=()=>{Y.current!==null&&(clearInterval(Y.current),Y.current=null)};v.useEffect(()=>{const M=A=>{if((A.target instanceof HTMLInputElement||A.target instanceof HTMLTextAreaElement)&&!((A.ctrlKey||A.metaKey)&&(A.key==="s"||A.key==="o")))return;const B=A.ctrlKey||A.metaKey,q=A.shiftKey;if(A.code==="Space"&&!A.repeat){A.preventDefault(),N.current=!0;return}if(q&&!B&&(A.key==="ArrowUp"||A.key==="ArrowDown")){if(c.length>0){A.preventDefault();const ue=A.key==="ArrowUp"?"up":"down";C(ue)}return}if(!q&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(A.key)){A.preventDefault(),j.current.add(A.key),(j.current.has("ShiftLeft")||j.current.has("ShiftRight"))&&j.current.add("ShiftLeft"),H();return}if(A.key==="Shift"){j.current.add(A.code);return}if(B&&A.key.toLowerCase()==="z"&&!q){A.preventDefault(),w();return}if(B&&A.key.toLowerCase()==="z"&&q){A.preventDefault(),h();return}if(B&&A.key.toLowerCase()==="y"){A.preventDefault(),h();return}if(A.key==="Delete"||A.key==="Backspace"){c.length>0&&(A.preventDefault(),window.confirm(`Delete ${c.length} layer${c.length!==1?"s":""}?`)&&f());return}if(B&&A.key==="a"){A.preventDefault(),i.layers.length>0&&a();return}if(B&&A.key==="d"){A.preventDefault(),u();return}if(B&&A.key==="c"){c.length>0&&(A.preventDefault(),p(),y());return}if(B&&A.key==="v"){A.preventDefault(),E();return}if((A.key==="+"||A.key==="=")&&!B){A.preventDefault();const ue=i.viewport.zoom,ee=[25,50,100,200,400,800,1600],J=ee.find(U=>U>ue)||ee[ee.length-1];g({zoom:J});return}if(A.key==="-"&&!B){A.preventDefault();const ue=i.viewport.zoom,ee=[25,50,100,200,400,800,1600],J=[...ee].reverse().find(U=>U<ue)||ee[0];g({zoom:J});return}if(A.key==="0"){A.preventDefault(),g({zoom:100});return}},$=A=>{A.code==="Space"&&(N.current=!1),j.current.delete(A.key),j.current.delete(A.code),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].some(q=>j.current.has(q))||W()},X=A=>{N.current&&(D.current=A.clientX,F.current=A.clientY)},Z=A=>{if(N.current&&(A.buttons&1)===1){const B=A.clientX-D.current,q=A.clientY-F.current,ue=i.viewport.zoom/100,ee=-B/ue,J=-q/ue;g({panX:i.viewport.panX+ee,panY:i.viewport.panY+J}),D.current=A.clientX,F.current=A.clientY}};return window.addEventListener("keydown",M),window.addEventListener("keyup",$),window.addEventListener("mousedown",X),window.addEventListener("mousemove",Z),()=>{window.removeEventListener("keydown",M),window.removeEventListener("keyup",$),window.removeEventListener("mousedown",X),window.removeEventListener("mousemove",Z),W()}},[c,i,a,u,f,m,g,w,h,p,y,x,E,C])}function Tu(i){const{viewport:c,...a}=i;return a}function rh(){const i=_(m=>m.project),c=_(m=>m.pushHistory),a=_(m=>m._lastHistoryPushAt),u=v.useRef(i),f=v.useRef(null);v.useEffect(()=>{f.current&&clearTimeout(f.current);const m=Tu(i),g=Tu(u.current);if(JSON.stringify(m)!==JSON.stringify(g)){if(a&&Date.now()-a<100){u.current=i;return}f.current=setTimeout(()=>{c(),u.current=i},500)}return()=>{f.current&&clearTimeout(f.current)}},[i,c,a])}function oh(){const[i,c]=v.useState(!1);return v.useEffect(()=>{const a=u=>{(u.ctrlKey||u.metaKey)&&u.shiftKey&&u.key==="D"&&(u.preventDefault(),c(f=>!f))};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[]),{isOpen:i,setIsOpen:c,toggle:()=>c(a=>!a)}}const sh="PixelConnectDB",Dr="projects",Xu="current_project",ah=1,Vu=()=>new Promise((i,c)=>{const a=indexedDB.open(sh,ah);a.onerror=()=>c(a.error),a.onsuccess=()=>i(a.result),a.onupgradeneeded=u=>{const f=u.target.result;f.objectStoreNames.contains(Dr)||f.createObjectStore(Dr)}}),lh=async i=>{try{const c=await Vu(),a=Hu(i);return new Promise((u,f)=>{const w=c.transaction(Dr,"readwrite").objectStore(Dr).put(a,Xu);w.onsuccess=()=>u(),w.onerror=()=>f(w.error)})}catch(c){console.error("Failed to save to cache:",c)}},ih=async()=>{try{const i=await Vu();return new Promise((c,a)=>{const m=i.transaction(Dr,"readonly").objectStore(Dr).get(Xu);m.onsuccess=async()=>{const g=m.result;if(g)try{const w=await Al(g);c(w)}catch(w){a(w)}else c(null)},m.onerror=()=>a(m.error)})}catch(i){return console.error("Failed to load from cache:",i),null}},ch=2e3;function uh(){const i=_(f=>f.project),c=_(f=>f.loadProject),a=v.useRef(),u=v.useRef(!1);v.useEffect(()=>{(async()=>{if(!u.current)try{const m=await ih();if(m){console.log("[AutoSave] Restoring cached project...");const g={...m,layers:m.layers.filter(w=>w.id!=="__text_canvas_preview__"&&w.id!=="__shape_canvas_preview__")};c(g)}}catch(m){console.error("[AutoSave] Failed to restore project:",m)}finally{u.current=!0}})()},[c]),v.useEffect(()=>{if(u.current)return a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{const f={...i,layers:i.layers.filter(m=>m.id!=="__text_canvas_preview__"&&m.id!=="__shape_canvas_preview__")};lh(f)},ch),()=>{a.current&&clearTimeout(a.current)}},[i])}const Ml=[25,33,50,66,75,100,125,150,200,400,800,1600,3200];function _u(i,c){const a=document.querySelector('[data-region="canvas"]');if(!a)return 100;const u=a.clientWidth,f=a.clientHeight;if(u<=0||f<=0||i<=0||c<=0)return 100;const m=u/i,g=f/c,w=Math.min(m,g)*100,h=Ml.reduce((y,x)=>Math.abs(x-w)<Math.abs(y-w)?x:y),p=Ml.indexOf(h);return p>0?Ml[p-1]:h}function dh(){const i=_(f=>f.project.layers),c=_(f=>f.cropCanvasToLayers),a=v.useRef(!1),u=v.useCallback(()=>{setTimeout(()=>{const f=_.getState(),m=_u(f.project.canvas.width,f.project.canvas.height);f.setViewport({zoom:m,panX:0,panY:0})},50)},[]);v.useEffect(()=>(window.fitCanvasToScreen=u,()=>{delete window.fitCanvasToScreen}),[u]),v.useEffect(()=>{const f=i.length>0;if(f&&!a.current){a.current=!0;const m=setTimeout(()=>{c(),setTimeout(()=>{const g=_.getState(),w=_u(g.project.canvas.width,g.project.canvas.height);g.setViewport({zoom:w,panX:0,panY:0})},50)},50);return()=>clearTimeout(m)}f||(a.current=!1)},[i.length,c])}const fh=[{target:null,title:"Welcome to PixelConnect",description:"A pixel-art compositor and image editor. This quick tour will walk you through the key features. Press Next to continue or Skip to dismiss.",placement:"center"},{target:'[data-region="toolbar"]',title:"Toolbar",description:"Your main control bar. Rename your project, save/load files, undo/redo, toggle the grid overlay, selection borders, and layer tools from here.",placement:"bottom"},{target:'[data-region="layer-panel"]',title:"Layers Panel",description:"All your layers live here. Drag to reorder, click the eye to toggle visibility, or use the lock icon. Use the + buttons at the bottom to add image, text, or shape layers.",placement:"right"},{target:'[data-region="canvas"]',title:"Canvas",description:"Your workspace. Click a layer to select it, drag to move. Middle-click (or two-finger) to pan, scroll wheel (or pinch) to zoom. Drop images here to add them as layers.",placement:"bottom"},{target:'[data-region="property-panel"]',title:"Properties Panel",description:"Adjust the selected layer's opacity, position, and dimensions. Change canvas size, background color, and shadow settings at the bottom.",placement:"left"},{target:'[data-region="actions-menu"]',title:"Actions Menu",description:`With a layer selected, open Modify to access powerful tools:

 Transparency Masking  Remove a chosen color and make it transparent.
 Pixelator  Convert any image into pixel art with palette matching and dithering.
 Crop  Trim the layer to a smaller region.
 BG Removal  Experimental flood-fill background removal.`,placement:"left"},{target:'[data-region="zoom-controls"]',title:"Zoom Controls",description:"Zoom in/out with preset levels or use Fit to Screen to auto-center everything. The keyboard shortcut Ctrl+0 also resets zoom.",placement:"bottom"},{target:'[data-region="file-operations"]',title:"Save & Export",description:"Save projects as .pixcomp files to reload later. Export to PNG for sharing. Your work also auto-saves to the browser's local storage.",placement:"bottom"},{target:null,title:"Keyboard Shortcuts",description:`Ctrl+Z / Ctrl+Y  Undo/Redo
Ctrl+S  Save project
Delete  Remove selected layers
Arrow keys  Nudge selected layers
Ctrl+Click  Multi-select layers`,placement:"center"},{target:null,title:"You're all set!",description:"Drop an image onto the canvas to get started, or use the Pixelator tool (in File menu) to convert images to pixel art. You can reopen this tour anytime from the ? button.",placement:"center"}],ph=[{target:null,title:"Welcome to PixelConnect",description:"A pixel-art compositor and image editor, optimized for mobile. This quick tour will show you around. Tap Next to continue.",placement:"center"},{target:'[data-region="toolbar"]',title:"Toolbar",description:"Two rows: top has project name, file ops, and undo/redo. Bottom row has grid, borders, tools toggles, and zoom controls.",placement:"bottom"},{target:'[data-region="canvas"]',title:"Canvas",description:"One-finger to pan, pinch to zoom. Tap a layer to select it, then drag to move. Drop or upload images to add layers.",placement:"center"},{target:null,title:"Layers Panel ()",description:"Tap the  button in the bottom-left corner to open the layers drawer. Reorder layers, toggle visibility, and create text or shape layers from here.",placement:"center",mobileTarget:null},{target:null,title:"Properties Panel ()",description:"Tap the  button in the bottom-right corner. Adjust opacity, position, canvas size, and background color.",placement:"center"},{target:null,title:"Actions Menu",description:`With a layer selected, open Properties () and tap Modify to access:

 Transparency Masking  Remove a color and make it transparent.
 Pixelator  Convert images to pixel art with palette matching and dithering.
 Crop  Trim the layer to a smaller region.
 BG Removal  Experimental flood-fill background removal.`,placement:"center"},{target:'[data-region="zoom-controls"]',title:"Zoom Controls",description:"Use Fit to Screen to auto-center your canvas, or tap +/ for fine control. Pinch gestures work on the canvas too.",placement:"top"},{target:null,title:"You're all set!",description:"Drop an image onto the canvas to get started, or use the Pixelator tool (in the file menu) to convert images to pixel art. Reopen this tour anytime from the ? button in the toolbar.",placement:"center"}],Gu="pixelconnect_tutorial_seen";function hh({isOpen:i,onClose:c}){const a=sn(),u=a?ph:fh,[f,m]=v.useState(0),[g,w]=v.useState(null),h=u[f],p=v.useCallback(()=>{if(!i)return;const F=a&&h.mobileTarget!==void 0?h.mobileTarget:h.target;if(!F){w(null);return}const j=document.querySelector(F);w(j?j.getBoundingClientRect():null)},[i,h,a]);if(v.useEffect(()=>(p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)),[p]),v.useEffect(()=>{i&&m(0)},[i]),!i)return null;const y=()=>{f<u.length-1?m(f+1):E()},x=()=>{f>0&&m(f-1)},E=()=>{localStorage.setItem(Gu,"true"),c()},C=a&&h.mobilePlacement?h.mobilePlacement:h.placement||"bottom",N=()=>{if(!g||C==="center")return{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const F=16,j=Math.min(360,window.innerWidth-32),Y=280,H=window.innerWidth,W=window.innerHeight,M=Z=>Math.max(16,Math.min(Z,H-j-16)),$=Z=>Math.max(16,Math.min(Z,W-Y-16));let X;switch(C){case"bottom":X={position:"fixed",top:$(g.bottom+F),left:M(g.left),maxWidth:j};break;case"top":X={position:"fixed",top:$(g.top-F-Y),left:M(g.left),maxWidth:j};break;case"right":{const Z=g.right+F,A=Z+j>H?M(g.left+16):Z;X={position:"fixed",top:$(g.top+(g.height-Y)/2),left:A,maxWidth:j};break}case"left":{const Z=H-g.left+F,A=g.left-F-j<0?void 0:Z;X={position:"fixed",top:$(g.top+(g.height-Y)/2),...A!==void 0?{right:A,maxWidth:j}:{left:M(g.right-j),maxWidth:j}};break}default:X={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}return X},D=()=>{if(!g)return{};const F=6,j=g.left-F,Y=g.top-F,H=g.width+F*2,W=g.height+F*2,M=8;return{clipPath:`polygon(
        0% 0%, 100% 0%, 100% 100%, 0% 100%, 0% 0%,
        ${j}px ${Y+M}px,
        ${j+M}px ${Y}px,
        ${j+H-M}px ${Y}px,
        ${j+H}px ${Y+M}px,
        ${j+H}px ${Y+W-M}px,
        ${j+H-M}px ${Y+W}px,
        ${j+M}px ${Y+W}px,
        ${j}px ${Y+W-M}px,
        ${j}px ${Y+M}px
      )`}};return o.jsxs("div",{className:"fixed inset-0 z-[400]",role:"dialog","aria-modal":"true","aria-label":"Tutorial",children:[o.jsx("div",{className:"absolute inset-0 bg-black/70 transition-all duration-300",style:D(),onClick:E}),g&&o.jsx("div",{className:"absolute border-2 border-blue-400/60 rounded-lg pointer-events-none transition-all duration-300",style:{left:g.left-6,top:g.top-6,width:g.width+12,height:g.height+12,boxShadow:"0 0 20px rgba(96, 165, 250, 0.3)"}}),o.jsxs("div",{className:"bg-gray-900 border border-gray-600 rounded-xl shadow-2xl p-5 z-[401] text-gray-200",style:{...N(),maxWidth:Math.min(380,window.innerWidth-32)},children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:[f+1," / ",u.length]}),o.jsx("button",{onClick:E,className:"text-xs text-gray-500 hover:text-gray-300 transition-colors",children:"Skip tour"})]}),o.jsx("h3",{className:"text-base font-bold text-white mb-2",children:h.title}),o.jsx("p",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line mb-4",children:h.description}),o.jsx("div",{className:"flex items-center justify-center gap-1.5 mb-4",children:u.map((F,j)=>o.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${j===f?"bg-blue-500":j<f?"bg-blue-800":"bg-gray-600"}`},j))}),o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsx("button",{onClick:x,disabled:f===0,className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed bg-gray-700 hover:bg-gray-600 text-gray-200",children:"Previous"}),o.jsx("button",{onClick:y,className:"px-4 py-2 text-sm font-semibold rounded-lg transition-colors bg-blue-600 hover:bg-blue-500 text-white",children:f===u.length-1?"Finish":"Next"})]})]})]})}function gh(){const[i,c]=v.useState(!1),[a,u]=v.useState(!1);return v.useEffect(()=>{if(!localStorage.getItem(Gu)){u(!0);const m=setTimeout(()=>c(!0),800);return()=>clearTimeout(m)}},[]),{showTutorial:i,setShowTutorial:c,isFirstVisit:a}}function mh(){const i=_(B=>B.project),c=_(B=>B.isDirty),[a,u]=v.useState(!1),[f,m]=v.useState(void 0),[g,w]=v.useState(!1),[h,p]=v.useState(void 0),y=sn(),{showTutorial:x,setShowTutorial:E,isFirstVisit:C}=gh(),[N,D]=v.useState(!1),[F,j]=v.useState(!1);Dp(),nh(),rh(),uh();const Y=_(B=>B.addLayer),H=_(B=>B.selectLayer);v.useEffect(()=>{if(!C)return;const B=setTimeout(async()=>{if(!(_.getState().project.layers.length>0))try{const q=await fetch("/kanoe.jpg");if(!q.ok)return;const ue=await q.blob(),ee=await new Promise(me=>{const V=new FileReader;V.onload=()=>me(V.result),V.readAsDataURL(ue)}),J=new Image;J.src=ee,await new Promise(me=>{J.onload=()=>me()}),Y({name:"kanoe.jpg",imageData:ee,x:0,y:0,zIndex:0,visible:!0,locked:!1,opacity:1,width:J.naturalWidth,height:J.naturalHeight});const U=_.getState().project.layers;U.length>0&&H(U[U.length-1].id,!1)}catch{}},500);return()=>clearTimeout(B)},[C,Y,H]),dh();const{isOpen:W,setIsOpen:M}=oh(),$=B=>{m(B),u(!0)},X=()=>{u(!1),m(void 0)},Z=B=>{p(B),w(!0)},A=()=>{w(!1),p(void 0)};return v.useEffect(()=>(window.openTextLayerModal=$,()=>{delete window.openTextLayerModal}),[]),v.useEffect(()=>(window.openShapeModal=Z,()=>{delete window.openShapeModal}),[]),v.useEffect(()=>{const B=q=>{c&&(q.preventDefault(),q.returnValue="",console.warn("[DEBUG] Unsaved changes detected - warning user before closing"))};return window.addEventListener("beforeunload",B),()=>window.removeEventListener("beforeunload",B)},[c]),v.useEffect(()=>{const B=c?` ${i.projectName} - PixelConnect`:`${i.projectName} - PixelConnect`;document.title=B},[i.projectName,c]),o.jsxs("div",{className:"h-screen flex flex-col bg-canvas-bg text-white overflow-hidden",children:[o.jsx(Qp,{onHelpClick:()=>E(!0)}),o.jsx("div",{className:"flex flex-1 gap-0 overflow-hidden relative",children:y?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsx(Lu,{})}),o.jsx("button",{onClick:()=>{D(!N),j(!1)},className:`fixed bottom-4 left-4 z-[200] w-12 h-12 rounded-full shadow-lg flex items-center justify-center text-lg transition-colors ${N?"bg-blue-600 text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,"aria-label":N?"Close layers panel":"Open layers panel",children:""}),o.jsx("button",{onClick:()=>{j(!F),D(!1)},className:`fixed bottom-4 right-4 z-[200] w-12 h-12 rounded-full shadow-lg flex items-center justify-center text-lg transition-colors ${F?"bg-blue-600 text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,"aria-label":F?"Close properties panel":"Open properties panel",children:""}),N&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[150]",onClick:()=>D(!1)}),o.jsxs("div",{className:"fixed top-16 left-0 bottom-0 w-72 bg-panel-bg border-r border-border z-[160] overflow-hidden flex flex-col animate-slide-in-left shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border",children:[o.jsx("span",{className:"text-sm font-semibold text-gray-300",children:"Layers"}),o.jsx("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-white text-lg px-1",children:""})]}),o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsx(Mu,{})})]})]}),F&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[150]",onClick:()=>j(!1)}),o.jsxs("div",{className:"fixed top-16 right-0 bottom-0 w-72 bg-panel-bg border-l border-border z-[160] overflow-hidden flex flex-col animate-slide-in-right shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border",children:[o.jsx("span",{className:"text-sm font-semibold text-gray-300",children:"Properties"}),o.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-white text-lg px-1",children:""})]}),o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsx(zu,{})})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-64 border-r border-border overflow-hidden flex flex-col",children:o.jsx(Mu,{})}),o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsx(Lu,{})}),o.jsx("div",{className:"w-64 border-l border-border overflow-hidden flex flex-col",children:o.jsx(zu,{})})]})}),o.jsx(Jp,{isOpen:W,onClose:()=>M(!1)}),o.jsx(qp,{isOpen:a,onClose:X,existingLayer:f}),o.jsx(th,{isOpen:g,onClose:A,existingLayer:h}),o.jsx(hh,{isOpen:x,onClose:()=>E(!1)})]})}Yf.createRoot(document.getElementById("root")).render(o.jsx(Au.StrictMode,{children:o.jsx(mh,{})}));
//# sourceMappingURL=index-D0clb47g.js.map
